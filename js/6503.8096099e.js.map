{"version":3,"file":"js/6503.8096099e.js","mappings":"qMAKA,IAAIA,EAAc,8CAGX,MAAMC,GAAmBC,EAAAA,EAAAA,IAAY,CAC1CC,GAAI,WACJC,MAAO,KAAM,CACXC,WAAY,GACZC,iBAAkB,GAClBC,UAAW,KACXC,oBAAqB,GACrBC,UAAW,KACXC,YAAa,KAGbC,eAAgB,KAChBC,oBAAqB,KACrBC,mBAAoB,KACpBC,wBAAyB,KACzBC,oBAAqB,KACrBC,iBAAkB,KAClBC,mBAAoB,KACpBC,sBAAuB,KACvBC,YAAa,KACbC,mBAAoB,KACpBC,gBAAiB,OAGnBC,QAAS,CACPC,aAAenB,IACN,CACLC,WAAYD,EAAMC,WAClBC,iBAAkBF,EAAME,iBACxBC,UAAWH,EAAMG,UACjBC,oBAAqBJ,EAAMI,oBAC3BC,UAAWL,EAAMK,aAIvBe,QAAS,CACPC,eAAeC,GACb,UACQC,IAAAA,IACE,GAAE3B,0BAAoC0B,KAC3CE,MAAMC,GAAcC,KAAKnB,eAAiBkB,EAASE,MAGxD,CAFE,MAAOC,GACPF,KAAKlB,oBAAsBoB,CAC7B,CACF,EACAP,mBAAmBC,EAAWO,GAC5B,UACQN,IAAAA,IACE,GAAE3B,0BAAoC0B,UAAkBO,KAC7DL,MAAMC,GAAcC,KAAKjB,mBAAqBgB,EAASE,MAG5D,CAFE,MAAOC,GACPF,KAAKhB,wBAA0BkB,CACjC,CACF,EACAP,kBAAkBM,GAChB,UACQJ,IAAAA,KACG,GAAE3B,cAAyB+B,GACjCH,MAAMC,GAAcC,KAAKf,oBAAsBc,EAASE,MAG7D,CAFE,MAAOC,GACPF,KAAKd,iBAAmBgB,CAC1B,CACF,EACAP,oBAAoBtB,GAClB,UACQwB,IAAAA,IACE,GAAE3B,iBAA2BG,KAClCyB,MAAMC,GAAcC,KAAKZ,sBAAwBW,EAASE,MAG/D,CAFE,MAAOC,GACPF,KAAKb,mBAAqBe,CAC5B,CACF,EACAP,mBACE,MAAMS,EAAQ,IAAIC,EAAAA,QACZD,EAAME,SACZ,MAAMC,QAAcH,EAAMI,IAAI,SACxBC,EAAcC,KAAKC,MAAMJ,GAC/B,UACQV,IAAAA,IACE,GAAE3B,mBAA6BuC,GAAaF,SACjDT,MAAMC,GAAcC,KAAKV,mBAAqBS,EAASE,MAG5D,CAFE,MAAOC,GACPF,KAAKT,gBAAkBW,CACzB,CACF,EAEAP,eAAeiB,GACbZ,KAAKzB,WAAaqC,CACpB,EACAjB,qBAAqBkB,GACnBb,KAAKxB,iBAAmBqC,CAC1B,EACAlB,cAAcQ,GACZH,KAAKvB,UAAY0B,CACnB,EACAR,cAAcmB,GACZd,KAAKrB,UAAYmC,CACnB,EACAnB,kBACE,GAAIK,KAAKvB,WAAsC,IAAzBuB,KAAKxB,iBACzB,IACE,IAAIuC,EAAS,CACXC,QAAS,CACPC,OAAQ,MACR,eAAgB,wBAIhBC,EAAS,WACTC,EAAAA,EAAAA,GAAW,YACbD,EAAS,UAGX,IAAIE,EAAe,IAAIC,SACvBD,EAAaE,OAAO,OAAQtB,KAAKvB,WACjC2C,EAAaE,OAAO,UAAWtB,KAAKxB,kBACpC4C,EAAaE,OAAO,cAAeJ,GAEnC,MAAMnB,QAAiBF,IAAAA,KACpB,wCACDuB,EACAL,GAGF,IAAIQ,EAAS,GAEb,MAAMC,EAAK,gBACX,IAAIC,EAAQD,EAAGE,KAAK3B,EAASE,MAC7B,MAAgB,MAATwB,EACLF,EAAOI,KAAKF,EAAM,IAClBA,EAAQD,EAAGE,KAAK3B,EAASE,MAG3BD,KAAKrB,UAAY,KACjBqB,KAAKtB,oBAAsB6C,CAG7B,CAFE,MAAOrB,GACP0B,QAAQC,IAAI3B,EACd,CAEJ,EAEAP,mBAAmBiB,EAAOC,EAAMV,EAAMW,GACpCc,QAAQC,IAAIjB,EAAOC,EAAMV,EAAMW,GAC/B,IACE,IAAIC,EAAS,CACXC,QAAS,CACPC,OAAQ,MACR,eAAgB,wBAGhBC,EAAS,WACTC,EAAAA,EAAAA,GAAW,YACbD,EAAS,UAGX,IAAIE,EAAe,IAAIC,SAUvB,OATAD,EAAaE,OAAO,SAAUV,GAC9BQ,EAAaE,OAAO,UAAWT,GAC/BO,EAAaE,OAAO,OAAQnB,GAC5BiB,EAAaE,OAAO,OAAQR,GAC5BM,EAAaE,OAAO,cAAeJ,SAE7BrB,IAAAA,KAAY,gCAAgCuB,EAAcL,GAAQjB,MAAMC,IAC5EC,KAAKpB,YAAcmB,EAASE,KAAK6B,MAAM,+BAA+B,EAAE,KAEnE,CAGT,CAFE,MAAO5B,GACP,OAAO,CACT,CACF,EAEAP,sBACEK,KAAKzB,WAAa,GAClByB,KAAKxB,iBAAmB,GACxBwB,KAAKvB,UAAY,KACjBuB,KAAKtB,oBAAsB,GAC3BsB,KAAKrB,UAAY,IACnB,I,+OCxLFoD,EAAAA,EAAAA,IAkBWC,EAAAA,KAAAA,C,kBAjBT,IAAsB,EAAtBC,EAAAA,EAAAA,IAAsBC,EAAAA,CAAhBC,MAAM,WACZF,EAAAA,EAAAA,IAeSG,EAAAA,CAfDC,WAAW,IAAIC,UAAU,IAAIH,MAAM,a,CACxB,gBAAY,SAC3B,IAAoD,EAApDF,EAAAA,EAAAA,IAAoDM,EAAAA,CAA1CC,MAAM,SAAO,C,kBAAC,IAAiB,UAAjB,wB,OACxBC,EAAAA,EAAAA,GAUM,aATJR,EAAAA,EAAAA,IAEWS,EAAAA,CAFD,cAAY,eAAgBC,QAAK,eAAEC,EAAAA,kBAAkB,CAADhD,UAAAA,KAAAiD,KAAAA,uB,mBAC5D,IAAuD,EAAvDZ,EAAAA,EAAAA,IAAuDM,EAAAA,CAA7CC,MAAM,aAAW,C,kBAAC,IAAgB,UAAhB,uB,gBAE9BP,EAAAA,EAAAA,IAEWS,EAAAA,CAFD,cAAY,eAAgBC,QAAK,eAAEC,EAAAA,kBAAkB,CAADhD,UAAAA,KAAAiD,KAAAA,sD,mBAC5D,IAAsF,EAAtFZ,EAAAA,EAAAA,IAAsFM,EAAAA,CAA5EC,MAAM,aAAW,C,kBAAC,IAA+C,UAA/C,sD,gBAE9BP,EAAAA,EAAAA,IAEWS,EAAAA,CAFD,cAAY,eAAgBC,QAAK,eAAEC,EAAAA,kBAAkB,CAADhD,UAAAA,KAAAiD,KAAAA,6B,mBAC5D,IAA8D,EAA9DZ,EAAAA,EAAAA,IAA8DM,EAAAA,CAApDC,MAAM,aAAW,C,kBAAC,IAAuB,UAAvB,8B,uFAgBxC,GAAeM,EAAAA,EAAAA,IAAgB,CAC7BD,KAAM,mBACNE,WAAY,CACVC,QAAO,KACPC,OAAM,IACNC,QAAO,KACPC,KAAI,IACJC,QAAOA,EAAAA,IAETC,QACE,MAAMC,GAASC,EAAAA,EAAAA,OACT,SAAmCC,IAAarF,EAAAA,EAAAA,KACtD,MAAO,CAAEmF,SAAQE,WACnB,EACAC,QAAS,CACPC,kBAAkB7C,GAGhBb,KAAKwD,SAAS3C,EAAKjB,WAEnBI,KAAK2D,OAAOrF,MAAMsF,MAAMC,SAASxE,YAAcwB,CACjD,K,UC5CJ,MAAMiD,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://stng/./src/stores/preEntry.js","webpack://stng/./src/views/RecordSelect.vue","webpack://stng/./src/views/RecordSelect.vue?e9ba"],"sourcesContent":["import { defineStore } from \"pinia\";\r\nimport axios from \"axios\";\r\nimport { isPlatform } from \"@ionic/vue\";\r\nimport { Storage } from '@ionic/storage'\r\n\r\nlet apiUrlStng2 = 'https://fhd.aostng.ru/vesta/hs/API_STNG/V2/'\r\n\r\n\r\nexport const usePreEntryStore = defineStore({\r\n  id: \"preEntry\",\r\n  state: () => ({\r\n    entryPhone: \"\",\r\n    entryServiceType: \"\",\r\n    entryDate: null,\r\n    entryAvailableTimes: [],\r\n    entryTime: null,\r\n    entryNumber: null,\r\n\r\n\r\n    availableDates: null,\r\n    availableDatesError: null,\r\n    availableTimeSlots: null,\r\n    availableTimeSlotsError: null,\r\n    postReserveResponse: null,\r\n    postReserveError: null,\r\n    deleteReserveError: null,\r\n    deleteReserveResponse: null,\r\n    reserveData: null,\r\n    getReserveResponse: null,\r\n    getReserveError: null,\r\n\r\n  }),\r\n  getters: {\r\n    getEntryInfo: (state) => {\r\n      return {\r\n        entryPhone: state.entryPhone,\r\n        entryServiceType: state.entryServiceType,\r\n        entryDate: state.entryDate,\r\n        entryAvailableTimes: state.entryAvailableTimes,\r\n        entryTime: state.entryTime,\r\n      };\r\n    },\r\n  },\r\n  actions: {\r\n    async getDates(operation) {\r\n      try {\r\n        await axios\r\n          .get(`${apiUrlStng2}/elGetDatas?operation=${operation}`)\r\n          .then((response) => (this.availableDates = response.data));\r\n      } catch (error) {\r\n        this.availableDatesError = error;\r\n      }\r\n    },\r\n    async getTimeSlots(operation, date) {\r\n      try {\r\n        await axios\r\n          .get(`${apiUrlStng2}/elGetTimes?operation=${operation}&date=${date}`)\r\n          .then((response) => (this.availableTimeSlots = response.data));\r\n      } catch (error) {\r\n        this.availableTimeSlotsError = error;\r\n      }\r\n    },\r\n    async postReserve(data) {\r\n      try {\r\n        await axios\r\n          .post(`${apiUrlStng2}/elReserve`, data)\r\n          .then((response) => (this.postReserveResponse = response.data));\r\n      } catch (error) {\r\n        this.postReserveError = error;\r\n      }\r\n    },\r\n    async deleteReserve(id) {\r\n      try {\r\n        await axios\r\n          .get(`${apiUrlStng2}/elDelete?id=${id}`)\r\n          .then((response) => (this.deleteReserveResponse = response.data));\r\n      } catch (error) {\r\n        this.deleteReserveError = error;\r\n      }\r\n    },\r\n    async getReserve() {\r\n      const store = new Storage()\r\n      await store.create()\r\n      const token = await store.get('token')\r\n      const parsedToken = JSON.parse(token)\r\n      try {\r\n        await axios\r\n          .get(`${apiUrlStng2}/elQueye?token=${parsedToken?.token}`)\r\n          .then((response) => (this.getReserveResponse = response.data));\r\n      } catch (error) {\r\n        this.getReserveError = error;\r\n      }\r\n    },\r\n\r\n    async setPhone(phone) {\r\n      this.entryPhone = phone;\r\n    },\r\n    async setServiceType(type) {\r\n      this.entryServiceType = type;\r\n    },\r\n    async setDate(date) {\r\n      this.entryDate = date;\r\n    },\r\n    async setTime(time) {\r\n      this.entryTime = time;\r\n    },\r\n    async fetchTime() {\r\n      if (this.entryDate && this.entryServiceType != \"\") {\r\n        try {\r\n          let config = {\r\n            headers: {\r\n              Accept: \"*/*\",\r\n              \"Content-Type\": \"multipart/form-data\",\r\n            },\r\n          };\r\n\r\n          let device = \"android\";\r\n          if (isPlatform(\"iphone\")) {\r\n            device = \"iphone\";\r\n          }\r\n\r\n          var bodyFormData = new FormData();\r\n          bodyFormData.append(\"date\", this.entryDate);\r\n          bodyFormData.append(\"service\", this.entryServiceType);\r\n          bodyFormData.append(\"ionicDevice\", device);\r\n\r\n          const response = await axios.post(\r\n            `https://aostng.ru/ajax/preregajax.php`,\r\n            bodyFormData,\r\n            config\r\n          );\r\n\r\n          let values = [];\r\n          // Get values between <option value=\"##:##:##\"> and </option>\r\n          const re = />([^<.]+)<\\//g;\r\n          let match = re.exec(response.data);\r\n          while (match != null) {\r\n            values.push(match[1]);\r\n            match = re.exec(response.data);\r\n          }\r\n\r\n          this.entryTime = null;\r\n          this.entryAvailableTimes = values;\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      }\r\n    },\r\n\r\n    async sendFullInfo(phone, type, date, time) {\r\n      console.log(phone, type, date, time);\r\n      try {\r\n        let config = {\r\n          headers: {\r\n            Accept: \"*/*\",\r\n            \"Content-Type\": \"multipart/form-data\",\r\n          },\r\n        };\r\n        let device = \"android\";\r\n        if (isPlatform(\"iphone\")) {\r\n          device = \"iphone\";\r\n        }\r\n\r\n        var bodyFormData = new FormData();\r\n        bodyFormData.append(\"number\", phone);\r\n        bodyFormData.append(\"service\", type);\r\n        bodyFormData.append(\"date\", date);\r\n        bodyFormData.append(\"time\", time);\r\n        bodyFormData.append(\"ionicDevice\", device);\r\n\r\n        await axios.post(`https://aostng.ru/prereg2.php`, bodyFormData, config).then((response) => {\r\n          this.entryNumber = response.data.split('Номер вашей брони - </span>')[1]\r\n        })\r\n        return true;\r\n      } catch (error) {\r\n        return false;\r\n      }\r\n    },\r\n\r\n    async resetPreEntry() {\r\n      this.entryPhone = \"\";\r\n      this.entryServiceType = \"\";\r\n      this.entryDate = null;\r\n      this.entryAvailableTimes = [];\r\n      this.entryTime = null;\r\n    },\r\n  },\r\n});\r\n","<template>\r\n  <ion-page>\r\n    <Back title=\"Назад\" />\r\n    <Layout outlineBtn=\".\" filledBtn=\".\" title=\"Вид услуг\">\r\n      <template v-slot:main-content>\r\n        <ion-text class=\"title\">Выберите варианты</ion-text>\r\n        <div>\r\n          <ion-item router-link=\"/tabs/record\" @click=\"selectServiceType({operation: '12', name: 'Прием документов'})\">\r\n            <ion-text class=\"sub-title\">Прием документов</ion-text>\r\n          </ion-item>\r\n          <ion-item router-link=\"/tabs/record\" @click=\"selectServiceType({operation: '14', name: 'Заключение договора на поставку газа (квартира)'})\">\r\n            <ion-text class=\"sub-title\">Заключение договора на поставку газа (квартира)</ion-text>\r\n          </ion-item>\r\n          <ion-item router-link=\"/tabs/record\" @click=\"selectServiceType({operation: '16', name: 'Социальная газификация'})\">\r\n            <ion-text class=\"sub-title\">Социальная газификация </ion-text>\r\n          </ion-item>\r\n        </div>\r\n      </template>\r\n    </Layout>\r\n  </ion-page>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport Layout from \"../components/Layout.vue\";\r\nimport { IonPage, IonText, IonItem } from \"@ionic/vue\";\r\nimport Back from \"../components/Back.vue\";\r\nimport { usePreEntryStore } from \"../stores/preEntry\";\r\n\r\nexport default defineComponent({\r\n  name: \"recordSelectPage\",\r\n  components: {\r\n    IonPage,\r\n    Layout,\r\n    IonItem,\r\n    Back,\r\n    IonText,\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n    const { /* setServiceType, fetchTime, */ getDates } = usePreEntryStore();\r\n    return { router, getDates };\r\n  },\r\n  methods: {\r\n    selectServiceType(type) {\r\n      // this.setServiceType(type);\r\n      // this.fetchTime();\r\n      this.getDates(type.operation)\r\n      \r\n      this.$pinia.state.value.preEntry.reserveData = type\r\n    },\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped>\r\nion-item {\r\n  --padding-start: 0;\r\n  --inner-padding-bottom: 10px;\r\n  --inner-padding-end: 0;\r\n  --inner-padding-top: 20px;\r\n}\r\n</style>\r\n","import { render } from \"./RecordSelect.vue?vue&type=template&id=725e91d8&scoped=true\"\nimport script from \"./RecordSelect.vue?vue&type=script&lang=js\"\nexport * from \"./RecordSelect.vue?vue&type=script&lang=js\"\n\nimport \"./RecordSelect.vue?vue&type=style&index=0&id=725e91d8&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\aia\\\\Desktop\\\\STNG-MOBILE\\\\mobile-project-ionic\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-725e91d8\"]])\n\nexport default __exports__"],"names":["apiUrlStng2","usePreEntryStore","defineStore","id","state","entryPhone","entryServiceType","entryDate","entryAvailableTimes","entryTime","entryNumber","availableDates","availableDatesError","availableTimeSlots","availableTimeSlotsError","postReserveResponse","postReserveError","deleteReserveError","deleteReserveResponse","reserveData","getReserveResponse","getReserveError","getters","getEntryInfo","actions","async","operation","axios","then","response","this","data","error","date","store","Storage","create","token","get","parsedToken","JSON","parse","phone","type","time","config","headers","Accept","device","isPlatform","bodyFormData","FormData","append","values","re","match","exec","push","console","log","split","_createBlock","_component_ion_page","_createVNode","_component_Back","title","_component_Layout","outlineBtn","filledBtn","_component_ion_text","class","_createElementVNode","_component_ion_item","onClick","_ctx","name","defineComponent","components","IonPage","Layout","IonItem","Back","IonText","setup","router","useRouter","getDates","methods","selectServiceType","$pinia","value","preEntry","__exports__","render"],"sourceRoot":""}