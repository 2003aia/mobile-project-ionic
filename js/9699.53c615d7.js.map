{"version":3,"file":"js/9699.53c615d7.js","mappings":"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","sources":["webpack://test/./src/stores/profile.js","webpack://test/./src/views/ProfileEdit.vue","webpack://test/./src/views/ProfileEdit.vue?31db"],"sourcesContent":["import { defineStore } from 'pinia'\r\nimport axios from 'axios'\r\n\r\n\r\nexport const useProfileStore = defineStore({\r\n    id: 'profile',\r\n    state: () => ({\r\n        profileResponse: null,\r\n        profileError: null,\r\n        editProfileError: null,\r\n        editProfileResponse: null,\r\n    }),\r\n    getters: {\r\n        getPostsPerAuthor: (state) => {\r\n            return (authorId) => state.posts.filter((post) => post.userId === authorId)\r\n        }\r\n    },\r\n    actions: {\r\n        async getProfile(token) {\r\n            try {\r\n                this.profileResponse = await axios.post(`https://api.aostng.ru/api/v2/user/profile/get/`, { token: token })\r\n                    .then((response) => response.data)\r\n            } catch (error) {\r\n                this.profileError = error\r\n            }\r\n        },\r\n        async editProfile(token, firstName, lastName, email) {\r\n            try {\r\n                this.editProfileResponse = await axios.post(`https://api.aostng.ru/api/v2/user/profile/set/`, {\r\n                    token: token,\r\n                    firstName: firstName,\r\n                    lastName: lastName,\r\n                    email: email\r\n\r\n                })\r\n                    .then((response) => response.data).catch((e) => {\r\n                        this.editProfileError = e\r\n                    })\r\n            } catch (error) {\r\n                this.editProfileError = error\r\n            }\r\n        }\r\n    }\r\n})","<template>\r\n  <ion-page>\r\n    <Back />\r\n    <Layout\r\n      height=\"false\"\r\n      :method=\"editProfileHandler\"\r\n      :method2=\"\r\n        () => {\r\n          router.push('/profileSend');\r\n        }\r\n      \"\r\n      :filledBtn=\"'Сохранить'\"\r\n      title=\"Личный кабинет\"\r\n      :outlineBtn=\"'Изменить пароль'\"\r\n    >\r\n      <template v-slot:main-content>\r\n        <ion-text>\r\n          <p class=\"title ion-text-start\">Мои данные</p>\r\n        </ion-text>\r\n        <ion-list>\r\n          <ion-text><p class=\"sub-title\">Имя</p> </ion-text>\r\n          <Input\r\n            @updated=\"(item) => (name = item)\"\r\n            :changeHandler=\"nameChange\"\r\n            :value=\"name\"\r\n            name=\"Укажите имя\"\r\n          />\r\n          <ion-text><p class=\"sub-title\">Фамилия</p> </ion-text>\r\n          <Input\r\n            name=\"Укажите фамилию\"\r\n            :value=\"surname\"\r\n            :changeHandler=\"surnameChange\"\r\n          />\r\n          <ion-text><p class=\"sub-title\">Отчество</p> </ion-text>\r\n          <Input name=\"Укажите отчество\" />\r\n\r\n          <!-- <ion-item> -->\r\n          <ion-text>\r\n            <p class=\"sub-title\">{{ data.email }}</p>\r\n            <!--  <p>Электронная почта</p> -->\r\n          </ion-text>\r\n          <Input\r\n            name=\"Электронная почта\"\r\n            :value=\"email\"\r\n            :changeHandler=\"emailChange\"\r\n          />\r\n          <!--  </ion-item> -->\r\n          <ion-item>\r\n            <ion-text>\r\n              <p class=\"sub-title\">{{ login }}</p>\r\n              <p>Контактный телефон</p>\r\n            </ion-text>\r\n          </ion-item>\r\n        </ion-list>\r\n        <ion-text v-if=\"profileError?.response?.data?.error\" class=\"error\">\r\n          {{ profileError?.response?.data?.error }}\r\n        </ion-text>\r\n      </template>\r\n    </Layout>\r\n  </ion-page>\r\n</template>\r\n\r\n\r\n<script>\r\nimport { defineComponent, ref } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport Layout from \"../components/Layout.vue\";\r\nimport {\r\n  onIonViewDidEnter,\r\n  IonPage,\r\n  IonText,\r\n  IonItem,\r\n  IonList,\r\n} from \"@ionic/vue\";\r\nimport Input from \"../components/Input.vue\";\r\nimport Back from \"../components/Back.vue\";\r\nimport { storeToRefs } from \"pinia\";\r\nimport { useProfileStore } from \"../stores/profile\";\r\nimport { Storage } from \"@ionic/storage\";\r\n\r\nexport default defineComponent({\r\n  name: \"profleEditPage\",\r\n  data() {\r\n    return {\r\n      codeSent: false,\r\n      edit: false,\r\n      data: {\r\n        name: \"Иван\",\r\n        surname: \"Иванов\",\r\n        secondname: \"Иванович\",\r\n\r\n        email: \"Pochta@mail.ru\",\r\n        phone: \"+7(996)-915-88-31\",\r\n      },\r\n    };\r\n  },\r\n  components: {\r\n    Input,\r\n    Back,\r\n    IonPage,\r\n    IonList,\r\n    Layout,\r\n    IonItem,\r\n    IonText,\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n    const { profileResponse, profileError } = storeToRefs(useProfileStore());\r\n    const { editProfile } = useProfileStore();\r\n    let name = ref(\"\");\r\n    const surname = ref(\"\");\r\n    const email = ref(\"\");\r\n    const login = ref(\"\")\r\n    let profileData = null;\r\n    let token = \"\";\r\n\r\n    const storageHandler = async () => {\r\n      const store = new Storage();\r\n      await store.create();\r\n      profileData = await store.get(\"profileData\");\r\n      token = await store.get(\"token\");\r\n      let profileDataParsed = JSON.parse(profileData);\r\n      name.value = profileDataParsed?.firstName;\r\n      surname.value = profileDataParsed?.lastName;\r\n      email.value = profileDataParsed?.email;\r\n      login.value = profileDataParsed?.login\r\n    };\r\n\r\n    const editProfileHandler = async () => {\r\n      editProfile(\r\n        JSON.parse(token)?.token,\r\n        name.value,\r\n        surname.value,\r\n        email.value\r\n      );\r\n    };\r\n\r\n    const nameChange = (e) => {\r\n      name.value = e.target.value;\r\n    };\r\n    const surnameChange = (e) => {\r\n      surname.value = e.target.value;\r\n    };\r\n    const emailChange = (e) => {\r\n      email.value = e.target.value;\r\n    };\r\n\r\n    onIonViewDidEnter(() => {\r\n      storageHandler();\r\n    });\r\n    return {\r\n      profileResponse,\r\n      profileError,\r\n      router,\r\n      editProfileHandler,\r\n      nameChange,\r\n      surnameChange,\r\n      emailChange,\r\n      surname,\r\n      name,\r\n      email,\r\n      login,\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped>\r\nion-item {\r\n  --padding-start: 0;\r\n  --padding-bottom: 0px;\r\n  --inner-padding-bottom: 0px;\r\n}\r\n</style>","import { render } from \"./ProfileEdit.vue?vue&type=template&id=78d176fc&scoped=true\"\nimport script from \"./ProfileEdit.vue?vue&type=script&lang=js\"\nexport * from \"./ProfileEdit.vue?vue&type=script&lang=js\"\n\nimport \"./ProfileEdit.vue?vue&type=style&index=0&id=78d176fc&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\123\\\\Desktop\\\\projects\\\\app-STNG\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-78d176fc\"]])\n\nexport default __exports__"],"names":["useProfileStore","defineStore","id","state","profileResponse","profileError","editProfileError","editProfileResponse","getters","getPostsPerAuthor","authorId","posts","filter","post","userId","actions","async","token","this","axios","then","response","data","error","firstName","lastName","email","catch","e","_createElementVNode","class","_createBlock","_component_ion_page","_createVNode","_component_Back","_component_Layout","height","method","_ctx","method2","push","filledBtn","title","outlineBtn","_withCtx","_component_ion_text","_hoisted_1","_component_ion_list","_hoisted_2","_component_Input","onUpdated","item","changeHandler","value","name","_hoisted_3","_hoisted_4","_toDisplayString","_component_ion_item","_hoisted_7","defineComponent","codeSent","edit","surname","secondname","phone","components","Input","Back","IonPage","IonList","Layout","IonItem","IonText","setup","router","useRouter","storeToRefs","editProfile","ref","login","profileData","storageHandler","store","Storage","create","get","profileDataParsed","JSON","parse","editProfileHandler","nameChange","target","surnameChange","emailChange","onIonViewDidEnter","__exports__","render"],"sourceRoot":""}