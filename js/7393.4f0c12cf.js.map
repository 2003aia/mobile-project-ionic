{"version":3,"file":"js/7393.4f0c12cf.js","mappings":"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","sources":["webpack://test/./src/views/ProfileEdit.vue","webpack://test/./src/views/ProfileEdit.vue?31db"],"sourcesContent":["<template>\r\n  <ion-page>\r\n    <Back :btnSrc=\"()=>router.push('profile')\"/>\r\n    <Layout\r\n      height=\"false\"\r\n      :method=\"editProfileHandler\"\r\n      :method2=\"\r\n        () => {\r\n          router.push('/newPassPage');\r\n        }\r\n      \"\r\n      :loading=\"loading\"\r\n      :filledBtn=\"'Сохранить'\"\r\n      title=\"Личный кабинет\"\r\n      :outlineBtn=\"'Изменить пароль'\"\r\n    >\r\n      <template v-slot:main-content>\r\n        <ion-text>\r\n          <p class=\"title ion-text-start\">Мои данные</p>\r\n        </ion-text>\r\n        <div>\r\n          <ion-text><p class=\"sub-title\">Имя</p> </ion-text>\r\n          <Input\r\n            @updated=\"(item) => (name = item)\"\r\n            :changeHandler=\"nameChange\"\r\n            :value=\"name\"\r\n            name=\"Укажите имя\"\r\n          />\r\n          \r\n          <ion-text>\r\n            <p class=\"sub-title\">{{ data.email }}</p>\r\n          </ion-text>\r\n          <Input\r\n            name=\"Электронная почта\"\r\n            :value=\"email\"\r\n            :changeHandler=\"emailChange\"\r\n          />\r\n          <ion-item>\r\n            <ion-text>\r\n              <p class=\"sub-title\">{{ login }}</p>\r\n              <p>Контактный телефон</p>\r\n            </ion-text>\r\n          </ion-item>\r\n        </div>\r\n        <ion-text v-if=\"profileError?.response?.data?.error\" class=\"error\">\r\n          {{ profileError?.response?.data?.error }}\r\n        </ion-text>\r\n      </template>\r\n    </Layout>\r\n  </ion-page>\r\n</template>\r\n\r\n\r\n<script>\r\nimport { defineComponent, ref } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport Layout from \"../components/Layout.vue\";\r\nimport {\r\n  onIonViewDidEnter,\r\n  IonPage,\r\n  IonText,\r\n  IonItem,\r\n} from \"@ionic/vue\";\r\nimport Input from \"../components/Input.vue\";\r\nimport Back from \"../components/Back.vue\";\r\nimport { storeToRefs } from \"pinia\";\r\nimport { useProfileStore } from \"../stores/profile\";\r\nimport { Storage } from \"@ionic/storage\";\r\n\r\nexport default defineComponent({\r\n  name: \"profleEditPage\",\r\n  data() {\r\n    return {\r\n      codeSent: false,\r\n      edit: false,\r\n      data: {\r\n        name: \"Иван\",\r\n        surname: \"Иванов\",\r\n        secondname: \"Иванович\",\r\n\r\n        email: \"Pochta@mail.ru\",\r\n        phone: \"+7(996)-915-88-31\",\r\n      },\r\n    };\r\n  },\r\n  components: {\r\n    Input,\r\n    Back,\r\n    IonPage,\r\n    Layout,\r\n    IonItem,\r\n    IonText,\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n    const { profileResponse, profileError } = storeToRefs(useProfileStore());\r\n    const { editProfile } = useProfileStore();\r\n    let name = ref(\"\");\r\n    const surname = ref(\"\");\r\n    const email = ref(\"\");\r\n    const login = ref(\"\");\r\n    let profileData = null;\r\n    let profileDataParsed = null;\r\n    let loading = ref(false)\r\n    const storageHandler = async () => {\r\n      const store = new Storage();\r\n      await store.create();\r\n      profileData = await store.get(\"token\");\r\n      profileDataParsed = JSON.parse(profileData);\r\n      name.value = profileDataParsed?.name;\r\n      /* surname.value = profileDataParsed?.lastName; */\r\n      email.value = profileDataParsed?.email;\r\n      login.value = profileDataParsed?.phone;\r\n    };\r\n\r\n    const editProfileHandler = async () => {\r\n      loading.value = true\r\n      editProfile(JSON.parse(profileData)?.token, name.value, email.value).then(\r\n        async () => {\r\n          loading.value = false\r\n          const store = new Storage();\r\n          await store.create();\r\n          const data = {\r\n            ...profileDataParsed,\r\n            name: name.value,\r\n            email: email.value,\r\n          };\r\n          await store.set(\"token\", JSON.stringify(data))\r\n        }\r\n      );\r\n    };\r\n\r\n    const nameChange = (e) => {\r\n      name.value = e.target.value;\r\n    };\r\n    const surnameChange = (e) => {\r\n      surname.value = e.target.value;\r\n    };\r\n    const emailChange = (e) => {\r\n      email.value = e.target.value;\r\n    };\r\n\r\n    onIonViewDidEnter(() => {\r\n      storageHandler();\r\n    });\r\n    return {\r\n      loading,\r\n      profileResponse,\r\n      profileError,\r\n      router,\r\n      editProfileHandler,\r\n      nameChange,\r\n      surnameChange,\r\n      emailChange,\r\n      surname,\r\n      name,\r\n      email,\r\n      login,\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped>\r\nion-item {\r\n  --padding-start: 0;\r\n  --padding-bottom: 0px;\r\n  --inner-padding-bottom: 0px;\r\n}\r\n</style>","import { render } from \"./ProfileEdit.vue?vue&type=template&id=b32cdb0c&scoped=true\"\nimport script from \"./ProfileEdit.vue?vue&type=script&lang=js\"\nexport * from \"./ProfileEdit.vue?vue&type=script&lang=js\"\n\nimport \"./ProfileEdit.vue?vue&type=style&index=0&id=b32cdb0c&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\aia\\\\Desktop\\\\STNG-MOBILE\\\\mobile-project-ionic\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b32cdb0c\"]])\n\nexport default __exports__"],"names":["_createElementVNode","class","_createBlock","_component_ion_page","_createVNode","_component_Back","btnSrc","_ctx","push","_component_Layout","height","method","method2","loading","filledBtn","title","outlineBtn","_withCtx","_component_ion_text","_hoisted_1","_hoisted_2","_component_Input","onUpdated","item","changeHandler","value","name","_toDisplayString","email","_component_ion_item","_hoisted_5","response","data","error","defineComponent","codeSent","edit","surname","secondname","phone","components","Input","Back","IonPage","Layout","IonItem","IonText","setup","router","useRouter","profileResponse","profileError","storeToRefs","useProfileStore","editProfile","ref","login","profileData","profileDataParsed","storageHandler","async","store","Storage","create","get","JSON","parse","editProfileHandler","token","then","set","stringify","nameChange","e","target","surnameChange","emailChange","onIonViewDidEnter","__exports__","render"],"sourceRoot":""}