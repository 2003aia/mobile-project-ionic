"use strict";(self["webpackChunkstng"]=self["webpackChunkstng"]||[]).push([[8146],{6306:function(e,t,a){a.d(t,{X:function(){return u}});a(7658);var s=a(6086),r=a(9669),l=a.n(r),n=a(3978);const i="https://api.aostng.ru/api/v2";let o="https://fhd.aostng.ru/vesta/hs/API_STNG/V2/";const u=(0,s.Q_)({id:"services",state:()=>({formResponse:null,formResponseError:null,callInspectorResponse:null,callInspectorError:null,servicesResponse:null,servicesResponseError:null,form:{},select:{GAS_SLUCHI:null,GAS_HARAKTER:null,GAS_VID_USLUG:null},servicesOneNext:!1,techAllianceConnection:!1,addressResponse:null,addressError:null,filesResponse:[],filesResponseError:null,listServicesResponse:null,listServicesResponseError:null,camerasResponse:null,camerasError:null,requestsInfo:null}),getters:{setForm:e=>t=>[...e.form,...t]},actions:{async getCameras(){try{await l().get(`${i}/camera/get`).then((e=>this.camerasResponse=e.data))}catch(e){this.camerasError=e}},async getListServices(){const e=new n.K;await e.create();const t=await e.get("token"),a=JSON.parse(t).token;try{await l().post(`${o}ListServices`,{token:a}).then((e=>this.listServicesResponse=e.data))}catch(s){this.listServicesResponseError=s}},async getForms(){try{await l().get("https://aostng.ru/api/?action=getAll&format=json&page=3&limit=20").then((e=>this.formResponse=e.data))}catch(e){this.formResponseError=e}},async uploadFiles(e){const t=new n.K;await t.create();const a=await t.get("token"),s=JSON.parse(a).token;try{let t=e.filter((e=>{if(!1!==e.file)return e}));for(let e=0;e<t.length;e++){const a=t[e];await l().post(`${o}get_file`,{token:s,title:a.title,file:a.file}).then((e=>this.filesResponse.push({...e.data,field:a.field,text:a.text})))}}catch(r){this.filesResponseError=r}},async services(e){const t=new n.K;await t.create();const a=await t.get("token"),s=JSON.parse(a).token;try{await l().post(`${o}Services`,{token:s,data:{status:[{CODE:"120",VALUE:"Принят"},{CODE:"23",VALUE:"В обработке"},{CODE:"26",VALUE:"Выполнено"},{CODE:"24",VALUE:"Требуется документ"},{CODE:"25",VALUE:"Требует оплаты"},{CODE:"22",VALUE:"Отклонен"}],forms:e}}).then((e=>this.servicesResponse=e.data))}catch(r){this.servicesResponseError=r}},async callInspector(e,t){try{const a=new n.K;await a.create();const s=await a.get("token"),r=JSON.parse(s).token;await l().post(`${o}CallInspector`,{token:r,LC:e,phone:t}).then((e=>this.callInspectorResponse=e.data))}catch(a){this.callInspectorError=a}},async addressQuery(e,t){try{await l()({method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token f135ebe81ca212b9d61fedadba1e0111159f0d6b"},url:"https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/address",data:"USER_REGION"===t||"GAS_ADDRESS"===t?JSON.stringify({query:e,locations_boost:[{kladr_id:"4100000100000"}],count:5}):JSON.stringify({query:e,count:5,restrict_value:!1,locations:[{city:"Якутск"},{country:"Узбекистан"},{country:"Таджикистан"},{country:"Киргизия"},{country:"Армения"}]})}).then((e=>this.addressResponse=e.data))}catch(a){this.addressError=a}}}})},7717:function(e,t,a){a.d(t,{Z:function(){return u}});var s=a(6252),r=a(3577);function l(e,t,a,l,n,i){return(0,s.wg)(),(0,s.iD)("div",{class:(0,r.C_)({main:!0,padding:e.padding,bgBlue:e.bgBlue}),onClick:t[0]||(t[0]=(...t)=>e.onClick&&e.onClick(...t))},[(0,s.WI)(e.$slots,"content",{},void 0,!0)],2)}var n=(0,s.aZ)({setup(){},name:"layoutBox",components:{},props:{padding:Boolean,btnSrc:String,filledButton:String,title:String,height:String,onClick:Function,bgBlue:Boolean}}),i=a(3744);const o=(0,i.Z)(n,[["render",l],["__scopeId","data-v-7ef2f989"]]);var u=o},8146:function(e,t,a){a.r(t),a.d(t,{default:function(){return q}});var s=a(6252),r=a(3577),l=a(9963);const n=e=>((0,s.dD)("data-v-ffeee53a"),e=e(),(0,s.Cn)(),e),i=n((()=>(0,s._)("p",{class:"text-20-600"},"Общие сведения заявления",-1))),o=n((()=>(0,s._)("p",{class:"title ion-text-start"},"Данные заявителя",-1))),u={slot:"content"},d=n((()=>(0,s._)("p",{class:"error"},"Заполните поле",-1))),c=n((()=>(0,s._)("p",{class:"title ion-text-start"},"Данные паспорта",-1))),m={slot:"content"},f=n((()=>(0,s._)("p",{class:"error"},"Заполните поле",-1))),p=n((()=>(0,s._)("p",{class:"title ion-text-start"},"Данные об объекте газификации",-1))),h={class:"sub-title"},v={slot:"content"},_=n((()=>(0,s._)("p",{class:"error"},"Заполните поле",-1))),E={class:"sub-title"},g=n((()=>(0,s._)("p",{class:"error"},"Заполните поле",-1)));function w(e,t,a,n,w,S){const y=(0,s.up)("Back"),R=(0,s.up)("ion-text"),k=(0,s.up)("Input"),A=(0,s.up)("ion-item"),U=(0,s.up)("ion-accordion"),D=(0,s.up)("ion-accordion-group"),$=(0,s.up)("LayoutBox"),L=(0,s.up)("Layout"),C=(0,s.up)("ion-page");return(0,s.wg)(),(0,s.j4)(C,null,{default:(0,s.w5)((()=>[(0,s.Wm)(y),(0,s.Wm)(L,{height:"false",method:e.storageHandler,filledBtn:"Далее",outlineBtn:".",title:"Заявка на социальную газификацию"},{"header-content":(0,s.w5)((()=>[(0,s.Wm)(R,null,{default:(0,s.w5)((()=>[i])),_:1})])),"main-content":(0,s.w5)((()=>[(0,s.Wm)(R,null,{default:(0,s.w5)((()=>[o,(0,s._)("p",null,[(0,s.Wm)(R,{class:"dot"},{default:(0,s.w5)((()=>[(0,s.Uk)("*")])),_:1}),(0,s.Uk)(" - обязательное поле для заполнения. ")])])),_:1}),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.formUser,((t,a)=>((0,s.wg)(),(0,s.iD)("div",{key:t},[(0,s.Wm)(D,{ref_for:!0,ref:"addressQuery"},{default:(0,s.w5)((()=>[(0,s.Wm)(U,{value:"first","toggle-icon":e.caretDownSharp},{default:(0,s.w5)((()=>[(0,s.Wm)(k,{mask:t.mask,slot:"header",value:t.value,name:t.name,required:t.required,onInput:a=>{t.value=a.target.value,e.addressQueryHandler(a,t.field)}},null,8,["mask","value","name","required","onInput"]),(0,s.wy)((0,s._)("div",u,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.addressList,(n=>(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:n},[(0,s.Wm)(A,{button:"",onClick:()=>{this.$refs.addressQuery[a].$el.value=void 0,t.value=n.value},lines:e.addressList[e.addressList.length-1]?.value===n.value?"none":"full"},{default:(0,s.w5)((()=>[(0,s.Wm)(R,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(n.value),1)])),_:2},1024)])),_:2},1032,["onClick","lines"])])),[[l.F8,"USER_BIRTHPLACE"===t.field||t.value]]))),128)),(0,s.wy)((0,s.Wm)(A,{lines:"none"},{default:(0,s.w5)((()=>[(0,s.Wm)(R,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Не найдено")])),_:1})])),_:1},512),[[l.F8,0===e.addressList?.length]])],512),[[l.F8,"USER_BIRTHPLACE"===t.field||"USER_ADDRESS"===t.field&&t.value]])])),_:2},1032,["toggle-icon"])])),_:2},1536),(0,s.wy)((0,s.Wm)(R,null,{default:(0,s.w5)((()=>[d])),_:2},1536),[[l.F8,0===t.value.length&&t.error]])])))),128))])),content:(0,s.w5)((()=>[(0,s.Wm)($,null,{content:(0,s.w5)((()=>[(0,s.Wm)(R,null,{default:(0,s.w5)((()=>[c,(0,s._)("p",null,[(0,s.Wm)(R,{class:"dot"},{default:(0,s.w5)((()=>[(0,s.Uk)("*")])),_:1}),(0,s.Uk)(" - обязательное поле для заполнения. ")])])),_:1}),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.formPass,((t,a)=>((0,s.wg)(),(0,s.iD)("div",{key:t},[(0,s.Wm)(D,{ref_for:!0,ref:"addressQuery2"},{default:(0,s.w5)((()=>[(0,s.Wm)(U,{value:"first"},{default:(0,s.w5)((()=>[(0,s.Wm)(k,{mask:t.mask,slot:"header",value:t.value,name:t.name,required:t.required,onInput:a=>{t.value=a.target.value,e.addressQueryHandler(a,t.field)}},null,8,["mask","value","name","required","onInput"]),(0,s.wy)((0,s._)("div",m,[(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.addressList,(l=>((0,s.wg)(),(0,s.iD)("div",{key:l},[(0,s.Wm)(A,{button:"",onClick:()=>{this.$refs.addressQuery2[a].$el.value=void 0,t.value=l.value},lines:e.addressList[e.addressList.length-1]?.value===l.value?"none":"full"},{default:(0,s.w5)((()=>[(0,s.Wm)(R,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(l.value),1)])),_:2},1024)])),_:2},1032,["onClick","lines"])])))),128)),(0,s.wy)((0,s.Wm)(A,{lines:"none"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Не найдено ")])),_:1},512),[[l.F8,0===e.addressList?.length]])])],512),[[l.F8,"USER_REGION"===t.field&&t.value]])])),_:2},1024)])),_:2},1536),(0,s.wy)((0,s.Wm)(R,null,{default:(0,s.w5)((()=>[f])),_:2},1536),[[l.F8,0===t.value.length&&t.error]])])))),128))])),_:1}),(0,s.Wm)($,null,{content:(0,s.w5)((()=>[(0,s.Wm)(R,null,{default:(0,s.w5)((()=>[p,(0,s._)("p",null,[(0,s.Wm)(R,{class:"dot"},{default:(0,s.w5)((()=>[(0,s.Uk)("*")])),_:1}),(0,s.Uk)(" - обязательное поле для заполнения. ")]),(0,s._)("p",h,[(0,s.Uk)(" Адрес обьекта "),(0,s.Wm)(R,{class:"dot"},{default:(0,s.w5)((()=>[(0,s.Uk)("*")])),_:1})])])),_:1}),(0,s.Wm)(D,{ref:"addressQuery3"},{default:(0,s.w5)((()=>[(0,s.Wm)(U,{value:"first"},{default:(0,s.w5)((()=>[(0,s.Wm)(k,{slot:"header",value:e.address,name:"Введите данные  ",onInput:t[0]||(t[0]=t=>{e.changeAddress(t),e.addressQueryHandler(t,"GAS_ADDRESS")})},null,8,["value"]),(0,s.wy)((0,s._)("div",v,[(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.addressList,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t},[(0,s.Wm)(A,{button:"",onClick:()=>{this.$refs.addressQuery3.$el.value=void 0,e.address=t.value},lines:e.addressList[e.addressList.length-1]?.value===t.value?"none":"full"},{default:(0,s.w5)((()=>[(0,s.Wm)(R,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(t.value),1)])),_:2},1024)])),_:2},1032,["onClick","lines"])])))),128)),(0,s.wy)((0,s.Wm)(A,{lines:"none"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Не найдено ")])),_:1},512),[[l.F8,0===e.addressList?.length]])])],512),[[l.F8,e.address]])])),_:1})])),_:1},512),(0,s.wy)((0,s.Wm)(R,null,{default:(0,s.w5)((()=>[_])),_:1},512),[[l.F8,!0===e.validation.address]]),(0,s.Wm)(R,null,{default:(0,s.w5)((()=>[(0,s._)("p",E,[(0,s.Uk)(" Кадастровый номер земельного участка "),(0,s.Wm)(R,{class:"dot"},{default:(0,s.w5)((()=>[(0,s.Uk)("*")])),_:1})])])),_:1}),(0,s.Wm)(k,{value:e.number,changeHandler:e.changeNumber,name:"Введите данные "},null,8,["value","changeHandler"]),(0,s.wy)((0,s.Wm)(R,null,{default:(0,s.w5)((()=>[g])),_:1},512),[[l.F8,!0===e.validation.number]])])),_:1})])),_:1},8,["method"])])),_:1})}a(7658);var S=a(2201),y=a(1993),R=a(7821),k=a(23),A=a(8903),U=a(9196),D=a(7717),$=a(6086),L=a(381),C=a.n(L),I=a(3978),W=a(6306),N=a(7698),x=(0,s.aZ)({name:"servicesRequestGas",components:{LayoutBox:D.Z,Input:U.Z,IonPage:R._i,Layout:y.Z,IonText:R.yW,Back:k.Z,IonAccordion:R.We,IonAccordionGroup:R.eh,IonItem:R.Ie},methods:{...(0,$.nv)(W.X,["getForms","addressQuery"]),...(0,$.nv)(N.O,["getProfile"]),changeNumber(e){this.$data.number=e.target.value},changeAddress(e){this.$data.address=e.target.value},onFocusText(e){this.$refs.text[e].focus()},onFocusText2(e){this.$refs.text2[e].focus()},addressQueryHandler(e,t){"USER_BIRTHPLACE"===t&&this.addressQuery(e.target.value,t),"USER_ADDRESS"===t&&this.addressQuery(e.target.value,t),"USER_REGION"!==t&&"GAS_ADDRESS"!==t||this.addressQuery(e.target.value,t)},async storageHandler(){const e=new I.K;await e.create();let t={},a=this.$data.formUser.filter((e=>{if(!0===e.required)return e.error=!0,""===e.value})),s=this.$data.formPass.filter((e=>{if(!0===e.required)return e.error=!0,""===e.value})),r=()=>{0===this.$data.address.length?this.$data.validation.address=!0:this.$data.validation.address=!1,0===this.$data.number.length?this.$data.validation.number=!0:this.$data.validation.number=!1};if(r(),0===a.length&&0===s.length&&Object.keys(this.$data.validation).every((e=>!this.$data.validation[e]))){for(let e=0;e<this.$data.formPass.length;e++){const a=this.$data.formPass[e];t[a.field]={NAME:a.name,VALUE:a.value}}let a={...this.formFields[0],...t};for(let e=0;e<this.$data.formUser.length;e++){const t=this.$data.formUser[e];a[t.field]={NAME:t.name,VALUE:t.value}}let s={...a,DATE_CREATE:{NAME:"Дата создания",VALUE:`${C()().format("DD.MM.YYYY hh:mm:ss")} `},TIMESTAMP_X:{NAME:"Время последнего изменения",VALUE:`${C()().format("DD.MM.YYYY hh:mm:ss")} `},NAME:{NAME:"Название",VALUE:`${C()().format("DD.MM.YYYY hh:mm")} `},USER:{NAME:"USER",VALUE:"",VALUE_ID:0},GAS_ADDRESS:{NAME:"Адрес объекта",VALUE:this.$data.address},GAS_KADASTR:{NAME:"Кадастровый номер земельного участка",VALUE:this.$data.number}};console.log(s,"testuserObject"),this.$pinia.state.value?.services?.form&&(this.$pinia.state.value.services.form=s,await e.set("servicesTechAlliance",JSON.stringify(s))),this.$router.push("/tabs/servicesRequestCalc")}}},computed:{profileDataComputed(){return this.$pinia.state.value?.profile?.profileResponse?.data},formFields(){return this.$pinia.state.value?.services?.formResponse?.result?.forms.filter((e=>"Социальная газификация"===e.SERVICE.VALUE))},addressList(){return this.$pinia.state.value?.services?.addressResponse?.suggestions}},mounted(){this.getForms(),this.getProfile().then((async()=>{const e=new I.K;await e.create();const t=await e.get("token");this.$data.formPass[0].value=this.profileDataComputed?.passport?.serial,this.$data.formPass[1].value=this.profileDataComputed?.passport?.number,this.$data.formPass[2].value=this.profileDataComputed?.passport?.issuedBy,this.$data.formPass[3].value=this.profileDataComputed?.passport?.issuedDate,this.$data.formUser[0].value=this.profileDataComputed?.name,this.$data.formUser[1].value=this.profileDataComputed?.surname,this.$data.formUser[2].value=this.profileDataComputed?.lastname,this.$data.formUser[8].value=JSON.parse(t).phone,this.$data.formUser[10].value=this.profileDataComputed?.email,this.$data.formUser[4].value=this.profileDataComputed?.snils}))},setup(){const e=(0,S.tv)();return{router:e,documentTextOutline:A.L82,caretDownSharp:A.D2O}},data(){return{number:"",address:"",validation:{address:!1,number:!1},formUser:[{field:"USER_NAME",name:"Имя",type:"text",required:!0,value:"",mask:null},{field:"USER_LAST_NAME",mask:null,name:"Фамилия",type:"text",required:!0,value:""},{field:"USER_SECOND_NAME",mask:null,name:"Отчество",type:"text",required:!0,value:""},{field:"USER_BIRTHDATE",mask:"##.##.####",name:"Дата рождения",type:"text",required:!0,value:""},{field:"USER_SNILS",mask:"###-###-### ##",name:"СНИЛС",type:"text",required:!0,value:""},{field:"USER_INN",mask:"############",name:"ИНН",type:"text",required:!0,value:""},{field:"USER_BIRTHPLACE",mask:null,name:"Место рождения",type:"text",required:!0,value:""},{field:"USER_ADDRESS",mask:null,name:"Место жительства",type:"text",required:!0,value:""},{field:"USER_PHONE",mask:"+7 (###) ###-##-##",name:"Контактный телефон",type:"text",required:!0,value:""},{field:"USER_PHONE_2",mask:null,name:"Дополнительный контактный номер",type:"text",required:!1,value:""},{field:"USER_EMAIL",mask:null,name:"E-mail",type:"text",required:!0,value:""}],formPass:[{field:"USER_PASSPORT_SERIAL",name:"Серия паспорта",mask:"####",type:"text",required:!0,value:""},{field:"USER_PASSPORT_NUM",type:"text",name:"Номер паспорта",mask:"######",required:!0,value:""},{field:"USER_PASS_WHO",name:"Кем выдан",type:"text",required:!0,value:""},{field:"USER_PASS_DATE",mask:"##.##.####",name:"Дата выдачи паспорта",type:"text",required:!0,value:""},{field:"USER_REGION",name:"Место регистрации",type:"text",required:!0,value:""}],forms:[]}}}),b=a(3744);const O=(0,b.Z)(x,[["render",w],["__scopeId","data-v-ffeee53a"]]);var q=O}}]);
//# sourceMappingURL=8146.6de6dffd.js.map