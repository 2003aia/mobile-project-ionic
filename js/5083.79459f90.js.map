{"version":3,"file":"js/5083.79459f90.js","mappings":"qQAUUA,EAAAA,EAAAA,GAA8C,KAA3CC,MAAM,wBAAuB,cAAU,K,UAE5CD,EAAAA,EAAAA,GAAI,qB,GA+BKC,MAAM,a,UACTD,EAAAA,EAAAA,GAAyB,SAAtB,sBAAkB,K,UAKzBA,EAAAA,EAAAA,GAA6B,KAA1BC,MAAM,QAAO,aAAS,K,iLAhDjCC,EAAAA,EAAAA,IAuDWC,EAAAA,KAAAA,C,kBAtDT,IAAqD,EAArDC,EAAAA,EAAAA,IAAqDC,EAAAA,CAA9CC,OAAM,IAAQC,EAAAA,OAAOC,KAAK,kB,oBACjCJ,EAAAA,EAAAA,IAoDSK,EAAAA,CApDDC,OAAO,QAASC,OAAQJ,EAAAA,mBAAqBK,QAAO,KAA2BL,EAAAA,OAAOC,KAAI,sBAI/FK,QAASN,EAAAA,QAAUO,UAAW,YAAaC,MAAM,iBAAkBC,WAAY,mB,CAC/D,gBAAY,SAC3B,IAEW,EAFXZ,EAAAA,EAAAA,IAEWa,EAAAA,KAAAA,C,kBADT,IAA8C,CAA9CC,K,MAEFC,GACAnB,EAAAA,EAAAA,GAkCM,aAjCJI,EAAAA,EAAAA,IAC2BgB,EAAAA,CADnBC,UAAO,YAAGC,GAAUf,EAAAA,QAAUe,GAAQC,cAAgBC,GAAMjB,EAAAA,QAAUiB,EAAEC,OAAOC,MAAQA,MAAOnB,EAAAA,QACpGoB,KAAK,mB,mCACPvB,EAAAA,EAAAA,IACuBgB,EAAAA,CADfC,UAAO,YAAGC,GAAUf,EAAAA,KAAOe,GAAQC,cAAgBC,GAAMjB,EAAAA,KAAOiB,EAAEC,OAAOC,MAAQA,MAAOnB,EAAAA,KAC9FoB,KAAK,e,mCACPvB,EAAAA,EAAAA,IAC8CgB,EAAAA,CADtCC,UAAO,YAAGC,GAAUf,EAAAA,SAAWe,GAAQC,cAAgBC,GAAMjB,EAAAA,SAAWiB,EAAEC,OAAOC,MACtFA,MAAOnB,EAAAA,SAAUoB,KAAK,oB,mCAEzBvB,EAAAA,EAAAA,IACmDgB,EAAAA,CAD5CQ,KAAK,QAASP,UAAO,YAAGC,GAAUf,EAAAA,MAAQe,GAAOK,KAAK,oBAAqBD,MAAOnB,EAAAA,MACtFgB,cAAgBC,GAAMjB,EAAAA,MAAQiB,EAAEC,OAAOC,O,mCAE1CtB,EAAAA,EAAAA,IACmDgB,EAAAA,CAD3CS,KAAM,iBAAmBR,UAAO,YAAGC,GAAUf,EAAAA,MAAQe,GAAOK,KAAK,QAASD,MAAOnB,EAAAA,MACtFgB,cAAgBC,GAAMjB,EAAAA,MAAQiB,EAAEC,OAAOC,O,mCAG1CtB,EAAAA,EAAAA,IAC2CgB,EAAAA,CADnCC,UAAO,YAAGC,GAAUf,EAAAA,SAAWe,GAAQC,cAAgBC,GAAMjB,EAAAA,SAAWiB,EAAEC,OAAOC,MACtFA,MAAOnB,EAAAA,SAAUoB,KAAK,iB,mCAEzBvB,EAAAA,EAAAA,IACwGgB,EAAAA,CADhGS,KAAM,aAAeR,UAAO,YAAGC,GAAUf,EAAAA,WAAae,GAC3DC,cAAgBC,GAAMjB,EAAAA,WAAaiB,EAAEC,OAAOC,MAAQA,MAAOnB,EAAAA,WAAYoB,KAAK,wB,0CAE/EvB,EAAAA,EAAAA,IAC0CgB,EAAAA,CADlCS,KAAM,QAAUR,UAAO,YAAGC,GAAUf,EAAAA,OAASe,GAAQC,cAAgBC,GAAMjB,EAAAA,OAASiB,EAAEC,OAAOC,MAClGA,MAAOnB,EAAAA,OAAQoB,KAAK,kB,mCAEvBvB,EAAAA,EAAAA,IAC0CgB,EAAAA,CADlCS,KAAM,SAAWR,UAAO,YAAGC,GAAUf,EAAAA,OAASe,GAAQC,cAAgBC,GAAMjB,EAAAA,OAASiB,EAAEC,OAAOC,MACnGA,MAAOnB,EAAAA,OAAQoB,KAAK,kB,mCACvBvB,EAAAA,EAAAA,IACiGgB,EAAAA,CADzFS,KAAM,UAAYR,UAAO,YAAGC,GAAUf,EAAAA,SAAWe,GACtDC,cAAgBC,GAAMjB,EAAAA,SAAWiB,EAAEC,OAAOC,MAAQA,MAAOnB,EAAAA,SAAUoB,KAAK,qB,mCAC3EvB,EAAAA,EAAAA,IAKW0B,EAAAA,KAAAA,C,kBAJT,IAGW,EAHX1B,EAAAA,EAAAA,IAGWa,EAAAA,KAAAA,C,kBAFT,IAAoC,EAApCjB,EAAAA,EAAAA,GAAoC,IAApC+B,GAAoC,QAAZxB,EAAAA,OAAK,GAC7ByB,K,2BAIN5B,EAAAA,EAAAA,IAEWa,EAAAA,KAAAA,C,kBADT,IAA6B,CAA7BgB,K,iBADgB1B,EAAAA,YAGFA,EAAAA,cAAc2B,UAAUC,MAAMC,QAAK,WAAnDlC,EAAAA,EAAAA,IAEWe,EAAAA,C,MAF0ChB,MAAM,S,mBACzD,IAAyC,mBAAtCM,EAAAA,cAAc2B,UAAUC,MAAMC,OAAK,M,4JAuBhD,GAAeC,EAAAA,EAAAA,IAAgB,CAC7BV,KAAM,iBACNQ,OACE,MAAO,CACLG,UAAU,EACVC,MAAM,EACNZ,KAAM,GACNa,SAAU,GACVC,QAAS,GACTC,MAAO,GACPC,MAAO,GACPC,SAAU,GACVC,WAAY,GACZC,OAAQ,GACRC,OAAQ,GACRC,MAAO,GACPnC,SAAS,EACToC,SAAU,GACVf,UAAU,EAEd,EACAgB,WAAY,CACVC,MAAK,IACLC,KAAI,IACJC,QAAO,KACPC,OAAM,IACNC,QAAO,KACPC,QAAOA,EAAAA,IAGTC,QAAS,KACJC,EAAAA,EAAAA,IAAWC,EAAAA,EAAiB,CAAC,gBAChCC,2BACEC,KAAKC,MAAMjD,SAAU,EAErB,MAAMkD,EAAW,CACfC,SAAU,CACRlB,OAAQe,KAAKC,MAAMhB,OAAOmB,QAAQ,MAAO,IACzClB,OAAQc,KAAKC,MAAMf,OACnBH,SAAUiB,KAAKC,MAAMlB,SACrBC,WAAYgB,KAAKC,MAAMjB,WACvBI,SAAUY,KAAKC,MAAMb,UAGvBD,MAAOa,KAAKC,MAAMd,MAClBrB,KAAMkC,KAAKC,MAAMnC,KACjBc,QAASoB,KAAKC,MAAMrB,QACpBD,SAAUqB,KAAKC,MAAMtB,SACrBE,MAAOmB,KAAKC,MAAMpB,MAClBwB,eAA4C,IAA5BL,KAAKC,MAAMpB,MAAMyB,SAAqD,IAArCN,KAAKO,aAAaF,gBAGrEL,KAAKQ,YAAYN,GAAWO,MAC1BV,UACEC,KAAKC,MAAMjD,SAAU,EACrB,MAAM0D,EAAQ,IAAIC,EAAAA,QACZD,EAAME,SACZ,MAAML,QAAoBG,EAAMG,IAAI,SAC9BvC,EAAO,IACRwC,KAAKC,MAAMR,GACdzC,KAAMkC,KAAKC,MAAMnC,KACjBe,MAAOmB,KAAKC,MAAMpB,aAGd6B,EAAMM,IAAI,QAASF,KAAKG,UAAU3C,IACxC0B,KAAKC,MAAM5B,UAAW,CAAG,GAG/B,GAEF6C,kBACElB,KAAKC,MAAM5B,UAAW,CACxB,EACA8C,kBAEE,MAAMC,EAAiBrB,UACrB,MAAMW,EAAQ,IAAIC,EAAAA,QACZD,EAAME,SACZ,MAAMS,QAAcX,EAAMG,IAAI,SAC9Bb,KAAKC,MAAMnB,MAAQgC,KAAKC,MAAMM,GAAOC,MACrCtB,KAAKC,MAAMpB,MAAQmB,KAAKO,aAAa1B,MACrCmB,KAAKC,MAAMnC,KAAOkC,KAAKO,aAAazC,KACpCkC,KAAKC,MAAMrB,QAAUoB,KAAKO,aAAa3B,QACvCoB,KAAKC,MAAMtB,SAAWqB,KAAKO,aAAa5B,SACxCqB,KAAKC,MAAMd,MAAQa,KAAKO,aAAapB,MACrCa,KAAKC,MAAMhB,OAASe,KAAKO,aAAaJ,UAAUlB,OAChDe,KAAKC,MAAMf,OAASc,KAAKO,aAAaJ,UAAUjB,OAChDc,KAAKC,MAAMlB,SAAWiB,KAAKO,aAAaJ,UAAUpB,SAClDiB,KAAKC,MAAMjB,WAAagB,KAAKO,aAAaJ,UAAUnB,WACpDgB,KAAKC,MAAMb,SAAWY,KAAKO,aAAaJ,UAAUf,QAAO,EAG3DgC,GAEF,EACAG,SAAU,CACRhB,cACE,OAAOP,KAAKwB,OAAOC,MAAM5D,OAAO6D,SAASC,iBAAiBrD,IAC5D,EACAsD,eACE,OAAO5B,KAAKwB,OAAOC,MAAM5D,OAAO6D,SAASE,YAC3C,GAEFC,QACE,MAAMC,GAASC,EAAAA,EAAAA,MAEf,MAAO,CACLD,SAEJ,I,UCjLF,MAAME,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://stng/./src/views/ProfileEdit.vue","webpack://stng/./src/views/ProfileEdit.vue?31db"],"sourcesContent":["<template>\r\n  <ion-page>\r\n    <Back :btnSrc=\"() => router.push('/tabs/profile')\" />\r\n    <Layout height=\"false\" :method=\"editProfileHandler\" :method2=\"\r\n      () => {\r\n        router.push('/tabs/newPassPage');\r\n      }\r\n    \" :loading=\"loading\" :filledBtn=\"'Сохранить'\" title=\"Личный кабинет\" :outlineBtn=\"'Изменить пароль'\">\r\n      <template v-slot:main-content>\r\n        <ion-text>\r\n          <p class=\"title ion-text-start\">Мои данные</p>\r\n        </ion-text>\r\n        <br>\r\n        <div>\r\n          <Input @updated=\"(item) => (surname = item)\" :changeHandler=\"(e) => surname = e.target.value\" :value=\"surname\"\r\n            name=\"Укажите фамилию\" />\r\n          <Input @updated=\"(item) => (name = item)\" :changeHandler=\"(e) => name = e.target.value\" :value=\"name\"\r\n            name=\"Укажите имя\" />\r\n          <Input @updated=\"(item) => (lastname = item)\" :changeHandler=\"(e) => lastname = e.target.value\"\r\n            :value=\"lastname\" name=\"Укажите отчество\" />\r\n\r\n          <Input type=\"email\" @updated=\"(item) => (email = item)\" name=\"Электронная почта\" :value=\"email\"\r\n            :changeHandler=\"(e) => email = e.target.value\" />\r\n\r\n          <Input :mask=\"'###-###-###-##'\" @updated=\"(item) => (snils = item)\" name=\"СНИЛС\" :value=\"snils\"\r\n            :changeHandler=\"(e) => snils = e.target.value\" />\r\n\r\n\r\n          <Input @updated=\"(item) => (issuedBy = item)\" :changeHandler=\"(e) => issuedBy = e.target.value\"\r\n            :value=\"issuedBy\" name=\"Паспорт выдан\" />\r\n\r\n          <Input :mask=\"'##.##.####'\" @updated=\"(item) => (issuedDate = item)\"\r\n            :changeHandler=\"(e) => issuedDate = e.target.value\" :value=\"issuedDate\" name=\"Дата выдачи паспорта\" />\r\n\r\n          <Input :mask=\"'## ##'\" @updated=\"(item) => (serial = item)\" :changeHandler=\"(e) => serial = e.target.value\"\r\n            :value=\"serial\" name=\"Серия паспорта\" />\r\n\r\n          <Input :mask=\"'######'\" @updated=\"(item) => (number = item)\" :changeHandler=\"(e) => number = e.target.value\"\r\n            :value=\"number\" name=\"Номер паспорта\" />\r\n          <Input :mask=\"'###-###'\" @updated=\"(item) => (codePodr = item)\"\r\n            :changeHandler=\"(e) => codePodr = e.target.value\" :value=\"codePodr\" name=\"Код подразделения\" />\r\n          <ion-item>\r\n            <ion-text>\r\n              <p class=\"sub-title\">{{ login }}</p>\r\n              <p>Контактный телефон</p>\r\n            </ion-text>\r\n          </ion-item>\r\n        </div>\r\n        <ion-text v-show=\"response\">\r\n          <p class=\"blue\">Сохранено</p>\r\n        </ion-text>\r\n        <ion-text v-if=\"profileError?.response?.data?.error\" class=\"error\">\r\n          {{ profileError?.response?.data?.error }}\r\n        </ion-text>\r\n      </template>\r\n    </Layout>\r\n  </ion-page>\r\n</template>\r\n\r\n\r\n<script>\r\nimport { defineComponent } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport Layout from \"../components/Layout.vue\";\r\nimport {\r\n  IonPage,\r\n  IonText,\r\n  IonItem,\r\n} from \"@ionic/vue\";\r\nimport Input from \"../components/Input.vue\";\r\nimport Back from \"../components/Back.vue\";\r\nimport { mapActions } from \"pinia\";\r\nimport { useProfileStore } from \"../stores/profile\";\r\nimport { Storage } from \"@ionic/storage\";\r\n\r\nexport default defineComponent({\r\n  name: \"profleEditPage\",\r\n  data() {\r\n    return {\r\n      codeSent: false,\r\n      edit: false,\r\n      name: '',\r\n      lastname: '',\r\n      surname: '',\r\n      email: '',\r\n      login: '',\r\n      issuedBy: '',\r\n      issuedDate: '',\r\n      serial: '',\r\n      number: '',\r\n      snils: '',\r\n      loading: false,\r\n      codePodr: '',\r\n      response: false\r\n    };\r\n  },\r\n  components: {\r\n    Input,\r\n    Back,\r\n    IonPage,\r\n    Layout,\r\n    IonItem,\r\n    IonText,\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions(useProfileStore, [\"editProfile\"]),\r\n    async editProfileHandler() {\r\n      this.$data.loading = true\r\n\r\n      const formData = {\r\n        passport: {\r\n          serial: this.$data.serial.replace(/\\s/g, ''),\r\n          number: this.$data.number,\r\n          issuedBy: this.$data.issuedBy,\r\n          issuedDate: this.$data.issuedDate,\r\n          codePodr: this.$data.codePodr,\r\n        },\r\n\r\n        snils: this.$data.snils,\r\n        name: this.$data.name,\r\n        surname: this.$data.surname,\r\n        lastname: this.$data.lastname,\r\n        email: this.$data.email,\r\n        consenttoemail: this.$data.email.length === 0 && this.profileData?.consenttoemail === true > 0 ? false : true,\r\n\r\n      }\r\n      this.editProfile(formData,).then(\r\n        async () => {\r\n          this.$data.loading = false\r\n          const store = new Storage();\r\n          await store.create();\r\n          const profileData = await store.get('token')\r\n          const data = {\r\n            ...JSON.parse(profileData),\r\n            name: this.$data.name,\r\n            email: this.$data.email,\r\n\r\n          };\r\n          await store.set(\"token\", JSON.stringify(data))\r\n          this.$data.response = true\r\n        }\r\n      );\r\n    }\r\n  },\r\n  ionViewDidLeave() {\r\n    this.$data.response = false\r\n  },\r\n  ionViewDidEnter() {\r\n\r\n    const storageHandler = async () => {\r\n      const store = new Storage()\r\n      await store.create()\r\n      const token = await store.get('token')\r\n      this.$data.login = JSON.parse(token).phone\r\n      this.$data.email = this.profileData?.email\r\n      this.$data.name = this.profileData?.name\r\n      this.$data.surname = this.profileData?.surname\r\n      this.$data.lastname = this.profileData?.lastname\r\n      this.$data.snils = this.profileData?.snils\r\n      this.$data.serial = this.profileData?.passport?.serial\r\n      this.$data.number = this.profileData?.passport?.number\r\n      this.$data.issuedBy = this.profileData?.passport?.issuedBy\r\n      this.$data.issuedDate = this.profileData?.passport?.issuedDate\r\n      this.$data.codePodr = this.profileData?.passport?.codePodr\r\n\r\n    }\r\n    storageHandler()\r\n\r\n  },\r\n  computed: {\r\n    profileData() {\r\n      return this.$pinia.state.value?.profile?.profileResponse?.data;\r\n    },\r\n    profileError() {\r\n      return this.$pinia.state.value?.profile?.profileError;\r\n    }\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n\r\n    return {\r\n      router,\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped>\r\nion-item {\r\n  --padding-start: 0;\r\n  --padding-bottom: 0px;\r\n  --inner-padding-bottom: 0px;\r\n}\r\n</style>","import { render } from \"./ProfileEdit.vue?vue&type=template&id=1855523d&scoped=true\"\nimport script from \"./ProfileEdit.vue?vue&type=script&lang=js\"\nexport * from \"./ProfileEdit.vue?vue&type=script&lang=js\"\n\nimport \"./ProfileEdit.vue?vue&type=style&index=0&id=1855523d&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\aia\\\\Desktop\\\\STNG-MOBILE\\\\mobile-project-ionic\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1855523d\"]])\n\nexport default __exports__"],"names":["_createElementVNode","class","_createBlock","_component_ion_page","_createVNode","_component_Back","btnSrc","_ctx","push","_component_Layout","height","method","method2","loading","filledBtn","title","outlineBtn","_component_ion_text","_hoisted_1","_hoisted_2","_component_Input","onUpdated","item","changeHandler","e","target","value","name","type","mask","_component_ion_item","_hoisted_3","_hoisted_4","_hoisted_5","response","data","error","defineComponent","codeSent","edit","lastname","surname","email","login","issuedBy","issuedDate","serial","number","snils","codePodr","components","Input","Back","IonPage","Layout","IonItem","IonText","methods","mapActions","useProfileStore","async","this","$data","formData","passport","replace","consenttoemail","length","profileData","editProfile","then","store","Storage","create","get","JSON","parse","set","stringify","ionViewDidLeave","ionViewDidEnter","storageHandler","token","phone","computed","$pinia","state","profile","profileResponse","profileError","setup","router","useRouter","__exports__","render"],"sourceRoot":""}