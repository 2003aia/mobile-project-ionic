"use strict";(self["webpackChunktest"]=self["webpackChunktest"]||[]).push([[9641],{3698:function(t,e,n){n.d(e,{G:function(){return o}});var i=n(6086),a=n(9669),s=n.n(a);const o=(0,i.Q_)({id:"notice",state:()=>({notice:[],noticeDetail:null,noticeError:null,idNotice:""}),getters:{getPostsPerAuthor:t=>e=>t.posts.filter((t=>t.userId===e))},actions:{async fetchNotice(t){this.notice=[];try{this.notice=await s().get(`https://aostng.ru/api/v2/notice/all/page/${t}/`).then((t=>t.data))}catch(e){this.noticeError=e}},async fetchNoticeDetail(t){this.noticeDetail=null;try{this.noticeDetail=await s().get(`https://aostng.ru/api/v2/notice/${t}}/`).then((t=>t.data))}catch(e){this.noticeError=e}}}})},1745:function(t,e,n){n.d(e,{Z:function(){return h}});var i=n(6252),a=n(3577);const s={class:"item"},o={class:"img-wrapper"},l={class:"content"},c={class:"title ion-text-start"},r=["innerHTML"];function u(t,e,n,u,d,p){const g=(0,i.up)("ion-img"),m=(0,i.up)("ion-text"),h=(0,i.up)("ion-item");return(0,i.wg)(),(0,i.j4)(h,{lines:"none","router-link":t.name},{default:(0,i.w5)((()=>[(0,i._)("div",s,[(0,i._)("div",o,[null!==t.imgsrc?((0,i.wg)(),(0,i.j4)(g,{key:0,src:t.imgsrc},null,8,["src"])):(0,i.kq)("",!0)]),(0,i._)("div",l,[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i._)("p",null,(0,a.zw)(t.date),1)])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i._)("p",c,(0,a.zw)(t.main_title),1)])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i._)("p",{innerHTML:t.sub_title},null,8,r)])),_:1})])])])),_:1},8,["router-link"])}var d=n(2684),p=(0,i.aZ)({name:"newsItemComponent",props:{date:String,imgsrc:String,name:String,main_title:String,sub_title:String,text:String},components:{IonText:d.yW,IonItem:d.Ie,IonImg:d.Xz}}),g=n(3744);const m=(0,g.Z)(p,[["render",u],["__scopeId","data-v-fa4a756c"]]);var h=m},9641:function(t,e,n){n.r(e),n.d(e,{default:function(){return k}});n(7658);var i=n(6252);const a=t=>((0,i.dD)("data-v-3c34d5fc"),t=t(),(0,i.Cn)(),t),s={class:"header-wrapper"},o={class:"button-wrapper"},l={class:"container"},c=a((()=>(0,i._)("p",{class:"main-title"},"Объявления",-1))),r={key:0};function u(t,e,a,u,d,p){const g=(0,i.up)("Back"),m=(0,i.up)("ion-img"),h=(0,i.up)("Button"),f=(0,i.up)("ion-text"),w=(0,i.up)("NewsItem"),_=(0,i.up)("ion-infinite-scroll-content"),v=(0,i.up)("ion-infinite-scroll"),b=(0,i.up)("ion-spinner"),I=(0,i.up)("ion-content"),k=(0,i.up)("ion-page");return(0,i.wg)(),(0,i.j4)(k,null,{default:(0,i.w5)((()=>[(0,i.Wm)(g,{logo:!0,noBack:!0}),(0,i.Wm)(I,{class:"background"},{default:(0,i.w5)((()=>[(0,i._)("div",s,[(0,i.Wm)(m,{class:"pattern",src:n(2649)},null,8,["src"]),(0,i._)("div",o,[(0,i.Wm)(h,{class:"btn",name:"Новости",grey:t.newsButton,"router-link":"/tabs/main"},null,8,["grey"]),(0,i.Wm)(h,{lightBlue:!0,class:"btn",name:"Объявления",grey:t.adsButton,onClick:t.adsHandler,"router-link":"/tabs/ads"},null,8,["grey","onClick"])])]),(0,i._)("div",l,[(0,i.Wm)(f,{class:"main-title"},{default:(0,i.w5)((()=>[c])),_:1}),!1===t.loading?((0,i.wg)(),(0,i.iD)("div",r,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.list,(e=>((0,i.wg)(),(0,i.j4)(w,{key:e?.id,date:e?.date,main_title:e?.name,sub_title:e?.preview,text:e?.preview,onClick:()=>{this.$pinia.state.value.notice.idNotice=e.id,this.$pinia.state.value.news.forNews="notice",t.router.push({name:"newsPage"})},imgsrc:e?.image},null,8,["date","main_title","sub_title","text","onClick","imgsrc"])))),128)),(0,i.Wm)(v,{disabled:t.isDisabled,onIonInfinite:e[0]||(e[0]=e=>t.fetchMoreNotice(e)),threshold:"100px",id:"infinite-scroll"},{default:(0,i.w5)((()=>[(0,i.Wm)(_,{"loading-spinner":"bubbles"})])),_:1},8,["disabled"])])):((0,i.wg)(),(0,i.j4)(b,{key:1,name:"bubbles"}))])])),_:1})])),_:1})}var d=n(8903),p=n(2684),g=n(8056),m=n(1745),h=n(2201),f=n(3698),w=n(6086),_=n(2166),v=(0,i.aZ)({name:"tabAdsPage",data(){return{adsButton:!1,newsButton:!0,list:[],loading:!1,page:0,isDisabled:!1}},mounted(){this.$data.loading=!0,this.fetchMoreNotice().then((()=>{this.$data.loading=!1}))},computed:{notice(){return this.$pinia.state.value?.notice?.notice?.data}},setup(){const t=(0,h.tv)();return{router:t,airplaneOutline:d.TTc}},methods:{...(0,w.nv)(f.G,["fetchNotice"]),async fetchMoreNotice(t){this.$data.page=this.$data.page+1,this.fetchNotice(this.$data.page).then((()=>{if(this.notice?.length<10&&t?.target)t.target.disabled=!0;else{for(let t=0;t<this.notice?.length;t++){const e=this.notice[t];this.$data.list.push(e)}t?.target?.complete()}}))},adsHandler:function(){this.adsButton=!1,this.newsButton=!0}},components:{IonPage:p._i,IonContent:p.W2,Button:g.Z,NewsItem:m.Z,IonText:p.yW,IonInfiniteScroll:p.ju,Back:_.Z,IonInfiniteScrollContent:p.MB,IonSpinner:p.PQ,IonImg:p.Xz}}),b=n(3744);const I=(0,b.Z)(v,[["render",u],["__scopeId","data-v-3c34d5fc"]]);var k=I}}]);
//# sourceMappingURL=9641.546f999b.js.map