"use strict";(self["webpackChunktest"]=self["webpackChunktest"]||[]).push([[5993],{7698:function(e,t,a){a.d(t,{O:function(){return o}});var l=a(1575),n=a(9669),r=a.n(n);const o=(0,l.Q_)({id:"profile",state:()=>({profileResponse:null,profileError:null,editProfileError:null,editProfileResponse:null}),getters:{getPostsPerAuthor:e=>t=>e.posts.filter((e=>e.userId===t))},actions:{async getProfile(e){try{this.profileResponse=await r().post("https://api.aostng.ru/api/v2/user/profile/get/",{token:e}).then((e=>e.data))}catch(t){this.profileError=t}},async editProfile(e,t,a,l){try{this.editProfileResponse=await r().post("https://api.aostng.ru/api/v2/user/profile/set/",{token:e,firstName:t,lastName:a,email:l}).then((e=>e.data)).catch((e=>{this.editProfileError=e}))}catch(n){this.editProfileError=n}}}})},5993:function(e,t,a){a.r(t),a.d(t,{default:function(){return I}});var l=a(6252),n=a(3577);const r=e=>((0,l.dD)("data-v-2e62f7e2"),e=e(),(0,l.Cn)(),e),o=r((()=>(0,l._)("p",{class:"title ion-text-start"},"Мои данные",-1))),s=r((()=>(0,l._)("p",{class:"sub-title"},"Имя",-1))),u=r((()=>(0,l._)("p",{class:"sub-title"},"Фамилия",-1))),i=r((()=>(0,l._)("p",{class:"sub-title"},"Отчество",-1))),p={class:"sub-title"},d={class:"sub-title"},m=r((()=>(0,l._)("p",null,"Контактный телефон",-1)));function f(e,t,a,r,f,c){const h=(0,l.up)("Back"),g=(0,l.up)("ion-text"),v=(0,l.up)("Input"),w=(0,l.up)("ion-item"),_=(0,l.up)("ion-list"),P=(0,l.up)("Layout"),W=(0,l.up)("ion-page");return(0,l.wg)(),(0,l.j4)(W,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h),(0,l.Wm)(P,{height:"false",method:e.editProfileHandler,method2:()=>{e.router.push("/profileSend")},filledBtn:"Сохранить",title:"Личный кабинет",outlineBtn:"Изменить пароль"},{"main-content":(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[o])),_:1}),(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[s])),_:1}),(0,l.Wm)(v,{onUpdated:t[0]||(t[0]=t=>e.name=t),changeHandler:e.nameChange,value:e.name,name:"Укажите имя"},null,8,["changeHandler","value"]),(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[u])),_:1}),(0,l.Wm)(v,{name:"Укажите фамилию",value:e.surname,changeHandler:e.surnameChange},null,8,["value","changeHandler"]),(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[i])),_:1}),(0,l.Wm)(v,{name:"Укажите отчество"}),(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l._)("p",p,(0,n.zw)(e.data.email),1)])),_:1}),(0,l.Wm)(v,{name:"Электронная почта",value:e.email,changeHandler:e.emailChange},null,8,["value","changeHandler"]),(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l._)("p",d,(0,n.zw)(e.data.phone),1),m])),_:1})])),_:1})])),_:1}),e.profileError?.response?.data?.error?((0,l.wg)(),(0,l.j4)(g,{key:0,class:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.profileError?.response?.data?.error),1)])),_:1})):(0,l.kq)("",!0)])),_:1},8,["method","method2"])])),_:1})}var c=a(2262),h=a(2119),g=a(1019),v=a(297),w=a(1777),_=a(4043),P=a(1575),W=a(7698),k=a(3978),H=(0,l.aZ)({name:"profleEditPage",data(){return{codeSent:!1,edit:!1,data:{name:"Иван",surname:"Иванов",secondname:"Иванович",email:"Pochta@mail.ru",phone:"+7(996)-915-88-31"}}},components:{Input:w.Z,Back:_.Z,IonPage:v._i,IonList:v.q_,Layout:g.Z,IonItem:v.Ie,IonText:v.yW},setup(){const e=(0,h.tv)(),{profileResponse:t,profileError:a}=(0,P.Jk)((0,W.O)()),{editProfile:l}=(0,W.O)();let n=(0,c.iH)("");const r=(0,c.iH)(""),o=(0,c.iH)("");let s=null,u="";const i=async()=>{const e=new k.K;await e.create(),s=await e.get("profileData"),u=await e.get("token");let t=JSON.parse(s);n.value=t?.firstName,r.value=t?.lastName,o.value=t?.email},p=async()=>{l(JSON.parse(u)?.token,n.value,r.value,o.value)},d=e=>{n.value=e.target.value},m=e=>{r.value=e.target.value},f=e=>{o.value=e.target.value};return(0,v.Yr)((()=>{i()})),{profileResponse:t,profileError:a,router:e,editProfileHandler:p,nameChange:d,surnameChange:m,emailChange:f,surname:r,name:n,email:o}}}),y=a(3744);const E=(0,y.Z)(H,[["render",f],["__scopeId","data-v-2e62f7e2"]]);var I=E}}]);
//# sourceMappingURL=5993.45f4575c.js.map