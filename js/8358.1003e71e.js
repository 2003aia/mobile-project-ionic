"use strict";(self["webpackChunktest"]=self["webpackChunktest"]||[]).push([[8358],{6651:function(t,e,n){n.d(e,{U:function(){return c}});var s=n(6086),a=n(9669),o=n.n(a),l=n(3978);const c=(0,s.Q_)({id:"personalAccount",state:()=>({addAccountResponse:null,addAccountError:null,getSettlementsResponse:null,getSettlementsError:null,getStreetsResponse:null,getStreetsError:null,getHousesResponse:null,getHousesError:null,getAccountResponse:null,paymentHistoryResponse:null,paymentHistoryError:null,sberPayResponse:null,sberPayError:null,getAccountError:null,delAccountResponse:{error:!1,data:null},delAccountError:null,getIndicesResponse:null,getIndicesError:null,setIndicesResponse:null,setIndicesError:null,personalItemData:{}}),getters:{getSettlementsList:t=>t.getSettlementsResponse.data.flatMap((t=>t?.settlements.flatMap((t=>t))))},actions:{async getSettlements(){console.log("getting settlements");try{const t=new l.K;await t.create();const e=await t.get("token"),n=JSON.parse(e).token;await o().post("https://fhd.aostng.ru/vesta_storage/hs/API_STNG/V2/GetSettlements",{token:n}).then((t=>this.getSettlementsResponse=t.data))}catch(t){this.getSettlementsError=t}},async getStreets(t){try{const e=new l.K;await e.create();const n=await e.get("token"),s=JSON.parse(n).token;await o().post("https://fhd.aostng.ru/vesta_storage/hs/API_STNG/V2/GetStreets",{token:s,s_id:t}).then((t=>this.getStreetsResponse=t.data))}catch(e){this.getStreetsError=e}},async getHouses(t){try{const e=new l.K;await e.create();const n=await e.get("token"),s=JSON.parse(n).token;await o().post("https://fhd.aostng.ru/vesta_storage/hs/API_STNG/V2/GetHouses",{token:s,ids:t}).then((t=>this.getHousesResponse=t.data))}catch(e){this.getHousesError=e}},async getAccount(){try{const t=new l.K;await t.create();const e=await t.get("token"),n=JSON.parse(e).token,s=JSON.parse(e).lics;await o().post("https://fhd.aostng.ru/vesta_storage/hs/API_STNG/V2/GetAccount",{token:n,LC:s}).then((t=>this.getAccountResponse=t.data))}catch(t){this.getAccountError=t}},async addAccount(t,e){try{await o().post("https://fhd.aostng.ru/vesta_storage/hs/API_STNG/V2/AddAccount",{token:t,LC:e}).then((async t=>{this.addAccountResponse=t.data;const n=new l.K;await n.create();const s=await n.get("token"),a=JSON.parse(s);await n.set("token",JSON.stringify({...a,lics:[...a.lics,e]}))}))}catch(n){this.addAccountError=n}},async delAccount(t){try{const e=new l.K;await e.create();const n=await e.get("token"),s=JSON.parse(n).token;await o().post("https://fhd.aostng.ru/vesta_storage/hs/API_STNG/V2/DelAccount",{token:s,LC:t}).then((async s=>{this.getAccountResponse.data=this.getAccountResponse?.data.filter((e=>e.code!==t));const a=JSON.parse(n),o=this.getAccountResponse?.data.filter((e=>e?.code!==t)),l={name:a.name,phone:a.phone,email:a.email,password:a.password,token:a.token,lics:o?.map((t=>t?.code))};await e.set("token",JSON.stringify(l)),this.delAccountResponse=s.data}))}catch(e){this.delAccountError=e}},async getPayments(t){try{const e=new l.K;await e.create();const n=await e.get("token"),s=JSON.parse(n).token;await o().post("https://fhd.aostng.ru/vesta_storage/hs/API_STNG/V2/GetPayments",{token:s,LC:t}).then((async t=>{this.paymentHistoryResponse=t.data}))}catch(e){this.paymentHistoryError=e}},async getIndices(t){try{const e=new l.K;await e.create();const n=await e.get("token"),s=JSON.parse(n).token;await o().post("https://fhd.aostng.ru/vesta_storage/hs/API_STNG/V2/GetIndices",{token:s,counterId:t}).then((t=>{this.getIndicesResponse=t.data}))}catch(e){this.getIndicesError=e}},async setIndices(t,e){try{const n=new l.K;await n.create();const s=await n.get("token"),a=JSON.parse(s).token;await o().post("https://fhd.aostng.ru/vesta_storage/hs/API_STNG/V2/SetIndices",{token:a,counterId:t,indice:e}).then((e=>{!1===e.data.error&&(this.getIndices(t),this.setIndicesResponse=e.data)}))}catch(n){this.setIndicesError=n}},async sberPay(t,e,n,s,a,c,i){try{const r=new l.K;await r.create();const u=await r.get("token"),d=JSON.parse(u);await o().post("https://fhd.aostng.ru/vesta_storage/hs/API_STNG/V2/SberPay",{token:d.token,phone:e,email:n,LC:t,accruals:s,penalties:c,advances:i,sumTO:a}).then((t=>{this.sberPayResponse=t.data}))}catch(r){this.sberPayError=r}}}})},652:function(t,e,n){n.d(e,{Z:function(){return i}});var s=n(6252);function a(t,e,n,a,o,l){return(0,s.wg)(),(0,s.iD)("div",{class:"main",onClick:e[0]||(e[0]=(...e)=>t.onClick&&t.onClick(...e))},[(0,s.WI)(t.$slots,"content",{},void 0,!0)])}var o=(0,s.aZ)({setup(){},name:"layoutBox",components:{},props:{btnSrc:String,filledButton:String,title:String,height:String,onClick:Function}}),l=n(3744);const c=(0,l.Z)(o,[["render",a],["__scopeId","data-v-3d91200c"]]);var i=c},8358:function(t,e,n){n.r(e),n.d(e,{default:function(){return R}});var s=n(6252),a=n(9963),o=n(3577);const l=(0,s.Uk)("Добавить лицевой счет"),c=(0,s.Uk)("Узнать лицевой счет"),i={class:"title ion-text-start"},r=(0,s.Uk)(" История "),u=(0,s.Uk)(" Удалить"),d=(0,s.Uk)(" Задолженность: "),p=(0,s.Uk)(" Пени: "),m={class:"title ion-text-start"},w=(0,s.Uk)(" История "),g=(0,s.Uk)(" Удалить"),h=(0,s.Uk)(" Задолженность: "),A=(0,s.Uk)(" Пени: "),k={class:"footer"},y=(0,s.Uk)("Добавить лицевой счет"),f=(0,s.Uk)("Узнать лицевой счет");function I(t,e,I,W,_,S){const L=(0,s.up)("Back"),v=(0,s.up)("ion-Icon"),b=(0,s.up)("ion-text"),C=(0,s.up)("ion-icon"),E=(0,s.up)("ion-item"),N=(0,s.up)("Layout"),O=(0,s.up)("ion-img"),P=(0,s.up)("ion-spinner"),U=(0,s.up)("ion-content"),R=(0,s.up)("ion-popover"),D=(0,s.up)("ion-list"),H=(0,s.up)("Button"),B=(0,s.up)("LayoutBox"),Z=(0,s.up)("ion-page");return(0,s.wg)(),(0,s.j4)(Z,null,{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(L,null,null,512),[[a.F8,!t.tabs]]),(0,s.wy)((0,s.Wm)(N,{btnSrc:"/registrPage",height:"false",outlineBtn:".",filledBtn:".",title:"Лицевой счёт"},{"main-content":(0,s.w5)((()=>[(0,s.Wm)(E,{"router-link":"/personalAccountNew"},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{class:"icon-start",size:"large",slot:"start",icon:t.pencilOutline},null,8,["icon"]),(0,s.Wm)(b,{class:"sub-title"},{default:(0,s.w5)((()=>[l])),_:1}),(0,s.Wm)(C,{class:"icon-end",size:"large",slot:"end",icon:t.chevronForwardOutline},null,8,["icon"])])),_:1}),(0,s.Wm)(E,{"router-link":"/personalAccountInfoSearch"},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{class:"icon-start",size:"large",slot:"start",icon:t.documentTextOutline},null,8,["icon"]),(0,s.Wm)(b,{class:"sub-title"},{default:(0,s.w5)((()=>[c])),_:1}),(0,s.Wm)(C,{size:"large",class:"icon-end",slot:"end",icon:t.chevronForwardOutline},null,8,["icon"])])),_:1})])),_:1},512),[[a.F8,0===t.lcList?.length]]),(0,s.wy)((0,s.Wm)(N,{btnSrc:"/registrPage",height:"false",outlineBtn:".",filledBtn:".",title:"Лицевой счёт"},{"main-content":(0,s.w5)((()=>[(0,s.Wm)(E,{lines:"none"},{default:(0,s.w5)((()=>[(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[(0,s._)("p",i," Лицевой счет №"+(0,o.zw)(t.lcList[0]?.code),1)])),_:1}),(0,s.Wm)(C,{slot:"end",onClick:e[0]||(e[0]=e=>{t.lcList[0].open=!0,t.lcList[0].event=e}),icon:t.ellipsisVertical},null,8,["icon"]),(0,s.Wm)(R,{class:"history-wrapper",mode:"ios",event:t.lcList[0]?.event,"is-open":t.lcList[0]?.open,onDidDismiss:e[3]||(e[3]=e=>t.lcList[0].open=!1)},{default:(0,s.w5)((()=>[(0,s.Wm)(U,{class:"ion-padding"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(E,{onClick:e[1]||(e[1]=e=>{t.lcList[0].open=!1,t.lcList[0].event=e,t.router.push({name:"personalAccountPaymentHistory",params:{lc:t.lcList[0]?.code}})})},{default:(0,s.w5)((()=>[(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[r])),_:1}),(0,s.Wm)(O,{slot:"end",class:"history-icon",src:n(1916)},null,8,["src"])])),_:1}),(0,s.Wm)(E,{onClick:e[2]||(e[2]=e=>{t.delAccountHandler(t.lcList[0].code).then((()=>{t.lcList[0].open=!1,t.lcList[0].event=e}))})},{default:(0,s.w5)((()=>[(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[u])),_:1}),!1===t.loadingDel?((0,s.wg)(),(0,s.j4)(C,{key:0,class:"history-icon",icon:t.trashOutline,slot:"end"},null,8,["icon"])):((0,s.wg)(),(0,s.j4)(P,{key:1,slot:"end",name:"bubbles"}))])),_:1})])])),_:1})])),_:1},8,["event","is-open"])])),_:1}),(0,s.Wm)(D,null,{default:(0,s.w5)((()=>[(0,s.Wm)(E,null,{default:(0,s.w5)((()=>[(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(t.lcList[0]?.name),1)])),_:1})])),_:1}),(0,s.Wm)(E,null,{default:(0,s.w5)((()=>[(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(t.lcList[0]?.address),1)])),_:1})])),_:1}),(0,s.Wm)(E,null,{default:(0,s.w5)((()=>[(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[d])),_:1}),(0,s.Wm)(b,{slot:"end",class:"text-blue"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(t.maskMoney(t.lcList[0]?.debts?.accruals+t.lcList[0]?.debts?.penalties+t.lcList[0]?.debts?.sumTO+t.lcList[0]?.debts?.advances)),1)])),_:1})])),_:1}),(0,s.Wm)(E,null,{default:(0,s.w5)((()=>[(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[p])),_:1}),(0,s.Wm)(b,{class:"text-blue",slot:"end"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(t.maskMoney(t.lcList[0]?.debts?.penalties)),1)])),_:1})])),_:1})])),_:1}),(0,s.Wm)(H,{class:"btn",name:"Оплата",onClick:e[4]||(e[4]=()=>{t.personalItemDataHandler(t.lcList[0]),t.router.push({name:"personalAccountPayment"})})}),(0,s.Wm)(H,{class:"btn",outline:!0,name:"Внести показания",onClick:e[5]||(e[5]=()=>{t.personalItemDataHandler(t.lcList[0]),t.router.push({name:"personalAccountIndication"})})}),(0,s.Wm)(H,{onClick:e[6]||(e[6]=()=>t.router.push({name:"personalAccountPaymentHistory",params:{lc:t.lcList[0]?.code}})),class:"btn",outline:!0,name:"История платежей"})])),content:(0,s.w5)((()=>[(0,s.wy)((0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.lcList2,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e},[(0,s.Wm)(B,null,{content:(0,s.w5)((()=>[(0,s.Wm)(E,{lines:"none"},{default:(0,s.w5)((()=>[(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[(0,s._)("p",m," Лицевой счет №"+(0,o.zw)(e.code),1)])),_:2},1024),(0,s.Wm)(C,{onClick:t=>{e.event=t,e.open=!0},slot:"end",modelValue:e.open,"onUpdate:modelValue":t=>e.open=t,icon:t.ellipsisVertical},null,8,["onClick","modelValue","onUpdate:modelValue","icon"]),(0,s.Wm)(R,{class:"history-wrapper",mode:"ios",event:e.event,"is-open":e?.open,onDidDismiss:t=>e.open=!1},{default:(0,s.w5)((()=>[(0,s.Wm)(U,{class:"ion-padding"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(E,{onClick:n=>{e.open=!1,e.event=n,t.router.push({name:"personalAccountPaymentHistory",params:{lc:e?.code}})}},{default:(0,s.w5)((()=>[(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[w])),_:1}),(0,s.Wm)(O,{slot:"end",class:"history-icon",src:n(1916)},null,8,["src"])])),_:2},1032,["onClick"]),(0,s.Wm)(E,{onClick:n=>{t.delAccountHandler(e.code).then((()=>{e.open=!1,e.event=n}))}},{default:(0,s.w5)((()=>[(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[g])),_:1}),t.loadingDel?((0,s.wg)(),(0,s.j4)(P,{key:1,slot:"end",name:"bubbles"})):((0,s.wg)(),(0,s.j4)(C,{key:0,class:"history-icon",icon:t.trashOutline,slot:"end"},null,8,["icon"]))])),_:2},1032,["onClick"])])])),_:2},1024)])),_:2},1032,["event","is-open","onDidDismiss"])])),_:2},1024),(0,s.Wm)(D,null,{default:(0,s.w5)((()=>[(0,s.Wm)(E,null,{default:(0,s.w5)((()=>[(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.name),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(E,null,{default:(0,s.w5)((()=>[(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.address),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(E,null,{default:(0,s.w5)((()=>[(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[h])),_:1}),(0,s.Wm)(b,{slot:"end",class:"text-blue"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(t.maskMoney(e?.debts?.accruals+e?.debts?.penalties+e?.debts?.sumTO+e?.debts?.advances)),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(E,null,{default:(0,s.w5)((()=>[(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[A])),_:1}),(0,s.Wm)(b,{class:"text-blue",slot:"end"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(t.maskMoney(e.debts?.penalties)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,s.Wm)(H,{class:"btn",name:"Оплата",onClick:()=>{t.personalItemDataHandler(e),t.router.push({name:"personalAccountPayment"})}},null,8,["onClick"]),(0,s.Wm)(H,{class:"btn",outline:!0,name:"Внести показания",onClick:()=>{t.personalItemDataHandler(e),t.router.push({name:"personalAccountIndication"})}},null,8,["onClick"]),(0,s.Wm)(H,{class:"btn",outline:!0,onClick:()=>t.router.push({name:"personalAccountPaymentHistory",params:{lc:e?.code}}),name:"История платежей"},null,8,["onClick"])])),_:2},1024)])))),128))],512),[[a.F8,t.lcList?.length>1]]),(0,s._)("div",k,[(0,s.Wm)(B,null,{content:(0,s.w5)((()=>[(0,s.Wm)(E,{"router-link":"/personalAccountNew"},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{class:"icon-start",size:"large",slot:"start",icon:t.pencilOutline},null,8,["icon"]),(0,s.Wm)(b,{class:"sub-title"},{default:(0,s.w5)((()=>[y])),_:1}),(0,s.Wm)(C,{class:"icon-end",size:"large",slot:"end",icon:t.chevronForwardOutline},null,8,["icon"])])),_:1}),(0,s.Wm)(E,{"router-link":"/personalAccountInfoSearch"},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{class:"icon-start",size:"large",slot:"start",icon:t.documentTextOutline},null,8,["icon"]),(0,s.Wm)(b,{class:"sub-title"},{default:(0,s.w5)((()=>[f])),_:1}),(0,s.Wm)(C,{size:"large",class:"icon-end",slot:"end",icon:t.chevronForwardOutline},null,8,["icon"])])),_:1})])),_:1})])])),_:1},512),[[a.F8,0!==t.lcList?.length]])])),_:1})}var W=n(2119),_=n(1839),S=n(5859),L=n(8903),v=n(4043),b=n(652),C=n(5217),E=n(6086),N=n(6651),O=(0,s.aZ)({name:"personalAccountPage",components:{Back:v.Z,IonPage:S._i,Layout:_.Z,IonText:S.yW,IonItem:S.Ie,IonSpinner:S.PQ,IonIcon:S.gu,LayoutBox:b.Z,Button:C.Z,IonList:S.q_,IonImg:S.Xz,IonPopover:S.d8,IonContent:S.W2},props:["tabs"],methods:{...(0,E.nv)(N.U,["getAccount","delAccount"]),async delAccountHandler(t){this.$data.loadingDel=!0;const e=new Promise((e=>{e(this.delAccount(t))}));e.then((()=>{this.$data.loadingDel=!1}))},personalItemDataHandler(t){Object.assign(this.$pinia.state.value?.personalAccount?.personalItemData,t)},maskMoney(t){const e=t;return new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(e/100)}},computed:{lcList(){return this.$pinia.state.value?.personalAccount?.getAccountResponse?.data?this.$pinia.state.value?.personalAccount?.getAccountResponse?.data:[]},lcList2(){return[...this.lcList.slice(1)]},delAccountMessage(){return this.$pinia.state.value?.personalAccount?.delAccountResponse?.message}},mounted(){this.getAccount()},data(){return{open2:!1,lcList3:[],loadingDel:!1}},setup(){const t=(0,W.tv)();return{router:t,pencilOutline:L.Tvs,documentTextOutline:L.L82,chevronForwardOutline:L.Dji,ellipsisVertical:L.LHl,trashOutline:L.gtu}}}),P=n(3744);const U=(0,P.Z)(O,[["render",I],["__scopeId","data-v-1c0cdf1c"]]);var R=U},1916:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAASkSURBVHgB7ZtLehpHEMerGpD0ZaWcIHME5QRGuzzIZ/kEJicI2RiULEAriWyMTxB0AskxipZCJ4h9gkxu4CT+/AK6XN0IGaHp6ZlhXrL7twCJaXp6/nRXd3VVAzgcjgxByIDt1sn2q83qThWm/tv+A/8ul0ldoNr+qCUJHi99NKzR5GBx0632uTdB2QWgpqnMVWNbJPAnINhOWk/SMkh0MO3/0NN/Q4rUfjnbkZL+Mlwezm93o7GlLcMi7bJI4yqkyEzC/RDFm9wYsJCoDCG8xI89LXE9y0gU9/htLOATYEWcVPkkBMoSJ5CFwgTi0T+coagT4DDLMso+EcHAVo+JVI20CW6Yz4ZibickDCVMnsDVNCsBLqF9fiDUVIu0l2oZwoF88/4JDB68DKnHR4QdU9tTneZF56yLQL3Vz1mgnjz6/gBKiK3NzgZZcAJZcAJZcAJZyGUWW2XujNa6FDJ7ZIS/7KhGIXeBlDj/b22wQ0seFMAEq3VonXy9mPpt5D7EWJy9osSZg57Y3HgYtXTuAvHK9ysoGozu3OYukCB5CQUjqXIatWzuAqlNKLVKhYIgwhb0v3kRtXwhs5h2O9rnx9yd8h1ub969iGqcFxQikKb/rc+vPpQct1C04ASy4ASy4ASy4ASy4ASy4ASy4ASyUNxCMYRq+1lvJXFhPVRomqMg037jZ4hJ6XpQpfNsQIhdSDOczHXx5lxLRTAgJuUbYoiR92piV03Ugpg4G2ShdALxdsQAMoJ0TlA8SieQ2gphezFQMXVICR2fV5HSBEa6lLOYPNQPEvthssDZIAtOIAtOIAtOIAu3jDQv8+u8pLqfLCwsvaCUIwTZrHRGdUgThOHssHEMGXNDIL3MB/aBEmPKx0KPXzxIE4K6eDT6Uv7WyGzdpLgeYspBhLXEyR9EiO1bxUULpNLxtYN418Ds8qMXaIEmKOvgCEQLVIqEgpIS6mqovGKJ8XOLs6BCcgwFYPPFfDj8rvBsDE1nBEUQvlAkytwIlh0tEK9e/gm6iDnMEmXH0oPQCaRekKQfdJEKzSVcwbSB9uvZWjOw8ZwGze+nBZpC1Q/8ctruwRqQIZdITGEP1oGCBZICn+v69X8qmSnoF2IbNHdeS8E46ENcnNpJwPzZDKNEZaPBsg0ieB5U7ursZuEISU8Nl+qVR38kEolQ/G64NF6k6l0LxJHMwMxPHUtqnRRurFXyp9EO8YNutU88iMHcOTf0HvwY/bgWSM7EU0PhbbFZuyiDSMaQELdxgtWLKOZAZfpfR2+D7gHkL+8z3djA4U2tC36rB1dNbKewV5OTyzhnHdKGw8d/Y/jsOuRef6x73BJKmP++2HjIMfpWaKY/QtMokPoFWNkLsKG6usFmZY96OPSsxZbayD6lhxGWLCqwKI8aP96sZgWxP3qMBLFj2HcdNbTk2+mtQy63VtJXQbvM93rLBHFPkzTdDUoyD3Q1ZkeNpgr/wmeAOjIu3012wWBXQ089VzpnTR6XXSyTy5Ee4xmKnm07J9qx8P0/7wmiJi+KdpByPyWYGvr8PtGpFOI06j5XsnPzykGU6MFdAelfeP3ej3uQxeFwZM4H5HcdpunyONEAAAAASUVORK5CYII="}}]);
//# sourceMappingURL=8358.1003e71e.js.map