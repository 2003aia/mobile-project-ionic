"use strict";(self["webpackChunktest"]=self["webpackChunktest"]||[]).push([[3228],{1014:function(t,e,n){n.d(e,{m:function(){return l}});var s=n(6086),i=n(9669),a=n.n(i);const l=(0,s.Q_)({id:"news",state:()=>({news:[],newsDetail:null,idNews:"",forNews:""}),getters:{getPostsPerAuthor:t=>e=>t.posts.filter((t=>t.userId===e))},actions:{async fetchNews(t){this.news=[];try{this.news=await a().get(`https://aostng.ru/api/v2/news/all/page/${t}/`).then((t=>t.data))}catch(e){this.error=e}},async fetchNewsDetail(t){this.post=null;try{this.newsDetail=await a().get(`https://aostng.ru/api/v2/news/${t}}/`).then((t=>t.data))}catch(e){this.error=e}}}})},1745:function(t,e,n){n.d(e,{Z:function(){return m}});var s=n(6252),i=n(3577);const a={class:"item"},l={class:"img-wrapper"},o={class:"content"},r={class:"title ion-text-start"},u=["innerHTML"];function c(t,e,n,c,d,p){const w=(0,s.up)("ion-img"),g=(0,s.up)("ion-text"),m=(0,s.up)("ion-item");return(0,s.wg)(),(0,s.j4)(m,{lines:"none","router-link":t.name},{default:(0,s.w5)((()=>[(0,s._)("div",a,[(0,s._)("div",l,[null!==t.imgsrc?((0,s.wg)(),(0,s.j4)(w,{key:0,src:t.imgsrc},null,8,["src"])):(0,s.kq)("",!0)]),(0,s._)("div",o,[(0,s.Wm)(g,null,{default:(0,s.w5)((()=>[(0,s._)("p",null,(0,i.zw)(t.date),1)])),_:1}),(0,s.Wm)(g,null,{default:(0,s.w5)((()=>[(0,s._)("p",r,(0,i.zw)(t.main_title),1)])),_:1}),(0,s.Wm)(g,null,{default:(0,s.w5)((()=>[(0,s._)("p",{innerHTML:t.sub_title},null,8,u)])),_:1})])])])),_:1},8,["router-link"])}var d=n(2684),p=(0,s.aZ)({name:"newsItemComponent",props:{date:String,imgsrc:String,name:String,main_title:String,sub_title:String,text:String},components:{IonText:d.yW,IonItem:d.Ie,IonImg:d.Xz}}),w=n(3744);const g=(0,w.Z)(p,[["render",c],["__scopeId","data-v-fa4a756c"]]);var m=g},3228:function(t,e,n){n.r(e),n.d(e,{default:function(){return k}});n(7658);var s=n(6252);const i=t=>((0,s.dD)("data-v-e6005b82"),t=t(),(0,s.Cn)(),t),a={class:"header-wrapper"},l={class:"btn-wrapper"},o={class:"container"},r=i((()=>(0,s._)("p",{class:"main-title"},"Новости",-1))),u={key:1};function c(t,e,i,c,d,p){const w=(0,s.up)("Back"),g=(0,s.up)("ion-img"),m=(0,s.up)("Button"),h=(0,s.up)("ion-text"),f=(0,s.up)("ion-spinner"),_=(0,s.up)("NewsItem"),v=(0,s.up)("ion-infinite-scroll-content"),I=(0,s.up)("ion-infinite-scroll"),b=(0,s.up)("ion-content"),k=(0,s.up)("ion-page");return(0,s.wg)(),(0,s.j4)(k,null,{default:(0,s.w5)((()=>[(0,s.Wm)(w,{noBack:!0,logo:!0}),(0,s.Wm)(b,{class:"background"},{default:(0,s.w5)((()=>[(0,s._)("div",a,[(0,s.Wm)(g,{class:"pattern",src:n(2649)},null,8,["src"]),(0,s._)("div",l,[(0,s.Wm)(m,{class:"btn",lightBlue:!0,name:"Новости",grey:t.newsButton,"router-link":"/tabs/main"},null,8,["grey"]),(0,s.Wm)(m,{class:"btn",name:"Объявления",grey:t.adsButton,"router-link":"/tabs/ads"},null,8,["grey"])])]),(0,s._)("div",o,[(0,s.Wm)(h,{class:"main-title"},{default:(0,s.w5)((()=>[r])),_:1}),!0===t.loading?((0,s.wg)(),(0,s.j4)(f,{key:0,name:"bubbles"})):(0,s.kq)("",!0),!1===t.loading?((0,s.wg)(),(0,s.iD)("div",u,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.list,(e=>((0,s.wg)(),(0,s.j4)(_,{key:e?.id,date:e?.date,main_title:e?.name,sub_title:e?.preview,text:e?.preview,onClick:()=>{this.$pinia.state.value.news.forNews="news",this.$pinia.state.value.news.idNews=e.id,t.router.push({name:"newsPage"})},imgsrc:e?.image},null,8,["date","main_title","sub_title","text","onClick","imgsrc"])))),128)),(0,s.Wm)(I,{onIonInfinite:e[0]||(e[0]=e=>t.fetchMoreNews(e)),threshold:"100px",id:"infinite-scroll"},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{"loading-spinner":"bubbles"})])),_:1})])):(0,s.kq)("",!0)])])),_:1})])),_:1})}var d=n(8903),p=n(2684),w=n(8056),g=n(6683),m=n(1745),h=n(2201),f=n(6086),_=n(1014),v=(0,s.aZ)({name:"tabMainPage",data(){return{adsButton:!0,newsButton:!1,detail:null,list:[],page:0,loading:!1}},methods:{...(0,f.nv)(_.m,["fetchNews"]),async fetchMoreNews(t){this.$data.page=this.$data.page+1,this.fetchNews(this.$data.page).then((()=>{if(this.news?.length<10)t.target.disabled=!0;else{for(let t=0;t<this.news?.length;t++){const e=this.news[t];this.$data.list.push(e),console.log("testnews")}t?.target?.complete()}}))}},computed:{news(){return this.$pinia.state.value?.news?.news?.data}},mounted(){this.$data.loading=!0,this.fetchMoreNews().then((()=>{this.$data.loading=!1}))},setup(){const t=(0,h.tv)();return{router:t,airplaneOutline:d.TTc}},components:{IonPage:p._i,IonContent:p.W2,Button:w.Z,NewsItem:m.Z,IonText:p.yW,IonImg:p.Xz,Back:g.Z,IonSpinner:p.PQ,IonInfiniteScroll:p.ju,IonInfiniteScrollContent:p.MB}}),I=n(3744);const b=(0,I.Z)(v,[["render",c],["__scopeId","data-v-e6005b82"]]);var k=b}}]);
//# sourceMappingURL=3228.0839acea.js.map