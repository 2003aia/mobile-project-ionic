"use strict";(self["webpackChunktest"]=self["webpackChunktest"]||[]).push([[5464],{6306:function(e,t,a){a.d(t,{X:function(){return o}});a(7658);var s=a(6086),n=a(9669),l=a.n(n),r=a(3978);const i="https://api.aostng.ru/api/v2",o=(0,s.Q_)({id:"services",state:()=>({formResponse:null,formResponseError:null,callInspectorResponse:null,callInspectorError:null,servicesResponse:null,servicesResponseError:null,form:{},select:{GAS_SLUCHI:null,GAS_HARAKTER:null,GAS_VID_USLUG:null},servicesOneNext:!1,techAllianceConnection:!1,addressResponse:null,addressError:null,filesResponse:[],filesResponseError:null,listServicesResponse:null,listServicesResponseError:null,camerasResponse:null,camerasError:null,requestsInfo:null}),getters:{setForm:e=>t=>[...e.form,...t]},actions:{async getCameras(){console.log("getting cameras");try{await l().get(`${i}/camera/get`).then((e=>this.camerasResponse=e.data))}catch(e){this.camerasError=e}},async getListServices(){console.log("getting listServices");const e=new r.K;await e.create();const t=await e.get("token"),a=JSON.parse(t).token;try{await l().post("https://fhd.aostng.ru/vesta_storage/hs/API_STNG/V2/ListServices",{token:a}).then((e=>this.listServicesResponse=e.data))}catch(s){this.listServicesResponseError=s}},async getForms(){console.log("getting forms");try{await l().get("https://aostng.ru/api/?action=getAll&format=json&page=3&limit=20").then((e=>this.formResponse=e.data))}catch(e){this.formResponseError=e}},async uploadFiles(e){console.log("uploading files");const t=new r.K;await t.create();const a=await t.get("token"),s=JSON.parse(a).token;try{let t=e.filter((e=>{if(!1!==e.file)return e}));for(let e=0;e<t.length;e++){const a=t[e];await l().post("https://fhd.aostng.ru/vesta_storage/hs/API_STNG/V2/get_file",{token:s,title:a.title,file:a.file}).then((e=>this.filesResponse.push({...e.data,field:a.field,text:a.text})))}}catch(n){this.filesResponseError=n}},async services(e){console.log("services");const t=new r.K;await t.create();const a=await t.get("token"),s=JSON.parse(a).token;try{await l().post("https://fhd.aostng.ru/vesta_storage/hs/API_STNG/V2/Services",{token:s,data:{status:[{CODE:"120",VALUE:"Принят"},{CODE:"23",VALUE:"В обработке"},{CODE:"26",VALUE:"Выполнено"},{CODE:"24",VALUE:"Требуется документ"},{CODE:"25",VALUE:"Требует оплаты"},{CODE:"22",VALUE:"Отклонен"}],forms:e}}).then((e=>this.servicesResponse=e.data))}catch(n){this.servicesResponseError=n}},async callInspector(e,t){try{const a=new r.K;await a.create();const s=await a.get("token"),n=JSON.parse(s).token;await l().post("https://fhd.aostng.ru/vesta_storage/hs/API_STNG/V2/CallInspector",{token:n,LC:e,phone:t}).then((e=>this.callInspectorResponse=e.data))}catch(a){this.callInspectorError=a}},async addressQuery(e,t){try{await l()({method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token f135ebe81ca212b9d61fedadba1e0111159f0d6b"},url:"https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/address",data:"USER_REGION"===t||"GAS_ADDRESS"===t?JSON.stringify({query:e,locations_boost:[{kladr_id:"4100000100000"}],count:5}):JSON.stringify({query:e,count:5,restrict_value:!1,locations:[{city:"Якутск"},{country:"Узбекистан"},{country:"Таджикистан"},{country:"Киргизия"},{country:"Армения"}]})}).then((e=>this.addressResponse=e.data))}catch(a){this.addressError=a}}}})},2833:function(e,t,a){a.d(t,{Z:function(){return m}});var s=a(6252),n=a(3577);function l(e,t,a,l,r,i){const o=(0,s.up)("ion-text"),u=(0,s.up)("ion-icon");return(0,s.wg)(),(0,s.iD)("div",{class:"choose",onClick:t[0]||(t[0]=(...t)=>e.btnSrc&&e.btnSrc(...t))},[(0,s.Wm)(o,{class:"choose-text"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.name)+" ",1),!0===e.required?((0,s.wg)(),(0,s.j4)(o,{key:0,class:"dot"},{default:(0,s.w5)((()=>[(0,s.Uk)("*")])),_:1})):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(u,{class:"choose-icon",icon:e.caretDownSharp},null,8,["icon"])])}var r=a(2684),i=a(8903),o=a(2201),u=(0,s.aZ)({name:"buttonSelect",props:{name:String,btnSrc:Function,required:Boolean},components:{IonIcon:r.gu,IonText:r.yW},setup(){const e=(0,o.tv)();return{router:e,caretDownSharp:i.D2O}}}),c=a(3744);const d=(0,c.Z)(u,[["render",l],["__scopeId","data-v-793185f2"]]);var m=d},1496:function(e,t,a){a.d(t,{Z:function(){return u}});var s=a(6252),n=a(3577);function l(e,t,a,l,r,i){return(0,s.wg)(),(0,s.iD)("div",{class:(0,n.C_)(["main",{padding:e.padding}]),onClick:t[0]||(t[0]=(...t)=>e.onClick&&e.onClick(...t))},[(0,s.WI)(e.$slots,"content",{},void 0,!0)],2)}var r=(0,s.aZ)({setup(){},name:"layoutBox",components:{},props:{padding:Boolean,btnSrc:String,filledButton:String,title:String,height:String,onClick:Function}}),i=a(3744);const o=(0,i.Z)(r,[["render",l],["__scopeId","data-v-568da44e"]]);var u=o},5464:function(e,t,a){a.r(t),a.d(t,{default:function(){return M}});a(7658);var s=a(6252),n=a(3577),l=a(9963);const r=e=>((0,s.dD)("data-v-2254e9dc"),e=e(),(0,s.Cn)(),e),i=r((()=>(0,s._)("p",{class:"text-20-600"},"Общие сведения для формы заявления",-1))),o={class:"text-white"},u=r((()=>(0,s._)("p",{class:"title ion-text-start"},"Данные заявителя",-1))),c={slot:"content"},d=r((()=>(0,s._)("p",{class:"error"},"Заполните поле",-1))),m=r((()=>(0,s._)("p",{class:"title ion-text-start"},"Данные паспорта",-1))),p=r((()=>(0,s._)("p",{class:"error"},"Заполните поле",-1))),h=r((()=>(0,s._)("p",{class:"title ion-text-start"},"Данные об объекте газификации",-1))),v=r((()=>(0,s._)("p",{class:"error"},"Заполните поле",-1))),f=r((()=>(0,s._)("p",{class:"sub-title"},"Вид работ",-1))),_=r((()=>(0,s._)("p",{class:"error"},"Выберите вариант",-1))),g=r((()=>(0,s._)("p",{class:"sub-title"}," Лицевой счет (соответствует № договора поставки газа) ",-1))),S=r((()=>(0,s._)("p",{class:"error"},"Заполните поле",-1))),E=r((()=>(0,s._)("p",{class:"sub-title"}," Номер договора выполнение работ по техническому обслуживанию и ремонту внутридомового и внутриквартирного газового оборудования с УГРС АО Сахатранснефтегаз ",-1))),A=r((()=>(0,s._)("p",{class:"error"},"Заполните поле",-1))),y=r((()=>(0,s._)("p",{class:"sub-title"}," Управляющая компания для многоквартирных домов ",-1))),U=r((()=>(0,s._)("p",{class:"error"},"Заполните поле",-1)));function w(e,t,a,r,w,k){const R=(0,s.up)("Back"),L=(0,s.up)("ion-text"),D=(0,s.up)("Input"),I=(0,s.up)("ion-item"),$=(0,s.up)("ion-accordion"),W=(0,s.up)("ion-accordion-group"),N=(0,s.up)("LayoutBox"),G=(0,s.up)("ButtonSelect"),V=(0,s.up)("Layout"),b=(0,s.up)("ion-page");return(0,s.wg)(),(0,s.j4)(b,null,{default:(0,s.w5)((()=>[(0,s.Wm)(R),(0,s.Wm)(V,{method:e.storageHandler,height:"false",filledBtn:"Далее",outlineBtn:".",title:"Разовая услуга"},{"header-content":(0,s.w5)((()=>[(0,s.Wm)(L,null,{default:(0,s.w5)((()=>[i,(0,s._)("p",o,[(0,s.Wm)(L,{class:"main-subtitle"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Внимание! ")])),_:1}),(0,s.Uk)(" Уважаемые Абоненты, воспользоваться данным сервисом могут только Абоненты, заключившие договор на выполнение работ по техническому обслуживанию и ремонту внутридомового газового оборудования с Управлением газораспрделеиельных сетей АО «Сахатранснефтегаз». Перед подачей заявки, убедитесь в наличии договора для ввода номера в поле Анкеты. ")])])),_:1})])),"main-content":(0,s.w5)((()=>[(0,s.Wm)(L,null,{default:(0,s.w5)((()=>[u,(0,s._)("p",null,[(0,s.Wm)(L,{class:"dot"},{default:(0,s.w5)((()=>[(0,s.Uk)("*")])),_:1}),(0,s.Uk)(" - обязательное поле для заполнения. ")])])),_:1}),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.formUser,((t,a)=>((0,s.wg)(),(0,s.iD)("div",{key:t},[(0,s.Wm)(W,{ref_for:!0,ref:"addressQuery"},{default:(0,s.w5)((()=>[(0,s.Wm)($,null,{default:(0,s.w5)((()=>[(0,s.Wm)(D,{mask:t.mask,slot:"header",value:t.value,name:t.name,required:t.required,onInput:a=>{t.value=a.target.value,e.addressQueryHandler(a,t.field)}},null,8,["mask","value","name","required","onInput"]),(0,s.wy)((0,s._)("div",c,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.addressList,(r=>(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:r},[(0,s.Wm)(I,{button:"",onClick:()=>{this.$refs.addressQuery[a].$el.value=void 0,t.value=r.value},lines:e.addressList[e.addressList.length-1]?.value===r.value?"none":"full"},{default:(0,s.w5)((()=>[(0,s.Wm)(L,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(r.value),1)])),_:2},1024)])),_:2},1032,["onClick","lines"])])),[[l.F8,"USER_ADDRESS"===t.field&&t.value]]))),128)),(0,s.wy)((0,s.Wm)(I,{lines:"none"},{default:(0,s.w5)((()=>[(0,s.Wm)(L,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Не найдено")])),_:1})])),_:1},512),[[l.F8,0===e.addressList?.length]])],512),[[l.F8,"USER_ADDRESS"===t.field&&t.value]])])),_:2},1024)])),_:2},1536),(0,s.wy)((0,s.Wm)(L,null,{default:(0,s.w5)((()=>[d])),_:2},1536),[[l.F8,0===t.value.length&&t.error]])])))),128))])),content:(0,s.w5)((()=>[(0,s.Wm)(N,null,{content:(0,s.w5)((()=>[(0,s.Wm)(L,null,{default:(0,s.w5)((()=>[m,(0,s._)("p",null,[(0,s.Wm)(L,{class:"dot"},{default:(0,s.w5)((()=>[(0,s.Uk)("*")])),_:1}),(0,s.Uk)(" - обязательное поле для заполнения. ")])])),_:1}),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.formPass,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e},[(0,s.Wm)(D,{mask:e.mask,value:e.value,name:e.name,required:e.required,onInput:t=>{e.value=t.target.value}},null,8,["mask","value","name","required","onInput"]),(0,s.wy)((0,s.Wm)(L,null,{default:(0,s.w5)((()=>[p])),_:2},1536),[[l.F8,0===e.value.length&&e.error]])])))),128))])),_:1}),(0,s.Wm)(N,null,{content:(0,s.w5)((()=>[(0,s.Wm)(L,null,{default:(0,s.w5)((()=>[h,(0,s._)("p",null,[(0,s.Wm)(L,{class:"dot"},{default:(0,s.w5)((()=>[(0,s.Uk)("*")])),_:1}),(0,s.Uk)(" - обязательное поле для заполнения. ")])])),_:1}),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.formGas,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e},[(0,s.Wm)(D,{mask:e.mask,value:e.value,name:e.name,required:e.required,onInput:t=>{e.value=t.target.value}},null,8,["mask","value","name","required","onInput"]),(0,s.wy)((0,s.Wm)(L,null,{default:(0,s.w5)((()=>[v])),_:2},1536),[[l.F8,0===e.value.length&&e.error]])])))),128)),(0,s.Wm)(L,null,{default:(0,s.w5)((()=>[f])),_:1}),(0,s.Wm)(G,{name:this.select?.GAS_VID_USLUG?.VALUE?this.select?.GAS_VID_USLUG?.VALUE:"Выберите вариант",btnSrc:()=>{e.router.push("/tabs/servicesOneSelect")}},null,8,["name","btnSrc"]),(0,s.wy)((0,s.Wm)(L,null,{default:(0,s.w5)((()=>[_])),_:1},512),[[l.F8,!0===e.validation.select&&!this.select?.GAS_VID_USLUG?.VALUE]]),(0,s.Wm)(L,null,{default:(0,s.w5)((()=>[g])),_:1}),(0,s.Wm)(D,{name:"Лицевой счет",value:e.lc,changeHandler:e.changeLc},null,8,["value","changeHandler"]),(0,s.wy)((0,s.Wm)(L,null,{default:(0,s.w5)((()=>[S])),_:1},512),[[l.F8,!0===e.validation.lc&&0===e.lc.length]]),(0,s.Wm)(L,null,{default:(0,s.w5)((()=>[E])),_:1}),(0,s.Wm)(D,{name:"Номер договора",value:e.number,changeHandler:e.changeNumber},null,8,["value","changeHandler"]),(0,s.wy)((0,s.Wm)(L,null,{default:(0,s.w5)((()=>[A])),_:1},512),[[l.F8,!0===e.validation.number&&0===e.number.length]]),(0,s.Wm)(L,null,{default:(0,s.w5)((()=>[y])),_:1}),(0,s.Wm)(D,{name:"Управляющая компания",value:e.company,changeHandler:e.changeCompany},null,8,["value","changeHandler"]),(0,s.wy)((0,s.Wm)(L,null,{default:(0,s.w5)((()=>[U])),_:1},512),[[l.F8,!0===e.validation.company&&0===e.company.length]])])),_:1})])),_:1},8,["method"])])),_:1})}var k=a(2201),R=a(2492),L=a(2684),D=a(9196),I=a(1496),$=a(291),W=a(2833),N=a(381),G=a.n(N),V=a(2982),b=a(6086),q=a(6306),O=(0,s.aZ)({name:"oneServicePage",components:{IonPage:L._i,ButtonSelect:W.Z,Layout:R.Z,IonText:L.yW,Input:D.Z,Back:$.Z,LayoutBox:I.Z,IonAccordion:L.We,IonAccordionGroup:L.eh,IonItem:L.Ie},directives:{mask:V.mask},setup(){const e=(0,k.tv)();return{router:e}},methods:{addressQueryHandler(e,t){"USER_BIRTHPLACE"===t&&this.addressQuery(e.target.value,t),"USER_ADDRESS"===t&&this.addressQuery(e.target.value,t),"USER_REGION"!==t&&"GAS_ADDRESS"!==t||this.addressQuery(e.target.value,t)},...(0,b.nv)(q.X,["getForms","addressQuery"]),async storageHandler(){let e=this.$data.formUser.filter((e=>{if(!0===e.required)return e.error=!0,""===e.value})),t=this.$data.formPass.filter((e=>{if(!0===e.required)return e.error=!0,""===e.value})),a=this.$data.formGas.filter((e=>{if(!0===e.required)return e.error=!0,""===e.value})),s=()=>{0===this.$data.lc.length?this.$data.validation.lc=!0:this.$data.validation.lc=!1,0===this.$data.number.length?this.$data.validation.number=!0:this.$data.validation.number=!1,0===this.$data.company.length?this.$data.validation.company=!0:this.$data.validation.company=!1,void 0===this.select?.GAS_VID_USLUG?.VALUE?this.$data.validation.select=!0:this.$data.validation.select=!1};if(s(),0===e.length&&0===t.length&&0===a.length&&Object.keys(this.$data.validation).every((e=>!this.$data.validation[e]))){let e={},t={};for(let n=0;n<this.$data.formPass.length;n++){const t=this.$data.formPass[n];e[t.field]={NAME:t.name,VALUE:t.value}}for(let n=0;n<this.$data.formGas.length;n++){const e=this.$data.formGas[n];t[e.field]={NAME:e.name,VALUE:e.value}}let a={...this.formFields[0],...e,...t};for(let n=0;n<this.$data.formUser.length;n++){const e=this.$data.formUser[n];a[e.field]={NAME:e.name,VALUE:e.value}}let s={...a,NAME:{NAME:"Название",VALUE:`${a.USER_NAME.VALUE} ${a.USER_LAST_NAME.VALUE}[${G()().format("DD.MM.YYYY hh:mm")}]`},DATE_CREATE:{NAME:"Дата создания",VALUE:`${G()().format("DD.MM.YYYY hh:mm:ss")} `},TIMESTAMP_X:{NAME:"Время последнего изменения",VALUE:`${G()().format("DD.MM.YYYY hh:mm:ss")} `},USER:{NAME:"USER",VALUE:"",VALUE_ID:0},GAS_UPR_COMP:{NAME:"Управляющая компания (для многоквартирных домов)",VALUE:this.$data.company},GAS_LC:{NAME:"Лицевой счет (соответствует № договора поставки газа)",VALUE:this.$data.lc},GAS_NDOGOVORA_UGRS:{NAME:"Номер договора выполнение работ  по техническому о…азового оборудования  с УГРС АО Сахатранснефтегаз",VALUE:this.$data.number},GAS_VID_USLUG:{NAME:"Вид работ",VALUE:this.select?.GAS_VID_USLUG?.VALUE}};console.log(s,"test"),this.$pinia.state.value?.services?.form&&(this.$pinia.state.value.services.servicesOneNext=!0,this.$router.push({name:"servicesOneSelect"}),this.$pinia.state.value.services.form=s)}},changeCompany(e){this.$data.company=e.target.value},changeLc(e){this.$data.lc=e.target.value},changeNumber(e){this.$data.number=e.target.value}},mounted(){this.getForms()},computed:{addressList(){return this.$pinia.state.value?.services?.addressResponse?.suggestions},formFields(){return this.$pinia.state.value?.services?.formResponse?.result?.forms.filter((e=>"Разовые услуги для абонентов АО «Сахатранснефтегаз»"===e.SERVICE.VALUE))},select(){return this.$pinia.state.value?.services?.select}},data(){return{validation:{select:!1,lc:!1,number:!1,company:!1},lc:"",number:"",company:"",formGas:[{field:"GAS_NP",name:"Населенный пункт",type:"text",required:!0,value:""},{field:"GAS_STREET",type:"text",name:"Улица",required:!0,value:""},{field:"GAS_N_DOMA",name:"№ дома ",type:"text",required:!0,value:""},{field:"GAS_N_KORPUSA",name:"№ корпуса",type:"text",required:!0,value:""},{field:"GAS_N_KV",name:"№ квартиры",type:"text",required:!0,value:""}],formPass:[{field:"USER_PASSPORT_SERIAL",name:"Серия паспорта",mask:"####",type:"text",required:!0,value:""},{field:"USER_PASSPORT_NUM",type:"text",name:"Номер паспорта",mask:"######",required:!0,value:""},{field:"USER_PASS_WHO",name:"Кем выдан",type:"text",required:!0,value:""},{field:"USER_PASS_DATE",mask:"##.##.####",name:"Дата выдачи паспорта",type:"text",required:!0,value:""}],formUser:[{field:"USER_NAME",name:"Имя",type:"text",required:!0,value:"",mask:null},{field:"USER_LAST_NAME",mask:null,name:"Фамилия",type:"text",required:!0,value:""},{field:"USER_SECOND_NAME",mask:null,name:"Отчество",type:"text",required:!0,value:""},{field:"USER_ADDRESS",mask:null,name:"Место жительства",type:"text",required:!0,value:""},{field:"USER_PHONE",mask:"+7 (###) ###-##-##",name:"Контактный телефон",type:"text",required:!0,value:""},{field:"USER_PHONE_2",mask:null,name:"Дополнительный контактный номер",type:"text",required:!1,value:""},{field:"USER_EMAIL",mask:null,name:"E-mail",type:"email",required:!0,value:""}]}}}),x=a(3744);const C=(0,x.Z)(O,[["render",w],["__scopeId","data-v-2254e9dc"]]);var M=C}}]);
//# sourceMappingURL=5464.5203b26a.js.map