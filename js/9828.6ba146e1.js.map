{"version":3,"file":"js/9828.6ba146e1.js","mappings":"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","sources":["webpack://test/./src/stores/preEntry.js","webpack://test/./src/views/Date.vue","webpack://test/./node_modules/date-fns/esm/_lib/requiredArgs/index.js","webpack://test/./node_modules/date-fns/esm/toDate/index.js","webpack://test/./node_modules/date-fns/esm/isWeekend/index.js","webpack://test/./src/views/Date.vue?874f"],"sourcesContent":["import { defineStore } from \"pinia\";\r\nimport axios from \"axios\";\r\nimport { isPlatform } from \"@ionic/vue\";\r\n\r\nexport const usePreEntryStore = defineStore({\r\n  id: \"preEntry\",\r\n  state: () => ({\r\n    entryPhone: \"\",\r\n    entryServiceType: \"\",\r\n    entryDate: null,\r\n    entryAvailableTimes: [],\r\n    entryTime: null,\r\n    entryNumber: null,\r\n  }),\r\n  getters: {\r\n    getEntryInfo: (state) => {\r\n      return {\r\n        entryPhone: state.entryPhone,\r\n        entryServiceType: state.entryServiceType,\r\n        entryDate: state.entryDate,\r\n        entryAvailableTimes: state.entryAvailableTimes,\r\n        entryTime: state.entryTime,\r\n      };\r\n    },\r\n  },\r\n  actions: {\r\n    async setPhone(phone) {\r\n      this.entryPhone = phone;\r\n    },\r\n    async setServiceType(type) {\r\n      this.entryServiceType = type;\r\n    },\r\n    async setDate(date) {\r\n      this.entryDate = date;\r\n    },\r\n    async setTime(time) {\r\n      this.entryTime = time;\r\n    },\r\n    async fetchTime() {\r\n      if (this.entryDate && this.entryServiceType != \"\") {\r\n        try {\r\n          let config = {\r\n            headers: {\r\n              Accept: \"*/*\",\r\n              \"Content-Type\": \"multipart/form-data\",\r\n            },\r\n          };\r\n\r\n          let device = \"android\";\r\n          if (isPlatform(\"iphone\")) {\r\n            device = \"iphone\";\r\n          }\r\n\r\n          var bodyFormData = new FormData();\r\n          bodyFormData.append(\"date\", this.entryDate);\r\n          bodyFormData.append(\"service\", this.entryServiceType);\r\n          bodyFormData.append(\"ionicDevice\", device);\r\n\r\n          const response = await axios.post(\r\n            `https://aostng.ru/ajax/preregajax.php`,\r\n            bodyFormData,\r\n            config\r\n          );\r\n\r\n          let values = [];\r\n          // Get values between <option value=\"##:##:##\"> and </option>\r\n          const re = />([^<.]+)<\\//g;\r\n          let match = re.exec(response.data);\r\n          while (match != null) {\r\n            values.push(match[1]);\r\n            match = re.exec(response.data);\r\n          }\r\n\r\n          this.entryTime = null;\r\n          this.entryAvailableTimes = values;\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      }\r\n    },\r\n\r\n    async sendFullInfo(phone, type, date, time) {\r\n      console.log(phone, type, date, time);\r\n      try {\r\n        let config = {\r\n          headers: {\r\n            Accept: \"*/*\",\r\n            \"Content-Type\": \"multipart/form-data\",\r\n          },\r\n        };\r\n        let device = \"android\";\r\n        if (isPlatform(\"iphone\")) {\r\n          device = \"iphone\";\r\n        }\r\n\r\n        var bodyFormData = new FormData();\r\n        bodyFormData.append(\"number\", phone);\r\n        bodyFormData.append(\"service\", type);\r\n        bodyFormData.append(\"date\", date);\r\n        bodyFormData.append(\"time\", time);\r\n        bodyFormData.append(\"ionicDevice\", device);\r\n\r\n        await axios.post(`https://aostng.ru/prereg2.php`, bodyFormData, config).then((response)=>{\r\n          this.entryNumber = response.data.split('Номер вашей брони - </span>')[1]\r\n        })\r\n        return true;\r\n      } catch (error) {\r\n        return false;\r\n      }\r\n    },\r\n\r\n    async resetPreEntry() {\r\n      this.entryPhone = \"\";\r\n      this.entryServiceType = \"\";\r\n      this.entryDate = null;\r\n      this.entryAvailableTimes = [];\r\n      this.entryTime = null;\r\n    },\r\n  },\r\n});\r\n","<template>\r\n  <ion-page>\r\n    <Back />\r\n    <Layout height=\"false\" filledBtn=\"Готово\" outlineBtn=\".\" :btnSrc=\"returnTo\" :method=\"() => clickFilledBtn()\"\r\n      :title=\"time === true ? 'Выберите время' : 'Выберите дату'\">\r\n      <template v-slot:main-content>\r\n        <ion-datetime v-if=\"time === true\" color=\"date\" mode=\"ios\" presentation=\"time\" @ionChange=\"onDateChange\">\r\n        </ion-datetime>\r\n\r\n        <ion-datetime v-if=\"time === false\"  color=\"date\" :is-date-enabled=\"isDateEnabled\" first-day-of-week=\"1\"\r\n          presentation=\"date\" @ionChange=\"onDateChange\" mode=\"ios\" :min=\"today\" :max=\"maxDay\"></ion-datetime>\r\n\r\n      </template>\r\n    </Layout>\r\n  </ion-page>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport Layout from \"../components/Layout.vue\";\r\nimport Back from \"../components/Back.vue\";\r\nimport { IonPage, IonDatetime } from \"@ionic/vue\";\r\n// import { getDate, getMonth } from \"date-fns\";\r\nimport { isWeekend } from \"date-fns\";\r\nimport { usePreEntryStore } from \"../stores/preEntry\";\r\n\r\nexport default defineComponent({\r\n  name: \"timePage\",\r\n  props: {\r\n    time: Boolean,\r\n  },\r\n  components: {\r\n    IonPage,\r\n    Back,\r\n    IonDatetime,\r\n    Layout,\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n\r\n    let returnTo = router.options.history.state.back;\r\n    let selectedDateTime = null;\r\n\r\n    const isDateEnabled = (dateIsoString) => {\r\n      const date = new Date(dateIsoString);\r\n\r\n      return !isWeekend(date);\r\n    };\r\n    const { setDate, fetchTime } = usePreEntryStore();\r\n\r\n    let today = new Date().toISOString();\r\n    let maxDay = new Date();\r\n    maxDay.setDate(maxDay.getDate() + 5);\r\n    maxDay = maxDay.toISOString();\r\n\r\n    return {\r\n      router,\r\n      returnTo,\r\n      selectedDateTime,\r\n      isDateEnabled,\r\n      setDate,\r\n      fetchTime,\r\n      today,\r\n      maxDay,\r\n    };\r\n  },\r\n  methods: {\r\n    onDateChange(event) {\r\n      this.selectedDateTime = new Date(event.detail.value)\r\n        .toLocaleDateString()\r\n        .replace(\"/\", \".\");\r\n    },\r\n    clickFilledBtn() {\r\n      if (this.time === false && this.returnTo == \"/tabs/record\") {\r\n        this.setDate(this.selectedDateTime);\r\n        this.fetchTime();\r\n      }\r\n    },\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.background {\r\n  height: 100%;\r\n}\r\n\r\n.container {\r\n  padding: 15px;\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.header {\r\n  padding: 15px;\r\n  padding-top: 84px;\r\n  padding-bottom: 56px;\r\n  background: linear-gradient(327.65deg, #0378b4 -6.98%, #7ae6e4 119.27%);\r\n}\r\n\r\n.main {\r\n  background: #ffffff;\r\n  padding: 15px;\r\n  border-radius: 15px;\r\n  position: relative;\r\n  top: -50px;\r\n  left: 0;\r\n  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.button {\r\n  margin-top: -30px;\r\n}\r\n</style>\r\n","export default function requiredArgs(required, args) {\n  if (args.length < required) {\n    throw new TypeError(required + ' argument' + (required > 1 ? 's' : '') + ' required, but only ' + args.length + ' present');\n  }\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name toDate\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If the argument is none of the above, the function returns Invalid Date.\n *\n * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.\n *\n * @param {Date|Number} argument - the value to convert\n * @returns {Date} the parsed date in the local time zone\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // Clone the date:\n * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert the timestamp to date:\n * const result = toDate(1392098430000)\n * //=> Tue Feb 11 2014 11:30:30\n */\n\nexport default function toDate(argument) {\n  requiredArgs(1, arguments);\n  var argStr = Object.prototype.toString.call(argument); // Clone the date\n\n  if (argument instanceof Date || _typeof(argument) === 'object' && argStr === '[object Date]') {\n    // Prevent the date to lose the milliseconds when passed to new Date() in IE10\n    return new Date(argument.getTime());\n  } else if (typeof argument === 'number' || argStr === '[object Number]') {\n    return new Date(argument);\n  } else {\n    if ((typeof argument === 'string' || argStr === '[object String]') && typeof console !== 'undefined') {\n      // eslint-disable-next-line no-console\n      console.warn(\"Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments\"); // eslint-disable-next-line no-console\n\n      console.warn(new Error().stack);\n    }\n\n    return new Date(NaN);\n  }\n}","import toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name isWeekend\n * @category Weekday Helpers\n * @summary Does the given date fall on a weekend?\n *\n * @description\n * Does the given date fall on a weekend?\n *\n * @param {Date|Number} date - the date to check\n * @returns {Boolean} the date falls on a weekend\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // Does 5 October 2014 fall on a weekend?\n * const result = isWeekend(new Date(2014, 9, 5))\n * //=> true\n */\n\nexport default function isWeekend(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  var day = date.getDay();\n  return day === 0 || day === 6;\n}","import { render } from \"./Date.vue?vue&type=template&id=91d9527c&scoped=true\"\nimport script from \"./Date.vue?vue&type=script&lang=js\"\nexport * from \"./Date.vue?vue&type=script&lang=js\"\n\nimport \"./Date.vue?vue&type=style&index=0&id=91d9527c&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\aia\\\\Desktop\\\\STNG-MOBILE\\\\mobile-project-ionic\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-91d9527c\"]])\n\nexport default __exports__"],"names":["usePreEntryStore","defineStore","id","state","entryPhone","entryServiceType","entryDate","entryAvailableTimes","entryTime","entryNumber","getters","getEntryInfo","actions","async","phone","this","type","date","time","config","headers","Accept","device","isPlatform","bodyFormData","FormData","append","response","axios","values","re","match","exec","data","push","error","console","log","then","split","_createBlock","_component_ion_page","_createVNode","_component_Back","_component_Layout","height","filledBtn","outlineBtn","btnSrc","_ctx","method","title","_withCtx","_component_ion_datetime","color","mode","presentation","onIonChange","min","max","requiredArgs","required","args","length","TypeError","_typeof","obj","Symbol","iterator","constructor","prototype","toDate","argument","arguments","argStr","Object","toString","call","Date","getTime","warn","Error","stack","NaN","isWeekend","dirtyDate","day","getDay","defineComponent","name","props","Boolean","components","IonPage","Back","IonDatetime","Layout","setup","router","useRouter","returnTo","options","history","back","selectedDateTime","isDateEnabled","dateIsoString","setDate","fetchTime","today","toISOString","maxDay","getDate","methods","onDateChange","event","detail","value","toLocaleDateString","replace","clickFilledBtn","__exports__","render"],"sourceRoot":""}