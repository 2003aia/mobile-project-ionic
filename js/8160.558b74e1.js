"use strict";(self["webpackChunktest"]=self["webpackChunktest"]||[]).push([[8160],{6306:function(e,t,s){s.d(t,{X:function(){return l}});var a=s(6086),n=s(9669),r=s.n(n),o=s(3978);const l=(0,a.Q_)({id:"services",state:()=>({formResponse:null,formResponseError:null,callInspectorResponse:null,callInspectorError:null,servicesResponse:null,servicesResponseError:null,form:[],select:[]}),getters:{setForm:e=>t=>[...e.form,...t]},actions:{async getForms(){console.log("getting forms");try{await r().get("https://aostng.ru/api/?action=getAll&format=json&page=3&limit=20").then((e=>this.formResponse=e.data))}catch(e){this.formResponseError=e}},async services(e){console.log("services");try{await r().post("https://fhd.aostng.ru/vesta_storage/hs/API_STNG/V2/Services",{status:[{CODE:"24",VALUE:"Требуется документ"}],forms:e}).then((e=>this.servicesResponse=e.data))}catch(t){this.servicesResponseError=t}},async callInspector(e,t){try{const s=new o.K;await s.create();const a=await s.get("token"),n=JSON.parse(a).token;await r().post("https://fhd.aostng.ru/vesta_storage/hs/API_STNG/V2/CallInspector",{token:n,LC:e,phone:t}).then((e=>this.callInspectorResponse=e.data))}catch(s){this.callInspectorError=s}}}})},8160:function(e,t,s){s.r(t),s.d(t,{default:function(){return y}});var a=s(6252),n=s(3577);const r=e=>((0,a.dD)("data-v-bd20274a"),e=e(),(0,a.Cn)(),e),o=r((()=>(0,a._)("p",{class:"title ion-text-start"},"Данные заявителя",-1))),l=(0,a.Uk)("*"),c=(0,a.Uk)(" - обязательное поле для заполнения. "),i={class:"ion-text-start error"},p={class:"ion-text-start"};function u(e,t,s,r,u,h){const d=(0,a.up)("Back"),g=(0,a.up)("ion-text"),m=(0,a.up)("Input"),v=(0,a.up)("Layout"),f=(0,a.up)("ion-page");return(0,a.wg)(),(0,a.j4)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{btnSrc:()=>e.router.push("/tabs/services")},null,8,["btnSrc"]),(0,a.Wm)(v,{loading:e.loading,method:e.callInspectorHandler,height:"false",filledBtn:"Далее",outlineBtn:".",title:"Вызов инспектора"},{"main-content":(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[o,(0,a._)("p",null,[(0,a.Wm)(g,{class:"dot"},{default:(0,a.w5)((()=>[l])),_:1}),c])])),_:1}),(0,a.Wm)(m,{value:e.lc,changeHandler:e.changeLc,name:"Укажите лицевой счет ",required:!0},null,8,["value","changeHandler"]),(0,a.Wm)(m,{name:"Укажите номер телефона ",value:e.phone,changeHandler:e.changePhone},null,8,["value","changeHandler"]),e.error?((0,a.wg)(),(0,a.j4)(g,{key:0},{default:(0,a.w5)((()=>[(0,a._)("p",i,(0,n.zw)(e.error),1)])),_:1})):(0,a.kq)("",!0),e.response?((0,a.wg)(),(0,a.j4)(g,{key:1},{default:(0,a.w5)((()=>[(0,a._)("p",p,(0,n.zw)(e.response),1)])),_:1})):(0,a.kq)("",!0)])),_:1},8,["loading","method"])])),_:1})}var h=s(2119),d=s(3875),g=s(8676),m=s(4611),v=s(4043),f=s(6086),w=s(6306),I=(0,a.aZ)({name:"servicesCallInspector",components:{IonPage:g._i,Layout:d.Z,IonText:g.yW,Input:m.Z,Back:v.Z},data(){return{phone:"",lc:"",error:"",loading:!1}},computed:{response(){return this.$pinia.state.value?.services?.callInspectorResponse?.message}},methods:{...(0,f.nv)(w.X,["callInspector"]),callInspectorHandler(){if(""!==this.$data.lc){this.$data.loading=!0,this.$data.error="";const e=new Promise((e=>{e(this.callInspector(this.$data.lc,this.$data.phone))}));e.then((()=>{this.$data.loading=!1}))}else this.$data.error="Заполните поле лицевой счет"},changePhone(e){this.$data.phone=e.target.value},changeLc(e){this.$data.lc=e.target.value}},setup(){const e=(0,h.tv)();return{router:e}}}),_=s(3744);const k=(0,_.Z)(I,[["render",u],["__scopeId","data-v-bd20274a"]]);var y=k}}]);
//# sourceMappingURL=8160.558b74e1.js.map