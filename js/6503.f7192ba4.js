"use strict";(self["webpackChunkstng"]=self["webpackChunkstng"]||[]).push([[6503],{1870:function(e,t,a){a.d(t,{d:function(){return c}});a(7658);var n=a(6086),r=a(9669),s=a.n(r),i=a(5241),l=a(3978);let o="https://fhd.aostng.ru/vesta/hs/API_STNG/V2/";const c=(0,n.Q_)({id:"preEntry",state:()=>({entryPhone:"",entryServiceType:"",entryDate:null,entryAvailableTimes:[],entryTime:null,entryNumber:null,availableDates:null,availableDatesError:null,availableTimeSlots:null,availableTimeSlotsError:null,postReserveResponse:null,postReserveError:null,deleteReserveError:null,deleteReserveResponse:null,reserveData:null,getReserveResponse:null,getReserveError:null}),getters:{getEntryInfo:e=>({entryPhone:e.entryPhone,entryServiceType:e.entryServiceType,entryDate:e.entryDate,entryAvailableTimes:e.entryAvailableTimes,entryTime:e.entryTime})},actions:{async getDates(e){try{await s().get(`${o}/elGetDatas?operation=${e}`).then((e=>this.availableDates=e.data))}catch(t){this.availableDatesError=t}},async getTimeSlots(e,t){try{await s().get(`${o}/elGetTimes?operation=${e}&date=${t}`).then((e=>this.availableTimeSlots=e.data))}catch(a){this.availableTimeSlotsError=a}},async postReserve(e){try{await s().post(`${o}/elReserve`,e).then((e=>this.postReserveResponse=e.data))}catch(t){this.postReserveError=t}},async deleteReserve(e){try{await s().get(`${o}/elDelete?id=${e}`).then((e=>this.deleteReserveResponse=e.data))}catch(t){this.deleteReserveError=t}},async getReserve(){const e=new l.K;await e.create();const t=await e.get("token"),a=JSON.parse(t);try{await s().get(`${o}/elQueye?token=${a?.token}`).then((e=>this.getReserveResponse=e.data))}catch(n){this.getReserveError=n}},async setPhone(e){this.entryPhone=e},async setServiceType(e){this.entryServiceType=e},async setDate(e){this.entryDate=e},async setTime(e){this.entryTime=e},async fetchTime(){if(this.entryDate&&""!=this.entryServiceType)try{let t={headers:{Accept:"*/*","Content-Type":"multipart/form-data"}},a="android";(0,i.a)("iphone")&&(a="iphone");var e=new FormData;e.append("date",this.entryDate),e.append("service",this.entryServiceType),e.append("ionicDevice",a);const n=await s().post("https://aostng.ru/ajax/preregajax.php",e,t);let r=[];const l=/>([^<.]+)<\//g;let o=l.exec(n.data);while(null!=o)r.push(o[1]),o=l.exec(n.data);this.entryTime=null,this.entryAvailableTimes=r}catch(t){console.log(t)}},async sendFullInfo(e,t,a,n){console.log(e,t,a,n);try{let l={headers:{Accept:"*/*","Content-Type":"multipart/form-data"}},o="android";(0,i.a)("iphone")&&(o="iphone");var r=new FormData;return r.append("number",e),r.append("service",t),r.append("date",a),r.append("time",n),r.append("ionicDevice",o),await s().post("https://aostng.ru/prereg2.php",r,l).then((e=>{this.entryNumber=e.data.split("Номер вашей брони - </span>")[1]})),!0}catch(l){return!1}},async resetPreEntry(){this.entryPhone="",this.entryServiceType="",this.entryDate=null,this.entryAvailableTimes=[],this.entryTime=null}}})},6503:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var n=a(6252);function r(e,t,a,r,s,i){const l=(0,n.up)("Back"),o=(0,n.up)("ion-text"),c=(0,n.up)("ion-item"),p=(0,n.up)("Layout"),y=(0,n.up)("ion-page");return(0,n.wg)(),(0,n.j4)(y,null,{default:(0,n.w5)((()=>[(0,n.Wm)(l,{title:"Назад"}),(0,n.Wm)(p,{outlineBtn:".",filledBtn:".",title:"Вид услуг"},{"main-content":(0,n.w5)((()=>[(0,n.Wm)(o,{class:"title"},{default:(0,n.w5)((()=>[(0,n.Uk)("Выберите варианты")])),_:1}),(0,n._)("div",null,[(0,n.Wm)(c,{"router-link":"/tabs/record",onClick:t[0]||(t[0]=t=>e.selectServiceType({operation:"12",name:"Прием документов"}))},{default:(0,n.w5)((()=>[(0,n.Wm)(o,{class:"sub-title"},{default:(0,n.w5)((()=>[(0,n.Uk)("Прием документов")])),_:1})])),_:1}),(0,n.Wm)(c,{"router-link":"/tabs/record",onClick:t[1]||(t[1]=t=>e.selectServiceType({operation:"14",name:"Заключение договора на поставку газа (квартира)"}))},{default:(0,n.w5)((()=>[(0,n.Wm)(o,{class:"sub-title"},{default:(0,n.w5)((()=>[(0,n.Uk)("Заключение договора на поставку газа (квартира)")])),_:1})])),_:1}),(0,n.Wm)(c,{"router-link":"/tabs/record",onClick:t[2]||(t[2]=t=>e.selectServiceType({operation:"16",name:"Социальная газификация"}))},{default:(0,n.w5)((()=>[(0,n.Wm)(o,{class:"sub-title"},{default:(0,n.w5)((()=>[(0,n.Uk)("Социальная газификация ")])),_:1})])),_:1})])])),_:1})])),_:1})}var s=a(2201),i=a(1993),l=a(7821),o=a(23),c=a(1870),p=(0,n.aZ)({name:"recordSelectPage",components:{IonPage:l._i,Layout:i.Z,IonItem:l.Ie,Back:o.Z,IonText:l.yW},setup(){const e=(0,s.tv)(),{getDates:t}=(0,c.d)();return{router:e,getDates:t}},methods:{selectServiceType(e){this.getDates(e.operation),this.$pinia.state.value.preEntry.reserveData=e}}}),y=a(3744);const u=(0,y.Z)(p,[["render",r],["__scopeId","data-v-725e91d8"]]);var h=u}}]);
//# sourceMappingURL=6503.f7192ba4.js.map