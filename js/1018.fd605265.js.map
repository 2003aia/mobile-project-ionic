{"version":3,"file":"js/1018.fd605265.js","mappings":"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","sources":["webpack://test/./src/stores/preEntry.js","webpack://test/./src/views/Date.vue","webpack://test/./node_modules/date-fns/esm/_lib/requiredArgs/index.js","webpack://test/./node_modules/date-fns/esm/toDate/index.js","webpack://test/./node_modules/date-fns/esm/isWeekend/index.js","webpack://test/./src/views/Date.vue?874f"],"sourcesContent":["import { defineStore } from \"pinia\";\r\nimport axios from \"axios\";\r\nimport { isPlatform } from \"@ionic/vue\";\r\n\r\nexport const usePreEntryStore = defineStore({\r\n  id: \"preEntry\",\r\n  state: () => ({\r\n    entryPhone: \"\",\r\n    entryServiceType: \"\",\r\n    entryDate: null,\r\n    entryAvailableTimes: [],\r\n    entryTime: null,\r\n  }),\r\n  getters: {\r\n    getEntryInfo: (state) => {\r\n      return {\r\n        entryPhone: state.entryPhone,\r\n        entryServiceType: state.entryServiceType,\r\n        entryDate: state.entryDate,\r\n        entryAvailableTimes: state.entryAvailableTimes,\r\n        entryTime: state.entryTime,\r\n      };\r\n    },\r\n  },\r\n  actions: {\r\n    async setPhone(phone) {\r\n      this.entryPhone = phone;\r\n    },\r\n    async setServiceType(type) {\r\n      this.entryServiceType = type;\r\n    },\r\n    async setDate(date) {\r\n      this.entryDate = date;\r\n    },\r\n    async setTime(time) {\r\n      this.entryTime = time;\r\n    },\r\n    async fetchTime() {\r\n      if (this.entryDate && this.entryServiceType != \"\") {\r\n        try {\r\n          let config = {\r\n            headers: {\r\n              Accept: \"*/*\",\r\n              \"Content-Type\": \"multipart/form-data\",\r\n            },\r\n          };\r\n\r\n          let device = \"android\";\r\n          if (isPlatform(\"iphone\")) {\r\n            device = \"iphone\";\r\n          }\r\n\r\n          var bodyFormData = new FormData();\r\n          bodyFormData.append(\"date\", this.entryDate);\r\n          bodyFormData.append(\"service\", this.entryServiceType);\r\n          bodyFormData.append(\"ionicDevice\", device);\r\n\r\n          const response = await axios.post(\r\n            `https://aostng.ru/ajax/preregajax.php`,\r\n            bodyFormData,\r\n            config\r\n          );\r\n\r\n          let values = [];\r\n          // Get values between <option value=\"##:##:##\"> and </option>\r\n          const re = />([^<.]+)<\\//g;\r\n          let match = re.exec(response.data);\r\n          while (match != null) {\r\n            values.push(match[1]);\r\n            match = re.exec(response.data);\r\n          }\r\n\r\n          this.entryTime = null;\r\n          this.entryAvailableTimes = values;\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      }\r\n    },\r\n\r\n    async sendFullInfo(phone, type, date, time) {\r\n      console.log(phone, type, date, time);\r\n      try {\r\n        let config = {\r\n          headers: {\r\n            Accept: \"*/*\",\r\n            \"Content-Type\": \"multipart/form-data\",\r\n          },\r\n        };\r\n        let device = \"android\";\r\n        if (isPlatform(\"iphone\")) {\r\n          device = \"iphone\";\r\n        }\r\n\r\n        var bodyFormData = new FormData();\r\n        bodyFormData.append(\"number\", phone);\r\n        bodyFormData.append(\"service\", type);\r\n        bodyFormData.append(\"date\", date);\r\n        bodyFormData.append(\"time\", time);\r\n        bodyFormData.append(\"ionicDevice\", device);\r\n\r\n        await axios.post(`https://aostng.ru/prereg2.php`, bodyFormData, config);\r\n        return true;\r\n      } catch (error) {\r\n        return false;\r\n      }\r\n    },\r\n\r\n    async resetPreEntry() {\r\n      this.entryPhone = \"\";\r\n      this.entryServiceType = \"\";\r\n      this.entryDate = null;\r\n      this.entryAvailableTimes = [];\r\n      this.entryTime = null;\r\n    },\r\n  },\r\n});\r\n","<template>\r\n  <ion-page>\r\n    <Back />\r\n    <Layout\r\n      height=\"false\"\r\n      filledBtn=\"Готово\"\r\n      outlineBtn=\".\"\r\n      :btnSrc=\"returnTo\"\r\n      :method=\"() => clickFilledBtn()\"\r\n      :title=\"time === true ? 'Выберите время' : 'Выберите дату'\"\r\n    >\r\n      <template v-slot:main-content>\r\n        <ion-datetime\r\n          v-if=\"time === true\"\r\n          color=\"date\"\r\n          mode=\"ios\"\r\n          presentation=\"time\"\r\n          @ionChange=\"onDateChange\"\r\n        ></ion-datetime>\r\n\r\n        <ion-datetime\r\n          v-if=\"time === false\"\r\n          color=\"date\"\r\n          :is-date-enabled=\"isDateEnabled\"\r\n          first-day-of-week=\"1\"\r\n          presentation=\"date\"\r\n          @ionChange=\"onDateChange\"\r\n          mode=\"ios\"\r\n          :min=\"today\"\r\n          :max=\"maxDay\"\r\n        ></ion-datetime>\r\n      </template>\r\n    </Layout>\r\n  </ion-page>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport Layout from \"../components/Layout.vue\";\r\nimport Back from \"../components/Back.vue\";\r\nimport { IonPage, IonDatetime } from \"@ionic/vue\";\r\n// import { getDate, getMonth } from \"date-fns\";\r\nimport { isWeekend } from \"date-fns\";\r\nimport { usePreEntryStore } from \"../stores/preEntry\";\r\n\r\nexport default defineComponent({\r\n  name: \"timePage\",\r\n  props: {\r\n    time: Boolean,\r\n  },\r\n  components: {\r\n    IonPage,\r\n    Back,\r\n    IonDatetime,\r\n    Layout,\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n\r\n    let returnTo = router.options.history.state.back;\r\n    let selectedDateTime = null;\r\n\r\n    const isDateEnabled = (dateIsoString) => {\r\n      const date = new Date(dateIsoString);\r\n\r\n      return !isWeekend(date);\r\n    };\r\n    const { setDate, fetchTime } = usePreEntryStore();\r\n\r\n    let today = new Date().toISOString();\r\n    let maxDay = new Date();\r\n    maxDay.setDate(maxDay.getDate() + 5);\r\n    maxDay = maxDay.toISOString();\r\n\r\n    return {\r\n      router,\r\n      returnTo,\r\n      selectedDateTime,\r\n      isDateEnabled,\r\n      setDate,\r\n      fetchTime,\r\n      today,\r\n      maxDay,\r\n    };\r\n  },\r\n  methods: {\r\n    onDateChange(event) {\r\n      this.selectedDateTime = new Date(event.detail.value)\r\n        .toLocaleDateString()\r\n        .replace(\"/\", \".\");\r\n    },\r\n    clickFilledBtn() {\r\n      if (this.time === false && this.returnTo == \"/tabs/record\") {\r\n        this.setDate(this.selectedDateTime);\r\n        this.fetchTime();\r\n      }\r\n    },\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.background {\r\n  height: 100%;\r\n}\r\n\r\n.container {\r\n  padding: 15px;\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.header {\r\n  padding: 15px;\r\n  padding-top: 84px;\r\n  padding-bottom: 56px;\r\n  background: linear-gradient(327.65deg, #0378b4 -6.98%, #7ae6e4 119.27%);\r\n}\r\n\r\n.main {\r\n  background: #ffffff;\r\n  padding: 15px;\r\n  border-radius: 15px;\r\n  position: relative;\r\n  top: -50px;\r\n  left: 0;\r\n  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.button {\r\n  margin-top: -30px;\r\n}\r\n</style>\r\n","export default function requiredArgs(required, args) {\n  if (args.length < required) {\n    throw new TypeError(required + ' argument' + (required > 1 ? 's' : '') + ' required, but only ' + args.length + ' present');\n  }\n}","import requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name toDate\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If the argument is none of the above, the function returns Invalid Date.\n *\n * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.\n *\n * @param {Date|Number} argument - the value to convert\n * @returns {Date} the parsed date in the local time zone\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // Clone the date:\n * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert the timestamp to date:\n * const result = toDate(1392098430000)\n * //=> Tue Feb 11 2014 11:30:30\n */\n\nexport default function toDate(argument) {\n  requiredArgs(1, arguments);\n  var argStr = Object.prototype.toString.call(argument); // Clone the date\n\n  if (argument instanceof Date || typeof argument === 'object' && argStr === '[object Date]') {\n    // Prevent the date to lose the milliseconds when passed to new Date() in IE10\n    return new Date(argument.getTime());\n  } else if (typeof argument === 'number' || argStr === '[object Number]') {\n    return new Date(argument);\n  } else {\n    if ((typeof argument === 'string' || argStr === '[object String]') && typeof console !== 'undefined') {\n      // eslint-disable-next-line no-console\n      console.warn(\"Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule\"); // eslint-disable-next-line no-console\n\n      console.warn(new Error().stack);\n    }\n\n    return new Date(NaN);\n  }\n}","import toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name isWeekend\n * @category Weekday Helpers\n * @summary Does the given date fall on a weekend?\n *\n * @description\n * Does the given date fall on a weekend?\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to check\n * @returns {Boolean} the date falls on a weekend\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // Does 5 October 2014 fall on a weekend?\n * const result = isWeekend(new Date(2014, 9, 5))\n * //=> true\n */\n\nexport default function isWeekend(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  var day = date.getDay();\n  return day === 0 || day === 6;\n}","import { render } from \"./Date.vue?vue&type=template&id=b99d6400&scoped=true\"\nimport script from \"./Date.vue?vue&type=script&lang=js\"\nexport * from \"./Date.vue?vue&type=script&lang=js\"\n\nimport \"./Date.vue?vue&type=style&index=0&id=b99d6400&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\OneDrive\\\\Рабочий стол\\\\STNG-MOBILE\\\\mobile-project-ionic\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b99d6400\"]])\n\nexport default __exports__"],"names":["usePreEntryStore","defineStore","id","state","entryPhone","entryServiceType","entryDate","entryAvailableTimes","entryTime","getters","getEntryInfo","actions","async","phone","this","type","date","time","config","headers","Accept","device","isPlatform","bodyFormData","FormData","append","response","axios","values","re","match","exec","data","push","error","console","log","_createBlock","_component_ion_page","_createVNode","_component_Back","_component_Layout","height","filledBtn","outlineBtn","btnSrc","_ctx","method","title","_withCtx","_component_ion_datetime","color","mode","presentation","onIonChange","min","max","requiredArgs","required","args","length","TypeError","toDate","argument","arguments","argStr","Object","prototype","toString","call","Date","getTime","warn","Error","stack","NaN","isWeekend","dirtyDate","day","getDay","defineComponent","name","props","Boolean","components","IonPage","Back","IonDatetime","Layout","setup","router","useRouter","returnTo","options","history","back","selectedDateTime","isDateEnabled","dateIsoString","setDate","fetchTime","today","toISOString","maxDay","getDate","methods","onDateChange","event","detail","value","toLocaleDateString","replace","clickFilledBtn","__exports__","render"],"sourceRoot":""}