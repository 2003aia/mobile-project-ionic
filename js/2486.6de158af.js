"use strict";(self["webpackChunktest"]=self["webpackChunktest"]||[]).push([[2486],{6306:function(e,t,n){n.d(t,{X:function(){return l}});var s=n(6086),a=n(9669),o=n.n(a),r=n(3978);const l=(0,s.Q_)({id:"services",state:()=>({formResponse:null,formResponseError:null,callInspectorResponse:null,callInspectorError:null,servicesResponse:null,servicesResponseError:null,form:[],select:[]}),getters:{setForm:e=>t=>[...e.form,...t]},actions:{async getForms(){console.log("getting forms");try{await o().get("https://aostng.ru/api/?action=getAll&format=json&page=3&limit=20").then((e=>this.formResponse=e.data))}catch(e){this.formResponseError=e}},async services(e){console.log("services");try{await o().post("https://fhd.aostng.ru/vesta_storage/hs/API_STNG/V2/Services",{status:[{CODE:"24",VALUE:"Требуется документ"}],forms:e}).then((e=>this.servicesResponse=e.data))}catch(t){this.servicesResponseError=t}},async callInspector(e,t){try{const n=new r.K;await n.create();const s=await n.get("token"),a=JSON.parse(s).token;await o().post("https://fhd.aostng.ru/vesta_storage/hs/API_STNG/V2/CallInspector",{token:a,LC:e,phone:t}).then((e=>this.callInspectorResponse=e.data))}catch(n){this.callInspectorError=n}}}})},2486:function(e,t,n){n.r(t),n.d(t,{default:function(){return W}});var s=n(6252),a=n(3577);const o=e=>((0,s.dD)("data-v-bb9581b0"),e=e(),(0,s.Cn)(),e),r=o((()=>(0,s._)("p",{class:"title ion-text-start"},"Данные заявителя",-1))),l=(0,s.Uk)("*"),c=(0,s.Uk)(" - обязательное поле для заполнения. "),i={slot:"header"},u={slot:"content"},p={class:"ion-text-start error"},d={class:"ion-text-start blue"};function h(e,t,n,o,h,g){const f=(0,s.up)("Back"),m=(0,s.up)("ion-text"),v=(0,s.up)("Input"),w=(0,s.up)("ion-item"),_=(0,s.up)("ion-list"),I=(0,s.up)("ion-accordion"),k=(0,s.up)("ion-accordion-group"),b=(0,s.up)("Layout"),y=(0,s.up)("ion-page");return(0,s.wg)(),(0,s.j4)(y,null,{default:(0,s.w5)((()=>[(0,s.Wm)(f,{btnSrc:()=>e.router.push("/tabs/services")},null,8,["btnSrc"]),(0,s.Wm)(b,{loading:e.loading,method:e.callInspectorHandler,height:"false",filledBtn:"Далее",outlineBtn:".",title:"Вызов инспектора"},{"main-content":(0,s.w5)((()=>[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[r,(0,s._)("p",null,[(0,s.Wm)(m,{class:"dot"},{default:(0,s.w5)((()=>[l])),_:1}),c])])),_:1}),(0,s.Wm)(k,{ref:"accordionCallInspector"},{default:(0,s.w5)((()=>[(0,s.Wm)(I,{value:"first","toggle-icon":e.caretDownSharp},{default:(0,s.w5)((()=>[(0,s._)("div",i,[(0,s.Wm)(v,{value:e.lc,changeHandler:e.changeLc,name:"Укажите лицевой счет ",required:!0},null,8,["value","changeHandler"])]),(0,s._)("div",u,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.licsList,(e=>((0,s.wg)(),(0,s.j4)(_,{key:e},{default:(0,s.w5)((()=>[(0,s.Wm)(w,null,{default:(0,s.w5)((()=>[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])])),_:1},8,["toggle-icon"])])),_:1},512),(0,s.Wm)(v,{name:"Укажите номер телефона ",value:e.phone,changeHandler:e.changePhone},null,8,["value","changeHandler"]),e.error?((0,s.wg)(),(0,s.j4)(m,{key:0},{default:(0,s.w5)((()=>[(0,s._)("p",p,(0,a.zw)(e.error),1)])),_:1})):(0,s.kq)("",!0),e.response?((0,s.wg)(),(0,s.j4)(m,{key:1},{default:(0,s.w5)((()=>[(0,s._)("p",d,(0,a.zw)(e.response),1)])),_:1})):(0,s.kq)("",!0)])),_:1},8,["loading","method"])])),_:1})}var g=n(2119),f=n(1839),m=n(8676),v=n(2067),w=n(4043),_=n(6086),I=n(6306),k=n(8903),b=(0,s.aZ)({name:"servicesCallInspector",components:{IonPage:m._i,Layout:f.Z,IonText:m.yW,Input:v.Z,Back:w.Z},data(){return{phone:"",lc:"",error:"",loading:!1}},computed:{response(){return this.$pinia.state.value?.services?.callInspectorResponse?.message}},methods:{...(0,_.nv)(I.X,["callInspector"]),callInspectorHandler(){if(""!==this.$data.lc){this.$data.loading=!0,this.$data.error="";const e=new Promise((e=>{e(this.callInspector(this.$data.lc,this.$data.phone))}));e.then((()=>{this.$data.loading=!1}))}else this.$data.error="Заполните поле лицевой счет"},changePhone(e){this.$data.phone=e.target.value},changeLc(e){this.$data.lc=e.target.value}},setup(){const e=(0,g.tv)();return{router:e,caretDownSharp:k.D2O}}}),y=n(3744);const R=(0,y.Z)(b,[["render",h],["__scopeId","data-v-bb9581b0"]]);var W=R}}]);
//# sourceMappingURL=2486.6de158af.js.map