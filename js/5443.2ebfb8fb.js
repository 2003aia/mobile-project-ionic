"use strict";(self["webpackChunkstng"]=self["webpackChunkstng"]||[]).push([[5443],{1870:function(e,t,a){a.d(t,{d:function(){return c}});a(7658);var n=a(6086),r=a(9669),s=a.n(r),l=a(5241),i=a(3978);let o="https://fhd.aostng.ru/vesta/hs/API_STNG/V2/";const c=(0,n.Q_)({id:"preEntry",state:()=>({entryPhone:"",entryServiceType:"",entryDate:null,entryAvailableTimes:[],entryTime:null,entryNumber:null,availableDates:null,availableDatesError:null,availableTimeSlots:null,availableTimeSlotsError:null,postReserveResponse:null,postReserveError:null,deleteReserveError:null,deleteReserveResponse:null,reserveData:null,getReserveResponse:null,getReserveError:null}),getters:{getEntryInfo:e=>({entryPhone:e.entryPhone,entryServiceType:e.entryServiceType,entryDate:e.entryDate,entryAvailableTimes:e.entryAvailableTimes,entryTime:e.entryTime})},actions:{async getDates(e){try{await s().get(`${o}/elGetDatas?operation=${e}`).then((e=>this.availableDates=e.data))}catch(t){this.availableDatesError=t}},async getTimeSlots(e,t){try{await s().get(`${o}/elGetTimes?operation=${e}&date=${t}`).then((e=>this.availableTimeSlots=e.data))}catch(a){this.availableTimeSlotsError=a}},async postReserve(e){try{await s().post(`${o}/elReserve`,e).then((e=>this.postReserveResponse=e.data))}catch(t){this.postReserveError=t}},async deleteReserve(e){try{await s().get(`${o}/elDelete?id=${e}`).then((e=>this.deleteReserveResponse=e.data))}catch(t){this.deleteReserveError=t}},async getReserve(){const e=new i.K;await e.create();const t=await e.get("token"),a=JSON.parse(t);try{await s().get(`${o}/elQueye?token=${a?.token}`).then((e=>this.getReserveResponse=e.data))}catch(n){this.getReserveError=n}},async setPhone(e){this.entryPhone=e},async setServiceType(e){this.entryServiceType=e},async setDate(e){this.entryDate=e},async setTime(e){this.entryTime=e},async fetchTime(){if(this.entryDate&&""!=this.entryServiceType)try{let t={headers:{Accept:"*/*","Content-Type":"multipart/form-data"}},a="android";(0,l.a)("iphone")&&(a="iphone");var e=new FormData;e.append("date",this.entryDate),e.append("service",this.entryServiceType),e.append("ionicDevice",a);const n=await s().post("https://aostng.ru/ajax/preregajax.php",e,t);let r=[];const i=/>([^<.]+)<\//g;let o=i.exec(n.data);while(null!=o)r.push(o[1]),o=i.exec(n.data);this.entryTime=null,this.entryAvailableTimes=r}catch(t){console.log(t)}},async sendFullInfo(e,t,a,n){console.log(e,t,a,n);try{let i={headers:{Accept:"*/*","Content-Type":"multipart/form-data"}},o="android";(0,l.a)("iphone")&&(o="iphone");var r=new FormData;return r.append("number",e),r.append("service",t),r.append("date",a),r.append("time",n),r.append("ionicDevice",o),await s().post("https://aostng.ru/prereg2.php",r,i).then((e=>{this.entryNumber=e.data.split("Номер вашей брони - </span>")[1]})),!0}catch(i){return!1}},async resetPreEntry(){this.entryPhone="",this.entryServiceType="",this.entryDate=null,this.entryAvailableTimes=[],this.entryTime=null}}})},2833:function(e,t,a){a.d(t,{Z:function(){return d}});var n=a(6252),r=a(3577);function s(e,t,a,s,l,i){const o=(0,n.up)("ion-text"),c=(0,n.up)("ion-icon");return(0,n.wg)(),(0,n.iD)("div",{class:"choose",onClick:t[0]||(t[0]=(...t)=>e.btnSrc&&e.btnSrc(...t))},[(0,n.Wm)(o,{class:"choose-text"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(e.name)+" ",1),!0===e.required?((0,n.wg)(),(0,n.j4)(o,{key:0,class:"dot"},{default:(0,n.w5)((()=>[(0,n.Uk)("*")])),_:1})):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(c,{class:"choose-icon",icon:e.caretDownSharp},null,8,["icon"])])}var l=a(7821),i=a(8903),o=a(2201),c=(0,n.aZ)({name:"buttonSelect",props:{name:String,btnSrc:Function,required:Boolean},components:{IonIcon:l.gu,IonText:l.yW},setup(){const e=(0,o.tv)();return{router:e,caretDownSharp:i.D2O}}}),p=a(3744);const u=(0,p.Z)(c,[["render",s],["__scopeId","data-v-793185f2"]]);var d=u},5443:function(e,t,a){a.r(t),a.d(t,{default:function(){return z}});a(7658);var n=a(6252),r=a(3577),s=a(9963);const l=e=>((0,n.dD)("data-v-0ab523b0"),e=e(),(0,n.Cn)(),e),i=l((()=>(0,n._)("p",{class:"main-text"}," С помощью данного сервиса физическим и юридическим лицам можно предварительно записаться на прием в Службу «Единого окна» по адресу г.Якутск, ул. Петра Алексеева, 64. ",-1))),o=l((()=>(0,n._)("p",{class:"main-text"}," На ваш номер телефона будет отправлен СМС с указанием номера брони, а также даты и времени записи. ",-1))),c=l((()=>(0,n._)("p",{class:"main-text"}," Прием документов производится только при полном пакете документов. ",-1))),p={class:"main-text"},u=l((()=>(0,n._)("p",{class:"title ion-text-start"},"Данные заявителя",-1))),d=l((()=>(0,n._)("p",{class:"sub-title"},"Предварительная запись",-1))),h=l((()=>(0,n._)("span",{class:"blue"},"*",-1))),m=l((()=>(0,n._)("span",{class:"blue"},"*",-1))),v=l((()=>(0,n._)("p",null," Режим работы Службы «Единого окна» в будни с 08.00 до 17.00 Выходной: суббота, воскресенье ",-1))),y={class:"modal-header"},g={class:"modal"},w={class:"ion-text-center",style:{"margin-top":"-10px",color:"black"}},D=l((()=>(0,n._)("br",null,null,-1))),f={class:"confirmWrapper"};function R(e,t,a,l,R,b){const _=(0,n.up)("Back"),k=(0,n.up)("ion-text"),T=(0,n.up)("Input"),W=(0,n.up)("ButtonSelect"),$=(0,n.up)("ion-icon"),S=(0,n.up)("ion-item"),x=(0,n.up)("ion-button"),I=(0,n.up)("ion-spinner"),E=(0,n.up)("ion-modal"),O=(0,n.up)("Layout"),F=(0,n.up)("ion-page"),P=(0,n.Q2)("mask");return(0,n.wg)(),(0,n.j4)(F,null,{default:(0,n.w5)((()=>[(0,n.Wm)(_,{noBack:!0,logo:!0}),(0,n.Wm)(O,{method2:()=>{e.router.push("/tabs/records")},loading:e.loading,height:"false",outlineBtn:"Мои заявки",filledBtn:"Оставить заявку",title:"Предварительная запись",method:()=>e.sendPreregRequest()},{"header-content":(0,n.w5)((()=>[(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[i])),_:1}),(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[o])),_:1}),(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[c])),_:1}),(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[(0,n._)("p",p,[(0,n.Wm)(k,{class:"main-subtitle"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Внимание! ")])),_:1}),(0,n.Uk)(" Согласно п. 9 ПП РФ №549, при подаче заявления на заключение договора на поставку газа, необходимо предоставить договор на техническое обслуживание со специализированной организацией. ")])])),_:1})])),"main-content":(0,n.w5)((()=>[(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[u])),_:1}),(0,n.wy)((0,n.Wm)(T,{required:!0,name:"Номер телефона",type:"tel",value:e.phone,changeHandler:t=>e.phone=t.target.value},null,8,["value","changeHandler"]),[[P,"+7 (###) ###-##-##"]]),(0,n.Wm)(T,{name:"Электронная почта",type:"email",value:e.email,changeHandler:t=>e.email=t.target.value},null,8,["value","changeHandler"]),(0,n.Wm)(T,{name:"ФИО",type:"text",value:e.fio,changeHandler:t=>e.fio=t.target.value},null,8,["value","changeHandler"]),(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[d])),_:1}),(0,n.Wm)(W,{required:!0,name:e.reserveData?.name||"Выберите вариант",btnSrc:()=>{e.router.push("/tabs/recordSelect")}},null,8,["name","btnSrc"]),(0,n._)("div",null,[(0,n.Wm)(S,{"router-link":"/tabs/date"},{default:(0,n.w5)((()=>[(0,n.Wm)($,{size:"large",slot:"start",class:"icon-start",icon:e.calendarNumberOutline},null,8,["icon"]),(0,n.Wm)(k,{class:"sub-title"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(e.reserveData?.date||"Выберите дату записи")+" ",1),h])),_:1}),(0,n.Wm)($,{size:"large",slot:"end",class:"icon-end",icon:e.chevronForwardOutline},null,8,["icon"])])),_:1}),(0,n.Wm)(S,{"router-link":"/tabs/time"},{default:(0,n.w5)((()=>[(0,n.Wm)($,{size:"large",slot:"start",class:"icon-start",icon:e.alarmOutline},null,8,["icon"]),(0,n.Wm)(k,{class:"sub-title"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(e.reserveData?.slot||"Выберите время записи")+" ",1),m])),_:1}),(0,n.Wm)($,{class:"icon-end",size:"large",slot:"end",icon:e.chevronForwardOutline},null,8,["icon"])])),_:1})]),(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[v,(0,n.Wm)(E,{ref:"recordResponse","is-open":e.isOpen,onWillDismiss:e.onWillDismiss,mode:"ios"},{default:(0,n.w5)((()=>[(0,n._)("div",y,[(0,n.Wm)($,{onClick:e.cancel,icon:e.closeOutline},null,8,["onClick","icon"])]),(0,n._)("div",g,[(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("p",w,[(0,n.Uk)(" Ваша заявка принята! "),D,(0,n.Uk)(" Номер вашей брони - "+(0,r.zw)(e.postReserveData?.data?.enrollment_pin),1)],512),[[s.F8,!1===e.postReserveData?.error]]),(0,n.wy)((0,n._)("p",{style:{"margin-top":"-10px"},class:"ion-text-center error"},(0,r.zw)(e.postReserveData?.message),513),[[s.F8,!0===e.postReserveData?.error]]),(0,n.wy)((0,n._)("p",{class:"ion-text-center",style:{color:"black"}},(0,r.zw)(e.deleteReserveData?.message),513),[[s.F8,e.deleteReserveData&&!1===e.postReserveData?.error]])])),_:1}),(0,n.wy)((0,n._)("div",f,[(0,n.wy)((0,n.Wm)(x,{onClick:t[0]||(t[0]=t=>e.deleteHandler(e.postReserveData?.data?.enrollment_id)),fill:"clear",style:{color:"red",border:"solid red 1px"}},{default:(0,n.w5)((()=>[(0,n.Uk)("ОТМЕНИТЬ ЗАПИСЬ")])),_:1},512),[[s.F8,!e.loadingDel]]),(0,n.wy)((0,n.Wm)(x,{fill:"clear",style:{color:"red",border:"solid red 1px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(I,{name:"bubbles"})])),_:1},512),[[s.F8,e.loadingDel]])],512),[[s.F8,!1===e.postReserveData?.error]])])])),_:1},8,["is-open","onWillDismiss"]),(0,n.wy)((0,n._)("p",{class:"error"},(0,r.zw)(e.errorText),513),[[s.F8,e.errorText?.length>0]])])),_:1})])),_:1},8,["method2","loading","method"])])),_:1})}var b=a(2201),_=a(1993),k=a(1870),T=a(3978),W=a(2833),$=a(23),S=a(7821),x=a(9196),I=a(8903),E=a(2982),O=(0,n.aZ)({name:"recordPage",components:{ButtonSelect:W.Z,IonPage:S._i,Back:$.Z,IonSpinner:S.PQ,Layout:_.Z,IonItem:S.Ie,Input:x.Z,IonText:S.yW,IonButton:S.YG,IonIcon:S.gu,IonModal:S.ki},directives:{mask:E.mask},computed:{reserveData(){return this.$pinia.state.value.preEntry.reserveData},profileData(){return this.$pinia.state.value.profile?.profileResponse?.data},postReserveData(){return this.$pinia.state.value.preEntry.postReserveResponse},deleteReserveData(){return this.$pinia.state.value.preEntry.deleteReserveResponse}},data(){return{errorText:"",phone:"",email:"",fio:"",loading:!1,loadingDel:!1,token:null,isOpen:!1}},setup(){const e=(0,b.tv)(),{postReserve:t,deleteReserve:a}=(0,k.d)();return{router:e,caretDownSharp:I.D2O,chevronForwardOutline:I.Dji,calendarNumberOutline:I.Yap,alarmOutline:I.Iq6,postReserve:t,deleteReserve:a,closeOutline:I.fID}},mounted(){const e=async()=>{const e=new T.K;await e.create();const t=await e.get("token");this.$data.phone=JSON.parse(t).phone,this.$data.token=JSON.parse(t)};e(),this.email=this.profileData?.email},methods:{onWillDismiss(){this.$pinia.state.value.preEntry.deleteReserveResponse=null,this.$pinia.state.value.preEntry.postReserveResponse=null},cancel(){this.$refs.recordResponse.$el.dismiss(null,"cancel")},deleteHandler(e){this.$data.loadingDel=!0,this.deleteReserve(e).then((()=>{this.$data.loadingDel=!1}))},sendPreregRequest(){const e={operation:this.reserveData?.operation,slot:this.$pinia.state.value.preEntry.reserveData?.slot,date:this.reserveData?.date,phone:this.$data.phone,email:this.$data.email,fio:this.$data.fio,token:this.$data.token?.token};this.reserveData?.operation&&this.reserveData?.date&&this.reserveData?.slot&&this.$data.phone?(this.$data.errorText="",this.$data.loading=!0,this.$data.isOpen=!1,this.postReserve(e).then((()=>{this.$data.isOpen=!0,this.$pinia.state.value.preEntry.reserveData=null,this.$data.loading=!1}))):this.$data.errorText="Все обязательные поля должны быть заполнены"}}}),F=a(3744);const P=(0,F.Z)(O,[["render",R],["__scopeId","data-v-0ab523b0"]]);var z=P}}]);
//# sourceMappingURL=5443.2ebfb8fb.js.map