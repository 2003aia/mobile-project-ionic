"use strict";(self["webpackChunktest"]=self["webpackChunktest"]||[]).push([[5951],{7698:function(e,t,a){a.d(t,{O:function(){return s}});var n=a(6086),l=a(9669),r=a.n(l),o=a(3978);const s=(0,n.Q_)({id:"profile",state:()=>({pushResponse:null,pushError:null,editProfileError:null,editProfileResponse:null}),getters:{getPostsPerAuthor:e=>t=>e.posts.filter((e=>e.userId===t))},actions:{async getPush(){const e=new o.K;await e.create();const t=await e.get("token"),a=JSON.parse(t).token;try{await r().get(`https://fhd.aostng.ru/vesta_storage/hs/API_STNG/V2/getPUSH?token=${a}`).then((e=>this.pushResponse=e.data))}catch(n){this.pushError=n}},async editProfile(e,t,a){try{await r().post("https://fhd.aostng.ru/vesta_storage/hs/API_STNG/V2/Profile",{token:e,name:t,email:a}).then((e=>this.editProfileResponse=e.data))}catch(n){this.editProfileError=n}}}})},5951:function(e,t,a){a.r(t),a.d(t,{default:function(){return I}});a(7658);var n=a(6252),l=a(3577);const r=e=>((0,n.dD)("data-v-62f07d8b"),e=e(),(0,n.Cn)(),e),o=r((()=>(0,n._)("p",{class:"title ion-text-start"},"Мои данные",-1))),s=r((()=>(0,n._)("p",{class:"sub-title"},"Имя",-1))),u={class:"sub-title"},i={class:"sub-title"},d=r((()=>(0,n._)("p",null,"Контактный телефон",-1)));function p(e,t,a,r,p,c){const h=(0,n.up)("Back"),m=(0,n.up)("ion-text"),f=(0,n.up)("Input"),g=(0,n.up)("ion-item"),v=(0,n.up)("Layout"),w=(0,n.up)("ion-page");return(0,n.wg)(),(0,n.j4)(w,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h,{btnSrc:()=>e.router.push("profile")},null,8,["btnSrc"]),(0,n.Wm)(v,{height:"false",method:e.editProfileHandler,method2:()=>{e.router.push("/profileSend")},loading:e.loading,filledBtn:"Сохранить",title:"Личный кабинет",outlineBtn:"Изменить пароль"},{"main-content":(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[o])),_:1}),(0,n._)("div",null,[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[s])),_:1}),(0,n.Wm)(f,{onUpdated:t[0]||(t[0]=t=>e.name=t),changeHandler:e.nameChange,value:e.name,name:"Укажите имя"},null,8,["changeHandler","value"]),(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n._)("p",u,(0,l.zw)(e.data.email),1)])),_:1}),(0,n.Wm)(f,{name:"Электронная почта",value:e.email,changeHandler:e.emailChange},null,8,["value","changeHandler"]),(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n._)("p",i,(0,l.zw)(e.login),1),d])),_:1})])),_:1})]),e.profileError?.response?.data?.error?((0,n.wg)(),(0,n.j4)(m,{key:0,class:"error"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(e.profileError?.response?.data?.error),1)])),_:1})):(0,n.kq)("",!0)])),_:1},8,["method","method2","loading"])])),_:1})}var c=a(2262),h=a(2201),m=a(2492),f=a(2684),g=a(3994),v=a(6683),w=a(6086),_=a(7698),P=a(3978),k=(0,n.aZ)({name:"profleEditPage",data(){return{codeSent:!1,edit:!1,data:{name:"Иван",surname:"Иванов",secondname:"Иванович",email:"Pochta@mail.ru",phone:"+7(996)-915-88-31"}}},components:{Input:g.Z,Back:v.Z,IonPage:f._i,Layout:m.Z,IonItem:f.Ie,IonText:f.yW},setup(){const e=(0,h.tv)(),{profileResponse:t,profileError:a}=(0,w.Jk)((0,_.O)()),{editProfile:n}=(0,_.O)();let l=(0,c.iH)("");const r=(0,c.iH)(""),o=(0,c.iH)(""),s=(0,c.iH)("");let u=null,i=null,d=(0,c.iH)(!1);const p=async()=>{const e=new P.K;await e.create(),u=await e.get("token"),i=JSON.parse(u),l.value=i?.name,o.value=i?.email,s.value=i?.phone},m=async()=>{d.value=!0,n(JSON.parse(u)?.token,l.value,o.value).then((async()=>{d.value=!1;const e=new P.K;await e.create();const t={...i,name:l.value,email:o.value};await e.set("token",JSON.stringify(t))}))},g=e=>{l.value=e.target.value},v=e=>{r.value=e.target.value},k=e=>{o.value=e.target.value};return(0,f.Yr)((()=>{p()})),{loading:d,profileResponse:t,profileError:a,router:e,editProfileHandler:m,nameChange:g,surnameChange:v,emailChange:k,surname:r,name:l,email:o,login:s}}}),y=a(3744);const H=(0,y.Z)(k,[["render",p],["__scopeId","data-v-62f07d8b"]]);var I=H}}]);
//# sourceMappingURL=5951.d977c5c2.js.map