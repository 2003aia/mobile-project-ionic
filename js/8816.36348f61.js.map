{"version":3,"file":"js/8816.36348f61.js","mappings":"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","sources":["webpack://test/./src/stores/preEntry.js","webpack://test/./src/views/RecordTime.vue","webpack://test/./src/views/RecordTime.vue?dc00"],"sourcesContent":["import { defineStore } from \"pinia\";\r\nimport axios from \"axios\";\r\nimport { isPlatform } from \"@ionic/vue\";\r\n\r\nexport const usePreEntryStore = defineStore({\r\n  id: \"preEntry\",\r\n  state: () => ({\r\n    entryPhone: \"\",\r\n    entryServiceType: \"\",\r\n    entryDate: null,\r\n    entryAvailableTimes: [],\r\n    entryTime: null,\r\n  }),\r\n  getters: {\r\n    getEntryInfo: (state) => {\r\n      return {\r\n        entryPhone: state.entryPhone,\r\n        entryServiceType: state.entryServiceType,\r\n        entryDate: state.entryDate,\r\n        entryAvailableTimes: state.entryAvailableTimes,\r\n        entryTime: state.entryTime,\r\n      };\r\n    },\r\n  },\r\n  actions: {\r\n    async setPhone(phone) {\r\n      this.entryPhone = phone;\r\n    },\r\n    async setServiceType(type) {\r\n      this.entryServiceType = type;\r\n    },\r\n    async setDate(date) {\r\n      this.entryDate = date;\r\n    },\r\n    async setTime(time) {\r\n      this.entryTime = time;\r\n    },\r\n    async fetchTime() {\r\n      if (this.entryDate && this.entryServiceType != \"\") {\r\n        try {\r\n          let config = {\r\n            headers: {\r\n              Accept: \"*/*\",\r\n              \"Content-Type\": \"multipart/form-data\",\r\n            },\r\n          };\r\n\r\n          let device = \"android\";\r\n          if (isPlatform(\"iphone\")) {\r\n            device = \"iphone\";\r\n          }\r\n\r\n          var bodyFormData = new FormData();\r\n          bodyFormData.append(\"date\", this.entryDate);\r\n          bodyFormData.append(\"service\", this.entryServiceType);\r\n          bodyFormData.append(\"ionicDevice\", device);\r\n\r\n          const response = await axios.post(\r\n            `https://aostng.ru/ajax/preregajax.php`,\r\n            bodyFormData,\r\n            config\r\n          );\r\n\r\n          let values = [];\r\n          // Get values between <option value=\"##:##:##\"> and </option>\r\n          const re = />([^<.]+)<\\//g;\r\n          let match = re.exec(response.data);\r\n          while (match != null) {\r\n            values.push(match[1]);\r\n            match = re.exec(response.data);\r\n          }\r\n\r\n          this.entryTime = null;\r\n          this.entryAvailableTimes = values;\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      }\r\n    },\r\n\r\n    async sendFullInfo(phone, type, date, time) {\r\n      console.log(phone, type, date, time);\r\n      try {\r\n        let config = {\r\n          headers: {\r\n            Accept: \"*/*\",\r\n            \"Content-Type\": \"multipart/form-data\",\r\n          },\r\n        };\r\n        let device = \"android\";\r\n        if (isPlatform(\"iphone\")) {\r\n          device = \"iphone\";\r\n        }\r\n\r\n        var bodyFormData = new FormData();\r\n        bodyFormData.append(\"number\", phone);\r\n        bodyFormData.append(\"service\", type);\r\n        bodyFormData.append(\"date\", date);\r\n        bodyFormData.append(\"time\", time);\r\n        bodyFormData.append(\"ionicDevice\", device);\r\n\r\n        await axios.post(`https://aostng.ru/prereg2.php`, bodyFormData, config);\r\n        return true;\r\n      } catch (error) {\r\n        return false;\r\n      }\r\n    },\r\n\r\n    async resetPreEntry() {\r\n      this.entryPhone = \"\";\r\n      this.entryServiceType = \"\";\r\n      this.entryDate = null;\r\n      this.entryAvailableTimes = [];\r\n      this.entryTime = null;\r\n    },\r\n  },\r\n});\r\n","<template>\r\n  <ion-page>\r\n    <Back title=\"Назад\" />\r\n    <Layout outlineBtn=\".\" filledBtn=\".\" title=\"Выбор времени\">\r\n      <template v-slot:main-content>\r\n        <ion-text class=\"title\">Выберите время</ion-text>\r\n\r\n        <div v-if=\"entryAvailableTimes.length > 0\">\r\n          <ion-item\r\n            v-for=\"time in entryAvailableTimes\"\r\n            :key=\"time\"\r\n            router-link=\"/tabs/record\"\r\n            @click=\"selectTime(time)\"\r\n          >\r\n            <ion-text class=\"sub-title\">{{ time }}</ion-text>\r\n          </ion-item>\r\n        </div>\r\n        <div v-else>\r\n          <ion-item router-link=\"/tabs/record\" @click=\"selectTime(null)\">\r\n            <ion-text class=\"sub-title\"\r\n              >Выберите вид услуг и дату записи</ion-text\r\n            >\r\n          </ion-item>\r\n        </div>\r\n      </template>\r\n    </Layout>\r\n  </ion-page>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport Layout from \"../components/Layout.vue\";\r\nimport { IonPage, IonText, IonItem } from \"@ionic/vue\";\r\nimport Back from \"../components/Back.vue\";\r\nimport { storeToRefs } from \"pinia\";\r\nimport { usePreEntryStore } from \"../stores/preEntry\";\r\n\r\nexport default defineComponent({\r\n  name: \"recordTime\",\r\n  components: {\r\n    IonPage,\r\n    Layout,\r\n    IonItem,\r\n    Back,\r\n    IonText,\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n    const preEntryStore = usePreEntryStore();\r\n    const { setTime } = usePreEntryStore();\r\n    const { entryAvailableTimes, entryTime } = storeToRefs(preEntryStore);\r\n    return { router, entryAvailableTimes, entryTime, setTime };\r\n  },\r\n  methods: {\r\n    selectTime(time) {\r\n      if (time && time != \"На данную дату свободного времени нет\") {\r\n        this.setTime(time);\r\n      }\r\n    },\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped>\r\nion-item {\r\n  --padding-start: 0;\r\n  --inner-padding-bottom: 10px;\r\n  --inner-padding-end: 0;\r\n  --inner-padding-top: 20px;\r\n}\r\n</style>\r\n","import { render } from \"./RecordTime.vue?vue&type=template&id=315dbb56&scoped=true\"\nimport script from \"./RecordTime.vue?vue&type=script&lang=js\"\nexport * from \"./RecordTime.vue?vue&type=script&lang=js\"\n\nimport \"./RecordTime.vue?vue&type=style&index=0&id=315dbb56&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Downloads\\\\mobile-project-ionic\\\\mobile-project-ionic\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-315dbb56\"]])\n\nexport default __exports__"],"names":["usePreEntryStore","defineStore","id","state","entryPhone","entryServiceType","entryDate","entryAvailableTimes","entryTime","getters","getEntryInfo","actions","async","phone","this","type","date","time","config","headers","Accept","device","isPlatform","bodyFormData","FormData","append","response","axios","values","re","match","exec","data","push","error","console","log","_createBlock","_component_ion_page","_createVNode","_component_Back","title","_component_Layout","outlineBtn","filledBtn","_withCtx","_component_ion_text","class","_ctx","length","_createElementBlock","_hoisted_1","_Fragment","_renderList","_component_ion_item","key","onClick","_hoisted_2","defineComponent","name","components","IonPage","Layout","IonItem","Back","IonText","setup","router","useRouter","preEntryStore","setTime","storeToRefs","methods","selectTime","__exports__","render"],"sourceRoot":""}