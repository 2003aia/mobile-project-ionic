"use strict";(self["webpackChunktest"]=self["webpackChunktest"]||[]).push([[6413],{6413:function(e,a,t){t.r(a),t.d(a,{default:function(){return I}});t(7658);var l=t(6252),s=t(3577);const n=e=>((0,l.dD)("data-v-1e3aec2a"),e=e(),(0,l.Cn)(),e),i=n((()=>(0,l._)("p",{class:"title ion-text-start"},"Мои данные",-1))),r=n((()=>(0,l._)("p",{class:"sub-title"},"Имя",-1))),u=n((()=>(0,l._)("p",{class:"sub-title"},"Электронная почта",-1))),d=n((()=>(0,l._)("p",{class:"sub-title"},"СНИЛС",-1))),o=n((()=>(0,l._)("p",{class:"sub-title"},"Пасспорт выдан",-1))),m=n((()=>(0,l._)("p",{class:"sub-title"},"Дата выдачи пасспорта",-1))),p=n((()=>(0,l._)("p",{class:"sub-title"},"Серия пасспорта",-1))),h=n((()=>(0,l._)("p",{class:"sub-title"},"Номер пасспорта",-1))),c={class:"sub-title"},f=n((()=>(0,l._)("p",null,"Контактный телефон",-1)));function g(e,a,t,n,g,v){const w=(0,l.up)("Back"),_=(0,l.up)("ion-text"),b=(0,l.up)("Input"),$=(0,l.up)("ion-item"),W=(0,l.up)("Layout"),D=(0,l.up)("ion-page");return(0,l.wg)(),(0,l.j4)(D,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,{btnSrc:()=>e.router.push("/tabs/profile")},null,8,["btnSrc"]),(0,l.Wm)(W,{height:"false",method:e.editProfileHandler,method2:()=>{e.router.push("/tabs/newPassPage")},loading:e.loading,filledBtn:"Сохранить",title:"Личный кабинет",outlineBtn:"Изменить пароль"},{"main-content":(0,l.w5)((()=>[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[i])),_:1}),(0,l._)("div",null,[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[r])),_:1}),(0,l.Wm)(b,{onUpdated:a[0]||(a[0]=a=>e.name=a),changeHandler:a=>e.name=a.target.value,value:e.name,name:"Укажите имя"},null,8,["changeHandler","value"]),(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[u])),_:1}),(0,l.Wm)(b,{type:"email",onUpdated:a[1]||(a[1]=a=>e.email=a),name:"Электронная почта",value:e.email,changeHandler:a=>e.email=a.target.value},null,8,["value","changeHandler"]),(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[d])),_:1}),(0,l.Wm)(b,{mask:"###########",onUpdated:a[2]||(a[2]=a=>e.snils=a),name:"СНИЛС",value:e.snils,changeHandler:a=>e.snils=a.target.value},null,8,["value","changeHandler"]),(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[o])),_:1}),(0,l.Wm)(b,{onUpdated:a[3]||(a[3]=a=>e.issuedBy=a),changeHandler:a=>e.issuedBy=a.target.value,value:e.issuedBy,name:"Пасспорт выдан"},null,8,["changeHandler","value"]),(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[m])),_:1}),(0,l.Wm)(b,{mask:"##.##.####",onUpdated:a[4]||(a[4]=a=>e.issuedDate=a),changeHandler:a=>e.issuedDate=a.target.value,value:e.issuedDate,name:"Дата выдачи"},null,8,["mask","changeHandler","value"]),(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[p])),_:1}),(0,l.Wm)(b,{mask:"####",onUpdated:a[5]||(a[5]=a=>e.serial=a),changeHandler:a=>e.serial=a.target.value,value:e.serial,name:"Серия пасспорта"},null,8,["changeHandler","value"]),(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[h])),_:1}),(0,l.Wm)(b,{mask:"######",onUpdated:a[6]||(a[6]=a=>e.number=a),changeHandler:a=>e.number=a.target.value,value:e.number,name:"Номер пасспорта"},null,8,["changeHandler","value"]),(0,l.Wm)($,null,{default:(0,l.w5)((()=>[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l._)("p",c,(0,s.zw)(e.login),1),f])),_:1})])),_:1})]),e.profileError?.response?.data?.error?((0,l.wg)(),(0,l.j4)(_,{key:0,class:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.profileError?.response?.data?.error),1)])),_:1})):(0,l.kq)("",!0)])),_:1},8,["method","method2","loading"])])),_:1})}var v=t(2201),w=t(2492),_=t(2684),b=t(9196),$=t(2166),W=t(6086),D=t(7698),k=t(3978),y=(0,l.aZ)({name:"profleEditPage",data(){return{codeSent:!1,edit:!1,name:"",email:"",login:"",issuedBy:"",issuedDate:"",serial:"",number:"",snils:"",loading:!1}},components:{Input:b.Z,Back:$.Z,IonPage:_._i,Layout:w.Z,IonItem:_.Ie,IonText:_.yW},methods:{...(0,W.nv)(D.O,["editProfile"]),async editProfileHandler(){this.$data.loading=!0;const e={passport:{serial:this.$data.serial,number:this.$data.number,issuedBy:this.$data.issuedBy,issuedDate:this.$data.issuedDate},snils:this.$data.snils,name:this.$data.name,email:this.$data.email};this.editProfile(e).then((async()=>{this.$data.loading=!1;const e=new k.K;await e.create();const a=await e.get("token"),t={...JSON.parse(a),name:this.$data.name,email:this.$data.email};await e.set("token",JSON.stringify(t))}))}},ionViewDidEnter(){const e=async()=>{const e=new k.K;await e.create();const a=await e.get("token");this.$data.login=JSON.parse(a).phone,this.$data.email=this.profileData?.email,this.$data.name=this.profileData?.name,this.$data.snils=this.profileData?.snils,this.$data.serial=this.profileData?.passport?.serial,this.$data.number=this.profileData?.passport?.number,this.$data.issuedBy=this.profileData?.passport?.issuedBy,this.$data.issuedDate=this.profileData?.passport?.issuedDate};e()},computed:{profileData(){return this.$pinia.state.value?.profile?.profileResponse?.data},profileError(){return this.$pinia.state.value?.profile?.profileError}},setup(){const e=(0,v.tv)();return{router:e}}}),H=t(3744);const B=(0,H.Z)(y,[["render",g],["__scopeId","data-v-1e3aec2a"]]);var I=B}}]);
//# sourceMappingURL=6413.06b88bf0.js.map