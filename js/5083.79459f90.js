"use strict";(self["webpackChunkstng"]=self["webpackChunkstng"]||[]).push([[5083],{5083:function(a,e,t){t.r(e),t.d(e,{default:function(){return b}});t(7658);var n=t(6252),s=t(3577),l=t(9963);const i=a=>((0,n.dD)("data-v-1855523d"),a=a(),(0,n.Cn)(),a),r=i((()=>(0,n._)("p",{class:"title ion-text-start"},"Мои данные",-1))),d=i((()=>(0,n._)("br",null,null,-1))),o={class:"sub-title"},u=i((()=>(0,n._)("p",null,"Контактный телефон",-1))),m=i((()=>(0,n._)("p",{class:"blue"},"Сохранено",-1)));function p(a,e,t,i,p,h){const c=(0,n.up)("Back"),g=(0,n.up)("ion-text"),v=(0,n.up)("Input"),f=(0,n.up)("ion-item"),$=(0,n.up)("Layout"),w=(0,n.up)("ion-page");return(0,n.wg)(),(0,n.j4)(w,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{btnSrc:()=>a.router.push("/tabs/profile")},null,8,["btnSrc"]),(0,n.Wm)($,{height:"false",method:a.editProfileHandler,method2:()=>{a.router.push("/tabs/newPassPage")},loading:a.loading,filledBtn:"Сохранить",title:"Личный кабинет",outlineBtn:"Изменить пароль"},{"main-content":(0,n.w5)((()=>[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[r])),_:1}),d,(0,n._)("div",null,[(0,n.Wm)(v,{onUpdated:e[0]||(e[0]=e=>a.surname=e),changeHandler:e=>a.surname=e.target.value,value:a.surname,name:"Укажите фамилию"},null,8,["changeHandler","value"]),(0,n.Wm)(v,{onUpdated:e[1]||(e[1]=e=>a.name=e),changeHandler:e=>a.name=e.target.value,value:a.name,name:"Укажите имя"},null,8,["changeHandler","value"]),(0,n.Wm)(v,{onUpdated:e[2]||(e[2]=e=>a.lastname=e),changeHandler:e=>a.lastname=e.target.value,value:a.lastname,name:"Укажите отчество"},null,8,["changeHandler","value"]),(0,n.Wm)(v,{type:"email",onUpdated:e[3]||(e[3]=e=>a.email=e),name:"Электронная почта",value:a.email,changeHandler:e=>a.email=e.target.value},null,8,["value","changeHandler"]),(0,n.Wm)(v,{mask:"###-###-###-##",onUpdated:e[4]||(e[4]=e=>a.snils=e),name:"СНИЛС",value:a.snils,changeHandler:e=>a.snils=e.target.value},null,8,["value","changeHandler"]),(0,n.Wm)(v,{onUpdated:e[5]||(e[5]=e=>a.issuedBy=e),changeHandler:e=>a.issuedBy=e.target.value,value:a.issuedBy,name:"Паспорт выдан"},null,8,["changeHandler","value"]),(0,n.Wm)(v,{mask:"##.##.####",onUpdated:e[6]||(e[6]=e=>a.issuedDate=e),changeHandler:e=>a.issuedDate=e.target.value,value:a.issuedDate,name:"Дата выдачи паспорта"},null,8,["mask","changeHandler","value"]),(0,n.Wm)(v,{mask:"## ##",onUpdated:e[7]||(e[7]=e=>a.serial=e),changeHandler:e=>a.serial=e.target.value,value:a.serial,name:"Серия паспорта"},null,8,["changeHandler","value"]),(0,n.Wm)(v,{mask:"######",onUpdated:e[8]||(e[8]=e=>a.number=e),changeHandler:e=>a.number=e.target.value,value:a.number,name:"Номер паспорта"},null,8,["changeHandler","value"]),(0,n.Wm)(v,{mask:"###-###",onUpdated:e[9]||(e[9]=e=>a.codePodr=e),changeHandler:e=>a.codePodr=e.target.value,value:a.codePodr,name:"Код подразделения"},null,8,["changeHandler","value"]),(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n._)("p",o,(0,s.zw)(a.login),1),u])),_:1})])),_:1})]),(0,n.wy)((0,n.Wm)(g,null,{default:(0,n.w5)((()=>[m])),_:1},512),[[l.F8,a.response]]),a.profileError?.response?.data?.error?((0,n.wg)(),(0,n.j4)(g,{key:0,class:"error"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(a.profileError?.response?.data?.error),1)])),_:1})):(0,n.kq)("",!0)])),_:1},8,["method","method2","loading"])])),_:1})}var h=t(2201),c=t(1993),g=t(7821),v=t(9196),f=t(23),$=t(6086),w=t(7698),D=t(3978),H=(0,n.aZ)({name:"profleEditPage",data(){return{codeSent:!1,edit:!1,name:"",lastname:"",surname:"",email:"",login:"",issuedBy:"",issuedDate:"",serial:"",number:"",snils:"",loading:!1,codePodr:"",response:!1}},components:{Input:v.Z,Back:f.Z,IonPage:g._i,Layout:c.Z,IonItem:g.Ie,IonText:g.yW},methods:{...(0,$.nv)(w.O,["editProfile"]),async editProfileHandler(){this.$data.loading=!0;const a={passport:{serial:this.$data.serial.replace(/\s/g,""),number:this.$data.number,issuedBy:this.$data.issuedBy,issuedDate:this.$data.issuedDate,codePodr:this.$data.codePodr},snils:this.$data.snils,name:this.$data.name,surname:this.$data.surname,lastname:this.$data.lastname,email:this.$data.email,consenttoemail:0!==this.$data.email.length||!0!==this.profileData?.consenttoemail};this.editProfile(a).then((async()=>{this.$data.loading=!1;const a=new D.K;await a.create();const e=await a.get("token"),t={...JSON.parse(e),name:this.$data.name,email:this.$data.email};await a.set("token",JSON.stringify(t)),this.$data.response=!0}))}},ionViewDidLeave(){this.$data.response=!1},ionViewDidEnter(){const a=async()=>{const a=new D.K;await a.create();const e=await a.get("token");this.$data.login=JSON.parse(e).phone,this.$data.email=this.profileData?.email,this.$data.name=this.profileData?.name,this.$data.surname=this.profileData?.surname,this.$data.lastname=this.profileData?.lastname,this.$data.snils=this.profileData?.snils,this.$data.serial=this.profileData?.passport?.serial,this.$data.number=this.profileData?.passport?.number,this.$data.issuedBy=this.profileData?.passport?.issuedBy,this.$data.issuedDate=this.profileData?.passport?.issuedDate,this.$data.codePodr=this.profileData?.passport?.codePodr};a()},computed:{profileData(){return this.$pinia.state.value?.profile?.profileResponse?.data},profileError(){return this.$pinia.state.value?.profile?.profileError}},setup(){const a=(0,h.tv)();return{router:a}}}),k=t(3744);const y=(0,k.Z)(H,[["render",p],["__scopeId","data-v-1855523d"]]);var b=y}}]);
//# sourceMappingURL=5083.79459f90.js.map