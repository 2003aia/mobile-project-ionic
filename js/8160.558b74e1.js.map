{"version":3,"file":"js/8160.558b74e1.js","mappings":"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","sources":["webpack://test/./src/stores/services.js","webpack://test/./src/views/ServicesCallInspector.vue","webpack://test/./src/views/ServicesCallInspector.vue?c451"],"sourcesContent":["import { defineStore } from \"pinia\";\r\nimport axios from \"axios\";\r\nimport { Storage } from \"@ionic/storage\";\r\n\r\nexport const useServicesStore = defineStore({\r\n  id: \"services\",\r\n  state: () => ({\r\n    formResponse: null,\r\n    formResponseError: null,\r\n    callInspectorResponse: null,\r\n    callInspectorError: null,\r\n    servicesResponse: null,\r\n    servicesResponseError: null,\r\n    form: [],\r\n    select: [],\r\n  }),\r\n  getters: {\r\n    setForm: (state) => {\r\n      return (value) => [...state.form, ...value];\r\n    },\r\n  },\r\n  actions: {\r\n    async getForms() {\r\n      console.log(\"getting forms\");\r\n      try {\r\n        await axios\r\n          .get(\r\n            `https://aostng.ru/api/?action=getAll&format=json&page=3&limit=20`\r\n          )\r\n          .then((response) => (this.formResponse = response.data));\r\n      } catch (error) {\r\n        this.formResponseError = error;\r\n      }\r\n    },\r\n    async services(forms) {\r\n      console.log(\"services\");\r\n      try {\r\n        await axios\r\n          .post(`https://fhd.aostng.ru/vesta_storage/hs/API_STNG/V2/Services`, {\r\n            status: [\r\n              {\r\n                CODE: \"24\",\r\n                VALUE: \"Требуется документ\",\r\n              },\r\n            ],\r\n            forms: forms,\r\n          })\r\n          .then((response) => (this.servicesResponse = response.data));\r\n      } catch (error) {\r\n        this.servicesResponseError = error;\r\n      }\r\n    },\r\n    async callInspector(lc, phone) {\r\n      try {\r\n        const store = new Storage();\r\n        await store.create();\r\n        const token = await store.get(\"token\");\r\n        const tokenParsed = JSON.parse(token).token;\r\n        await axios\r\n          .post(\r\n            `https://fhd.aostng.ru/vesta_storage/hs/API_STNG/V2/CallInspector`,\r\n            { token: tokenParsed, LC: lc, phone: phone }\r\n          )\r\n          .then((response) => (this.callInspectorResponse = response.data));\r\n      } catch (error) {\r\n        this.callInspectorError = error;\r\n      }\r\n    },\r\n  },\r\n});\r\n","<template>\r\n  <ion-page>\r\n    <!-- btnSrc=\"/tabs/servicesGasContractCheckbox\" -->\r\n\r\n    <Back :btnSrc=\"() => router.push('/tabs/services')\" />\r\n    <Layout\r\n      :loading=\"loading\"\r\n      :method=\"callInspectorHandler\"\r\n      height=\"false\"\r\n      filledBtn=\"Далее\"\r\n      outlineBtn=\".\"\r\n      title=\"Вызов инспектора\"\r\n    >\r\n      <!-- <template v-slot:header-content>\r\n        <ion-text>\r\n          <p class=\"text-20-600\">Общие сведения заявления</p>\r\n        </ion-text>\r\n      </template> -->\r\n      <template v-slot:main-content>\r\n        <ion-text>\r\n          <p class=\"title ion-text-start\">Данные заявителя</p>\r\n          <p>\r\n            <ion-text class=\"dot\">*</ion-text> - обязательное поле для\r\n            заполнения.\r\n          </p>\r\n        </ion-text>\r\n\r\n        <Input\r\n          :value=\"lc\"\r\n          :changeHandler=\"changeLc\"\r\n          name=\"Укажите лицевой счет \"\r\n          :required=\"true\"\r\n        />\r\n        <Input\r\n          name=\"Укажите номер телефона \"\r\n          :value=\"phone\"\r\n          :changeHandler=\"changePhone\"\r\n        />\r\n        <ion-text v-if=\"error\">\r\n          <p class=\"ion-text-start error\">\r\n            {{ error }}\r\n          </p>\r\n        </ion-text>\r\n        <ion-text v-if=\"response\">\r\n          <p class=\"ion-text-start\">\r\n            {{ response }}\r\n          </p>\r\n        </ion-text>\r\n      </template>\r\n    </Layout>\r\n  </ion-page>\r\n</template>\r\n\r\n\r\n<script>\r\nimport { defineComponent } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport Layout from \"../components/Layout.vue\";\r\nimport { IonPage, IonText } from \"@ionic/vue\";\r\nimport Input from \"../components/Input.vue\";\r\nimport Back from \"../components/Back.vue\";\r\nimport { mapActions } from \"pinia\";\r\nimport { useServicesStore } from \"../stores/services\";\r\nexport default defineComponent({\r\n  name: \"servicesCallInspector\",\r\n  components: {\r\n    IonPage,\r\n    Layout,\r\n    IonText,\r\n    Input,\r\n    Back,\r\n  },\r\n  data() {\r\n    return {\r\n      phone: \"\",\r\n      lc: \"\",\r\n      error: \"\",\r\n      loading: false,\r\n    };\r\n  },\r\n  computed: {\r\n    response() {\r\n      return this.$pinia.state.value?.services?.callInspectorResponse?.message;\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions(useServicesStore, [\"callInspector\"]),\r\n    callInspectorHandler() {\r\n      if (this.$data.lc !== \"\") {\r\n        this.$data.loading = true;\r\n        this.$data.error = \"\";\r\n        const callInspector = new Promise((resolve) => {\r\n          resolve(this.callInspector(this.$data.lc, this.$data.phone));\r\n        });\r\n        callInspector.then(()=>{\r\n          this.$data.loading = false\r\n        })\r\n      } else {\r\n        this.$data.error = \"Заполните поле лицевой счет\";\r\n      }\r\n    },\r\n    changePhone(e) {\r\n      this.$data.phone = e.target.value;\r\n    },\r\n    changeLc(e) {\r\n      this.$data.lc = e.target.value;\r\n    },\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n    return { router };\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.text-white {\r\n  color: #fff;\r\n}\r\n.dot {\r\n  color: #62d0ce;\r\n}\r\n</style>","import { render } from \"./ServicesCallInspector.vue?vue&type=template&id=bd20274a&scoped=true\"\nimport script from \"./ServicesCallInspector.vue?vue&type=script&lang=js\"\nexport * from \"./ServicesCallInspector.vue?vue&type=script&lang=js\"\n\nimport \"./ServicesCallInspector.vue?vue&type=style&index=0&id=bd20274a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Downloads\\\\mobile-project-ionic\\\\mobile-project-ionic\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-bd20274a\"]])\n\nexport default __exports__"],"names":["useServicesStore","defineStore","id","state","formResponse","formResponseError","callInspectorResponse","callInspectorError","servicesResponse","servicesResponseError","form","select","getters","setForm","value","actions","async","console","log","axios","then","response","this","data","error","forms","status","CODE","VALUE","lc","phone","store","Storage","create","token","get","tokenParsed","JSON","parse","LC","_createElementVNode","class","_createBlock","_component_ion_page","_createVNode","_component_Back","btnSrc","_ctx","push","_component_Layout","loading","method","height","filledBtn","outlineBtn","title","_withCtx","_component_ion_text","_hoisted_1","_component_Input","changeHandler","name","required","key","_toDisplayString","defineComponent","components","IonPage","Layout","IonText","Input","Back","computed","$pinia","services","message","methods","mapActions","callInspectorHandler","$data","callInspector","Promise","resolve","changePhone","e","target","changeLc","setup","router","useRouter","__exports__","render"],"sourceRoot":""}